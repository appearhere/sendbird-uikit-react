{"version":3,"file":"ChannelPreviewAction.js","sources":["../../../src/smart-components/ChannelList/components/LeaveChannel/index.tsx","../../../src/smart-components/ChannelList/components/ChannelPreviewAction.jsx"],"sourcesContent":["import React from 'react';\n\nimport useSendbirdStateContext from '../../../../hooks/useSendbirdStateContext';\nimport { noop } from '../../../../utils/utils';\n\nimport Modal from '../../../../ui/Modal';\nimport { useChannelListContext } from '../../context/ChannelListProvider';\nimport { useLocalization } from '../../../../lib/LocalizationContext';\nimport { GroupChannel } from '@sendbird/chat/groupChannel';\n\nexport type LeaveChannelProps = {\n  channel?: GroupChannel;\n  onSubmit: () => void;\n  onCancel: () => void;\n}\n\nconst LeaveChannel: React.FC<LeaveChannelProps> = (props: LeaveChannelProps) => {\n  const {\n    channel = null,\n    onSubmit = noop,\n    onCancel = noop,\n  } = props;\n\n  const channelFromContext = useChannelListContext()?.currentChannel;\n  const leavingChannel = channel || channelFromContext;\n  const state = useSendbirdStateContext();\n  const { stringSet } = useLocalization();\n\n  const logger = state?.config?.logger;\n  const isOnline = state?.config?.isOnline;\n  if (leavingChannel) {\n    return (\n      <Modal\n        disabled={!isOnline}\n        onCancel={onCancel}\n        onSubmit={() => {\n          logger.info('ChannelSettings: Leaving channel', leavingChannel);\n          leavingChannel?.leave()\n            .then(() => {\n              logger.info('ChannelSettings: Leaving channel successful!', leavingChannel);\n              onSubmit();\n            });\n        }}\n        submitText={stringSet.MODAL__LEAVE_CHANNEL__FOOTER}\n        titleText={stringSet.MODAL__LEAVE_CHANNEL__TITLE}\n      />\n    );\n  }\n};\n\nexport default LeaveChannel;\n","import React, {\n  useState,\n  useRef,\n  useContext,\n} from 'react';\nimport PropTypes from 'prop-types';\n\nimport { LocalizationContext } from '../../../lib/LocalizationContext';\nimport ContextMenu, { MenuItem, MenuItems } from '../../../ui/ContextMenu';\nimport IconButton from '../../../ui/IconButton';\nimport Icon, { IconTypes, IconColors } from '../../../ui/Icon';\nimport LeaveChannelModal from './LeaveChannel';\n\nexport default function ChannelPreviewAction({\n  channel,\n  disabled,\n  onLeaveChannel,\n}) {\n  const parentRef = useRef(null);\n  const parentContainerRef = useRef(null);\n  const [showModal, setShowModal] = useState(false);\n  const { stringSet } = useContext(LocalizationContext);\n\n  return (\n    <div\n      role=\"button\"\n      style={{ display: 'inline-block' }}\n      onKeyDown={(e) => { e.stopPropagation(); }}\n      tabIndex={0}\n      onClick={(e) => { e.stopPropagation(); }}\n      ref={parentContainerRef}\n    >\n      <ContextMenu\n        menuTrigger={(toggleDropdown) => (\n          <IconButton\n            ref={parentRef}\n            onClick={toggleDropdown}\n            height=\"32px\"\n            width=\"32px\"\n          >\n            <Icon\n              type={IconTypes.MORE}\n              fillColor={IconColors.PRIMARY}\n              width=\"24px\"\n              height=\"24px\"\n            />\n          </IconButton>\n        )}\n        menuItems={(closeDropdown) => (\n          <MenuItems\n            parentRef={parentRef}\n            parentContainRef={parentContainerRef}\n            closeDropdown={closeDropdown}\n          >\n            <MenuItem\n              onClick={() => {\n                if (disabled) { return; }\n                setShowModal(true);\n                closeDropdown();\n              }}\n            >\n              {stringSet.CHANNEL_SETTING__LEAVE_CHANNEL__TITLE}\n            </MenuItem>\n          </MenuItems>\n        )}\n      />\n      {\n        showModal && (\n          <LeaveChannelModal\n            channel={channel}\n            onSubmit={() => {\n              setShowModal(false);\n              onLeaveChannel();\n            }}\n            onCancel={() => setShowModal(false)}\n          />\n        )\n      }\n    </div>\n  );\n}\n\nChannelPreviewAction.propTypes = {\n  disabled: PropTypes.bool,\n  onLeaveChannel: PropTypes.func.isRequired,\n  channel: PropTypes.shape({}),\n};\n\nChannelPreviewAction.defaultProps = {\n  disabled: false,\n  channel: null,\n};\n"],"names":["LeaveChannel","props","_d","channel","_e","onSubmit","noop","_f","onCancel","channelFromContext","_a","useChannelListContext","currentChannel","leavingChannel","state","useSendbirdStateContext","stringSet","useLocalization","logger","_b","config","isOnline","_c","React","info","leave","then","MODAL__LEAVE_CHANNEL__FOOTER","MODAL__LEAVE_CHANNEL__TITLE","ChannelPreviewAction","disabled","onLeaveChannel","parentRef","useRef","parentContainerRef","showModal","setShowModal","useState","useContext","LocalizationContext","display","e","stopPropagation","toggleDropdown","IconTypes","MORE","IconColors","PRIMARY","closeDropdown","CHANNEL_SETTING__LEAVE_CHANNEL__TITLE","LeaveChannelModal","propTypes","PropTypes","bool","func","isRequired","shape","defaultProps"],"mappings":"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"}