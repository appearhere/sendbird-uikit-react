{"version":3,"file":"SendbirdProvider.js","sources":["../src/lib/dux/sdk/actionTypes.js","../src/lib/dux/sdk/thunks.js","../src/lib/hooks/useTheme.ts","../src/lib/dux/sdk/initialState.js","../src/lib/dux/sdk/reducers.js","../src/lib/dux/user/initialState.js","../src/lib/dux/user/reducers.js","../src/lib/hooks/useOnlineStatus.js","../src/lib/Logger/index.js","../src/lib/pubSub/index.js","../src/hooks/useAppendDomNode.js","../src/lib/Sendbird.jsx"],"sourcesContent":["export const INIT_SDK = 'INIT_SDK';\nexport const SET_SDK_LOADING = 'SET_SDK_LOADING';\nexport const RESET_SDK = 'RESET_SDK';\nexport const SDK_ERROR = 'SDK_ERROR';\n","import SendbirdChat from '@sendbird/chat';\nimport { OpenChannelModule } from '@sendbird/chat/openChannel';\nimport { GroupChannelModule } from '@sendbird/chat/groupChannel';\n\nimport {\n  INIT_SDK,\n  SET_SDK_LOADING,\n  RESET_SDK,\n  SDK_ERROR,\n} from './actionTypes';\nimport { INIT_USER, UPDATE_USER_INFO, RESET_USER } from '../user/actionTypes';\nimport { isTextuallyNull } from '../../../utils';\n\nconst APP_VERSION_STRING = '__uikit_app_version__';\nconst IS_ROLLUP = '__is_rollup__';\nconst IS_ROLLUP_REPLACE = '__is_rollup_replace__';\n\nexport const disconnectSdk = ({\n  sdkDispatcher,\n  userDispatcher,\n  sdk,\n  onDisconnect,\n}) => {\n  sdkDispatcher({ type: SET_SDK_LOADING, payload: true });\n  if (sdk && sdk.disconnect) {\n    sdk.disconnect()\n      .then(() => {\n        sdkDispatcher({ type: RESET_SDK });\n        userDispatcher({ type: RESET_USER });\n      })\n      .finally(() => {\n        onDisconnect();\n      });\n  } else {\n    onDisconnect();\n  }\n};\n\nexport const handleConnection = ({\n  userId,\n  appId,\n  nickname,\n  profileUrl,\n  accessToken,\n  configureSession,\n  customApiHost,\n  customWebSocketHost,\n  sdk,\n  logger,\n}, dispatchers) => {\n  const {\n    sdkDispatcher,\n    userDispatcher,\n  } = dispatchers;\n  disconnectSdk({\n    sdkDispatcher,\n    userDispatcher,\n    sdk,\n    logger,\n    onDisconnect: () => {\n      logger.info('Setup connection');\n      let sessionHandler = null;\n      sdkDispatcher({ type: SET_SDK_LOADING, payload: true });\n      if (userId && appId) {\n        const params = {\n          appId,\n          modules: [\n            new GroupChannelModule(),\n            new OpenChannelModule(),\n          ],\n        };\n        if (customApiHost) {\n          params.customApiHost = customApiHost;\n        }\n        if (customWebSocketHost) {\n          params.customWebSocketHost = customWebSocketHost;\n        }\n        const newSdk = SendbirdChat.init(params);\n        if (configureSession && typeof configureSession === 'function') {\n          sessionHandler = configureSession(newSdk);\n          newSdk.setSessionHandler(sessionHandler);\n        }\n        // to check if code is released version from rollup and *not from storybook*\n        // see rollup config file\n        if (IS_ROLLUP === IS_ROLLUP_REPLACE) {\n          newSdk.addExtension('sb_uikit', APP_VERSION_STRING);\n        }\n        const connectCbSucess = (user) => {\n          sdkDispatcher({ type: INIT_SDK, payload: newSdk });\n          userDispatcher({ type: INIT_USER, payload: user });\n          // use nickname/profileUrl if provided\n          // or set userID as nickname\n          if ((nickname !== user.nickname || profileUrl !== user.profileUrl)\n            && !(isTextuallyNull(nickname) && isTextuallyNull(profileUrl))\n          ) {\n            newSdk.updateCurrentUserInfo({\n              nickname: nickname || user.nickname,\n              profileUrl: profileUrl || user.profileUrl,\n            }).then((namedUser) => {\n              userDispatcher({ type: UPDATE_USER_INFO, payload: namedUser });\n            });\n          }\n        };\n\n        const connectCbError = (e) => {\n          logger.error('Connection failed', `${e}`);\n          sdkDispatcher({ type: RESET_SDK });\n          sdkDispatcher({ type: RESET_USER });\n          sdkDispatcher({ type: SDK_ERROR });\n        };\n\n        if (accessToken) {\n          newSdk.connect(userId, accessToken)\n            .then((res) => connectCbSucess(res))\n            .catch((err) => connectCbError(err));\n        } else {\n          newSdk.connect(userId)\n            .then((res) => connectCbSucess(res))\n            .catch((err) => connectCbError(err));\n        }\n      } else {\n        sdkDispatcher({ type: SDK_ERROR });\n        logger.warning('Connection failed', 'UserId or appId missing');\n      }\n    },\n  });\n};\n","import { useLayoutEffect } from 'react';\nimport cssVars from 'css-vars-ponyfill';\n\nconst isEmpty = (obj) => {\n  if (obj === null || obj === undefined) {\n    return true;\n  }\n\n  for (const prop in obj) {\n    if (obj.hasOwnProperty(prop)) {\n      return false;\n    }\n  }\n  return JSON.stringify(obj) === JSON.stringify({});\n}\n\nconst useTheme = (overrides: Record<string, string>): void => {\n  useLayoutEffect(() => {\n    if (!isEmpty(overrides)) {\n      cssVars({\n        variables: {\n          ...{\n            '--sendbird-dark-primary-500': '#4d2aa6',\n            '--sendbird-dark-primary-400': '#6440C4',\n            '--sendbird-dark-primary-300': '#7B53EF',\n            '--sendbird-dark-primary-200': '#9E8CF5',\n            '--sendbird-dark-primary-100': '#E2DFFF',\n\n            '--sendbird-dark-secondary-500': '#007A7A',\n            '--sendbird-dark-secondary-400': '#189A8D',\n            '--sendbird-dark-secondary-300': '#2EBA9F',\n            '--sendbird-dark-secondary-200': '#6FD6BE',\n            '--sendbird-dark-secondary-100': '#AEF2DC',\n\n            '--sendbird-dark-information-100': '#b2d9ff',\n\n            '--sendbird-dark-error-500': '#A30E2D',\n            '--sendbird-dark-error-400': '#C11F41',\n            '--sendbird-dark-error-300': '#E53157',\n            '--sendbird-dark-error-200': '#FF6183',\n            '--sendbird-dark-error-100': '#FFABBD',\n\n            '--sendbird-dark-background-700': '#000000',\n            '--sendbird-dark-background-600': '#161616',\n            '--sendbird-dark-background-500': '#2C2C2C',\n            '--sendbird-dark-background-400': '#393939',\n            '--sendbird-dark-background-300': '#A8A8A8',\n            '--sendbird-dark-background-200': '#D9D9D9',\n            '--sendbird-dark-background-100': '#F0F0F0',\n            '--sendbird-dark-background-50': '#FFFFFF',\n\n            '--sendbird-dark-overlay': 'rgba(0, 0, 0, 0.32)',\n\n            '--sendbird-dark-onlight-01': 'rgba(0, 0, 0, 0.88)',\n            '--sendbird-dark-onlight-02': 'rgba(0, 0, 0, 0.50)',\n            '--sendbird-dark-onlight-03': 'rgba(0, 0, 0, 0.38)',\n            '--sendbird-dark-onlight-04': 'rgba(0, 0, 0, 0.12)',\n\n            '--sendbird-dark-ondark-01': 'rgba(255, 255, 255, 0.88)',\n            '--sendbird-dark-ondark-02': 'rgba(255, 255, 255, 0.50)',\n            '--sendbird-dark-ondark-03': 'rgba(255, 255, 255, 0.38)',\n            '--sendbird-dark-ondark-04': 'rgba(255, 255, 255, 0.12)',\n\n            '--sendbird-dark-shadow-01': '0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)',\n            '--sendbird-dark-shadow-02': '0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)',\n            '--sendbird-dark-shadow-03': '0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)',\n            '--sendbird-dark-shadow-04': '0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)',\n\n            '--sendbird-dark-shadow-message-input': '0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)',\n\n            '--sendbird-light-primary-500': '#4d2aa6',\n            '--sendbird-light-primary-400': '#6440C4',\n            '--sendbird-light-primary-300': '#7B53EF',\n            '--sendbird-light-primary-200': '#9E8CF5',\n            '--sendbird-light-primary-100': '#E2DFFF',\n\n            '--sendbird-light-secondary-500': '#007A7A',\n            '--sendbird-light-secondary-400': '#189A8D',\n            '--sendbird-light-secondary-300': '#2EBA9F',\n            '--sendbird-light-secondary-200': '#6FD6BE',\n            '--sendbird-light-secondary-100': '#AEF2DC',\n\n            '--sendbird-light-information-100': '#b2d9ff',\n\n            '--sendbird-light-error-500': '#A30E2D',\n            '--sendbird-light-error-400': '#C11F41',\n            '--sendbird-light-error-300': '#E53157',\n            '--sendbird-light-error-200': '#FF6183',\n            '--sendbird-light-error-100': '#FFABBD',\n\n            '--sendbird-light-background-700': '#000000',\n            '--sendbird-light-background-600': '#161616',\n            '--sendbird-light-background-500': '#2C2C2C',\n            '--sendbird-light-background-400': '#393939',\n            '--sendbird-light-background-300': '#A8A8A8',\n            '--sendbird-light-background-200': '#D9D9D9',\n            '--sendbird-light-background-100': '#F0F0F0',\n            '--sendbird-light-background-50': ' #FFFFFF',\n\n            '--sendbird-light-overlay': 'rgba(0, 0, 0, 0.32)',\n\n            '--sendbird-light-onlight-01': 'rgba(0, 0, 0, 0.88)',\n            '--sendbird-light-onlight-02': 'rgba(0, 0, 0, 0.50)',\n            '--sendbird-light-onlight-03': 'rgba(0, 0, 0, 0.38)',\n            '--sendbird-light-onlight-04': 'rgba(0, 0, 0, 0.12)',\n\n            '--sendbird-light-ondark-01': 'rgba(255, 255, 255, 0.88)',\n            '--sendbird-light-ondark-02': 'rgba(255, 255, 255, 0.50)',\n            '--sendbird-light-ondark-03': 'rgba(255, 255, 255, 0.38)',\n            '--sendbird-light-ondark-04': 'rgba(255, 255, 255, 0.12)',\n\n            '--sendbird-light-shadow-01': '0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)',\n            '--sendbird-light-shadow-02': '0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)',\n            '--sendbird-light-shadow-03': '0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)',\n            '--sendbird-light-shadow-04': '0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)',\n\n            '--sendbird-light-shadow-message-input': '0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)',\n          },\n          ...overrides,\n        },\n      });\n    }\n  }, [overrides]);\n};\n\nexport default useTheme;\n","export default {\n  initialized: false,\n  loading: false,\n  sdk: {},\n  error: false,\n};\n","import * as sdkActions from './actionTypes';\nimport initialState from './initialState';\n\nexport default function reducer(state, action) {\n  switch (action.type) {\n    case sdkActions.SET_SDK_LOADING:\n      return {\n        ...state,\n        initialized: false,\n        loading: action.payload,\n      };\n    case sdkActions.SDK_ERROR:\n      return {\n        ...state,\n        initialized: false,\n        loading: false,\n        error: true,\n      };\n    case sdkActions.INIT_SDK:\n      return {\n        sdk: action.payload,\n        initialized: true,\n        loading: false,\n        error: false,\n      };\n    case sdkActions.RESET_SDK:\n      return initialState;\n    default:\n      return state;\n  }\n}\n","export default {\n  initialized: false,\n  loading: false,\n  user: {},\n};\n","import * as actions from './actionTypes';\nimport initialState from './initialState';\n\nexport default function reducer(state, action) {\n  switch (action.type) {\n    case actions.INIT_USER:\n      return {\n        initialized: true,\n        loading: false,\n        user: action.payload,\n      };\n    case actions.RESET_USER:\n      return initialState;\n    case actions.UPDATE_USER_INFO:\n      return {\n        ...state,\n        user: action.payload,\n      };\n    default:\n      return state;\n  }\n}\n","import { ConnectionHandler } from '@sendbird/chat';\nimport { useState, useEffect } from 'react';\n\nimport { uuidv4 } from '../../utils/uuid';\n\nfunction useConnectionStatus(sdk, logger) {\n  const [isOnline, setIsOnline] = useState(true);\n\n  useEffect(() => {\n    const uniqueHandlerId = uuidv4();\n    try {\n      logger.warning('sdk changed', uniqueHandlerId);\n      const handler = new ConnectionHandler();\n      handler.onDisconnected = () => {\n        logger.warning('onDisconnected', { isOnline });\n      };\n      handler.onReconnectStarted = () => {\n        setIsOnline(false);\n        logger.warning('onReconnectStarted', { isOnline });\n      };\n      handler.onReconnectSucceeded = () => {\n        setIsOnline(true);\n        logger.warning('onReconnectSucceeded', { isOnline });\n      };\n      handler.onReconnectFailed = () => {\n        sdk.reconnect();\n        logger.warning('onReconnectFailed');\n      };\n      logger.info('Added ConnectionHandler', uniqueHandlerId);\n      // workaround -> addConnectionHandler invalidates session handler\n      // provided through configureSession\n      if (sdk?.addConnectionHandler) {\n        sdk.addConnectionHandler(uniqueHandlerId, handler);\n      }\n    } catch {\n      //\n    }\n    return () => {\n      try {\n        sdk.removeConnectionHandler(uniqueHandlerId);\n        logger.info('Removed ConnectionHandler', uniqueHandlerId);\n      } catch {\n        //\n      }\n    };\n  }, [sdk]);\n\n  useEffect(() => {\n    const tryReconnect = () => {\n      try {\n        logger.warning('Try reconnecting SDK');\n        if (sdk.connectionState !== 'OPEN') { // connection is not broken yet\n          sdk.reconnect();\n        }\n      } catch {\n        //\n      }\n    };\n    // addEventListener version\n    window.addEventListener('online', tryReconnect);\n    return () => {\n      window.removeEventListener('online', tryReconnect);\n    };\n  }, [sdk]);\n\n  // add offline-class to body\n  useEffect(() => {\n    const body = document.querySelector('body');\n    if (!isOnline) {\n      try {\n        body.classList.add('sendbird__offline');\n        logger.info('Added class sendbird__offline to body');\n      } catch (e) {\n        //\n      }\n    } else {\n      try {\n        body.classList.remove('sendbird__offline');\n        logger.info('Removed class sendbird__offline from body');\n      } catch (e) {\n        //\n      }\n    }\n  }, [isOnline]);\n\n  return isOnline;\n}\n\nexport default useConnectionStatus;\n","// Logger, pretty much explains it\n// in SendbirdProvider\n// const [logger, setLogger] = useState(LoggerFactory(logLevel));\nexport const LOG_LEVELS = {\n  DEBUG: 'debug',\n  WARNING: 'warning',\n  ERROR: 'error',\n  INFO: 'info',\n  ALL: 'all',\n};\n\nconst colorLog = (level) => {\n  switch (level) {\n    case LOG_LEVELS.WARNING:\n      return ('color: Orange');\n    case LOG_LEVELS.ERROR:\n      return ('color: Red');\n    default:\n      return ('color: Gray');\n  }\n};\n\nexport const printLog = ({\n  level,\n  title,\n  description = '',\n}) => {\n  // eslint-disable-next-line no-console\n  console.log(\n    `%c SendbirdUIKit | ${level} | ${new Date().toISOString()} | ${title} ${description && '|'}`, colorLog(level),\n    description,\n  );\n};\n\nexport const getDefaultLogger = () => ({\n  info: () => {},\n  error: () => {},\n  warning: () => {},\n});\n\nexport const LoggerFactory = (lvl, customInterface) => {\n  const logInterface = customInterface || printLog;\n  const lvlArray = Array.isArray(lvl) ? lvl : [lvl];\n\n  const applyLog = (lgLvl) => (title, description) => logInterface({\n    level: lgLvl,\n    title,\n    description,\n  });\n\n  const logger = lvlArray.reduce((accumulator, currentLvl) => {\n    if (currentLvl === LOG_LEVELS.DEBUG || currentLvl === LOG_LEVELS.ALL) {\n      return ({\n        ...accumulator,\n        info: applyLog(LOG_LEVELS.INFO),\n        error: applyLog(LOG_LEVELS.ERROR),\n        warning: applyLog(LOG_LEVELS.WARNING),\n      });\n    }\n\n    if (currentLvl === LOG_LEVELS.INFO) {\n      return ({\n        ...accumulator,\n        info: applyLog(LOG_LEVELS.INFO),\n      });\n    }\n\n    if (currentLvl === LOG_LEVELS.ERROR) {\n      return ({\n        ...accumulator,\n        error: applyLog(LOG_LEVELS.ERROR),\n      });\n    }\n\n    if (currentLvl === LOG_LEVELS.WARNING) {\n      return ({\n        ...accumulator,\n        warning: applyLog(LOG_LEVELS.WARNING),\n      });\n    }\n\n    return { ...accumulator };\n  }, getDefaultLogger());\n  return logger;\n};\n","// https://davidwalsh.name/pubsub-javascript\n// we use pubsub to sync events between multiple components(example - ChannelList, Channel)\n// for example, if customer sends a message from their custom component\n// without pubsub,we would not be able to listen to it\n// in our ChannelList or Conversation\nexport default () => {\n  const topics = {};\n  const hOP = topics.hasOwnProperty;\n\n  return {\n    __getTopics: () => topics,\n    subscribe: (topic, listener) => {\n      // Create the topic's object if not yet created\n      if (!hOP.call(topics, topic)) { topics[topic] = []; }\n\n      // Add the listener to queue\n      const index = topics[topic].push(listener) - 1;\n\n      // Provide handle back for removal of topic\n      return {\n        remove: () => {\n          delete topics[topic][index];\n        },\n      };\n    },\n    publish: (topic, info) => {\n      // If the topic doesn't exist, or there's no listeners in queue, just leave\n      if (!hOP.call(topics, topic)) { return; }\n\n      // Cycle through topics queue, fire!\n      topics[topic].forEach((item) => {\n        item(info !== undefined ? info : {});\n      });\n    },\n  };\n};\n","import { useEffect } from 'react';\n\nfunction useAppendDomNode(ids = [], rootSelector) {\n  useEffect(() => {\n    const root = document.querySelector(rootSelector);\n    ids.forEach((id) => {\n      const elem = document.createElement('div');\n      elem.setAttribute('id', id);\n      root.appendChild(elem);\n    });\n    return () => {\n      ids.forEach((id) => {\n        const target = document.getElementById(id);\n        if (target) {\n          root.removeChild(target);\n        }\n      });\n    };\n  }, []);\n}\n\nexport default useAppendDomNode;\n","import './index.scss';\nimport './__experimental__typography.scss';\n\nimport React, { useEffect, useReducer, useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { SendbirdSdkContext } from './SendbirdSdkContext';\nimport { handleConnection } from './dux/sdk/thunks';\n\nimport useTheme from './hooks/useTheme';\n\nimport sdkReducers from './dux/sdk/reducers';\nimport userReducers from './dux/user/reducers';\nimport sdkInitialState from './dux/sdk/initialState';\nimport userInitialState from './dux/user/initialState';\n\nimport useOnlineStatus from './hooks/useOnlineStatus';\n\nimport { LoggerFactory } from './Logger';\nimport pubSubFactory from './pubSub/index';\nimport useAppendDomNode from '../hooks/useAppendDomNode';\n\nimport { LocalizationProvider } from './LocalizationContext';\nimport { MediaQueryProvider } from './MediaQueryContext';\nimport getStringSet from '../ui/Label/stringSet';\n\nexport default function Sendbird(props) {\n  const {\n    userId,\n    dateLocale,\n    appId,\n    accessToken,\n    configureSession,\n    // mediaQueryBreakPoint,\n    customApiHost,\n    customWebSocketHost,\n    children,\n    disableUserProfile,\n    disableMarkAsDelivered,\n    renderUserProfile,\n    onUserProfileMessage,\n    allowProfileEdit,\n    theme,\n    nickname,\n    profileUrl,\n    userListQuery,\n    config = {},\n    colorSet,\n    stringSet,\n    imageCompression,\n    isReactionEnabled,\n    isMentionEnabled,\n    isTypingIndicatorEnabledOnChannelList,\n    isMessageReceiptStatusEnabledOnChannelList,\n    replyType,\n  } = props;\n\n  const mediaQueryBreakPoint = false;\n\n  const {\n    logLevel = '',\n    userMention = {},\n    isREMUnitEnabled = false,\n  } = config;\n  const [logger, setLogger] = useState(LoggerFactory(logLevel));\n  const [pubSub, setPubSub] = useState();\n  const [sdkStore, sdkDispatcher] = useReducer(sdkReducers, sdkInitialState);\n  const [userStore, userDispatcher] = useReducer(userReducers, userInitialState);\n\n  useTheme(colorSet);\n\n  useEffect(() => {\n    setPubSub(pubSubFactory());\n  }, []);\n\n  useEffect(() => {\n    logger.info('App Init');\n    // dispatch action\n    handleConnection({\n      userId,\n      appId,\n      accessToken,\n      sdkStore,\n      nickname,\n      profileUrl,\n      configureSession,\n      customApiHost,\n      customWebSocketHost,\n      sdk: sdkStore.sdk,\n      logger,\n    }, {\n      sdkDispatcher,\n      userDispatcher,\n    });\n  }, [userId, appId, accessToken]);\n\n  // to create a pubsub to communicate between parent and child\n  useEffect(() => {\n    setLogger(LoggerFactory(logLevel));\n  }, [logLevel]);\n\n  useAppendDomNode([\n    'sendbird-modal-root',\n    'sendbird-dropdown-portal',\n    'sendbird-emoji-list-portal',\n  ], 'body');\n\n  // should move to reducer\n  const [currenttheme, setCurrenttheme] = useState(theme);\n  useEffect(() => {\n    setCurrenttheme(theme);\n  }, [theme]);\n\n  useEffect(() => {\n    const body = document.querySelector('body');\n    body.classList.remove('sendbird-experimental__rem__units');\n    if (isREMUnitEnabled) {\n      body.classList.add('sendbird-experimental__rem__units');\n    }\n  }, [isREMUnitEnabled]);\n  // add-remove theme from body\n  useEffect(() => {\n    logger.info('Setup theme', `Theme: ${currenttheme}`);\n    try {\n      const body = document.querySelector('body');\n      body.classList.remove('sendbird-theme--light');\n      body.classList.remove('sendbird-theme--dark');\n      body.classList.add(`sendbird-theme--${currenttheme || 'light'}`);\n      logger.info('Finish setup theme');\n      // eslint-disable-next-line no-empty\n    } catch (e) {\n      logger.warning('Setup theme failed', `${e}`);\n    }\n    return () => {\n      try {\n        const body = document.querySelector('body');\n        body.classList.remove('sendbird-theme--light');\n        body.classList.remove('sendbird-theme--dark');\n        // eslint-disable-next-line no-empty\n      } catch { }\n    };\n  }, [currenttheme]);\n\n  const isOnline = useOnlineStatus(sdkStore.sdk, logger);\n\n  const localeStringSet = React.useMemo(() => {\n    if (!stringSet) {\n      return getStringSet('en');\n    }\n    return {\n      ...getStringSet('en'),\n      ...stringSet,\n    };\n  }, [stringSet]);\n\n  return (\n    <SendbirdSdkContext.Provider\n      value={{\n        stores: {\n          sdkStore,\n          userStore,\n        },\n        dispatchers: {\n          sdkDispatcher,\n          userDispatcher,\n          reconnect: () => {\n            handleConnection({\n              userId,\n              appId,\n              accessToken,\n              sdkStore,\n              nickname,\n              profileUrl,\n              logger,\n              sdk: sdkStore.sdk,\n            }, {\n              sdkDispatcher,\n              userDispatcher,\n            });\n          },\n        },\n        config: {\n          disableUserProfile,\n          disableMarkAsDelivered,\n          renderUserProfile,\n          onUserProfileMessage,\n          allowProfileEdit,\n          isOnline,\n          userId,\n          appId,\n          accessToken,\n          theme: currenttheme,\n          setCurrenttheme,\n          userListQuery,\n          logger,\n          pubSub,\n          imageCompression: {\n            compressionRate: 0.7,\n            ...imageCompression,\n          },\n          isReactionEnabled,\n          isMentionEnabled: isMentionEnabled || false,\n          userMention: {\n            maxMentionCount: userMention?.maxMentionCount || 10,\n            maxSuggestionCount: userMention?.maxSuggestionCount || 15,\n          },\n          isTypingIndicatorEnabledOnChannelList,\n          isMessageReceiptStatusEnabledOnChannelList,\n          replyType,\n        },\n      }}\n    >\n      <MediaQueryProvider logger={logger} mediaQueryBreakPoint={mediaQueryBreakPoint}>\n        <LocalizationProvider stringSet={localeStringSet} dateLocale={dateLocale}>\n          {children}\n        </LocalizationProvider>\n      </MediaQueryProvider>\n    </SendbirdSdkContext.Provider>\n  );\n}\n\nSendbird.propTypes = {\n  userId: PropTypes.string.isRequired,\n  appId: PropTypes.string.isRequired,\n  accessToken: PropTypes.string,\n  customApiHost: PropTypes.string,\n  customWebSocketHost: PropTypes.string,\n  // mediaQueryBreakPoint: PropTypes.string,\n  configureSession: PropTypes.func,\n  children: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.element),\n    PropTypes.any,\n  ]).isRequired,\n  theme: PropTypes.string,\n  nickname: PropTypes.string,\n  dateLocale: PropTypes.shape({}),\n  profileUrl: PropTypes.string,\n  disableUserProfile: PropTypes.bool,\n  disableMarkAsDelivered: PropTypes.bool,\n  renderUserProfile: PropTypes.func,\n  onUserProfileMessage: PropTypes.func,\n  allowProfileEdit: PropTypes.bool,\n  userListQuery: PropTypes.func,\n  config: PropTypes.shape({\n    // None Error Warning Info 'All/Debug'\n    logLevel: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.arrayOf(PropTypes.string),\n    ]),\n    pubSub: PropTypes.shape({\n      subscribe: PropTypes.func,\n      publish: PropTypes.func,\n    }),\n    userMention: PropTypes.shape({\n      maxMentionCount: PropTypes.number,\n      maxSuggestionCount: PropTypes.number,\n    }),\n    isREMUnitEnabled: PropTypes.bool,\n  }),\n  stringSet: PropTypes.objectOf(PropTypes.string),\n  colorSet: PropTypes.objectOf(PropTypes.string),\n  isReactionEnabled: PropTypes.bool,\n  isMentionEnabled: PropTypes.bool,\n  imageCompression: PropTypes.shape({\n    compressionRate: PropTypes.number,\n    resizingWidth: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string,\n    ]),\n    resizingHeight: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string,\n    ]),\n  }),\n  isTypingIndicatorEnabledOnChannelList: PropTypes.bool,\n  isMessageReceiptStatusEnabledOnChannelList: PropTypes.bool,\n  replyType: PropTypes.oneOf(['NONE', 'QUOTE_REPLY', 'THREAD']),\n};\n\nSendbird.defaultProps = {\n  accessToken: '',\n  customApiHost: null,\n  customWebSocketHost: null,\n  configureSession: null,\n  theme: 'light',\n  // mediaQueryBreakPoint: null,\n  nickname: '',\n  dateLocale: null,\n  profileUrl: '',\n  disableUserProfile: false,\n  disableMarkAsDelivered: false,\n  renderUserProfile: null,\n  onUserProfileMessage: null,\n  allowProfileEdit: false,\n  userListQuery: null,\n  config: {},\n  stringSet: null,\n  colorSet: null,\n  imageCompression: {},\n  isReactionEnabled: true,\n  isMentionEnabled: false,\n  isTypingIndicatorEnabledOnChannelList: false,\n  isMessageReceiptStatusEnabledOnChannelList: false,\n  replyType: 'NONE',\n};\n"],"names":["INIT_SDK","SET_SDK_LOADING","RESET_SDK","SDK_ERROR","APP_VERSION_STRING","disconnectSdk","sdkDispatcher","userDispatcher","sdk","onDisconnect","type","payload","disconnect","then","RESET_USER","finally","handleConnection","dispatchers","userId","appId","nickname","profileUrl","accessToken","configureSession","customApiHost","customWebSocketHost","logger","info","sessionHandler","params","modules","GroupChannelModule","OpenChannelModule","newSdk","SendbirdChat","init","setSessionHandler","addExtension","connectCbSucess","user","INIT_USER","isTextuallyNull","updateCurrentUserInfo","namedUser","UPDATE_USER_INFO","connectCbError","e","error","connect","res","catch","err","warning","isEmpty","obj","undefined","prop","hasOwnProperty","JSON","stringify","useTheme","overrides","useLayoutEffect","cssVars","variables","__assign","initialized","loading","reducer","state","action","sdkActions","_objectSpread","initialState","actions","useConnectionStatus","isOnline","setIsOnline","useState","useEffect","uniqueHandlerId","uuidv4","handler","ConnectionHandler","onDisconnected","onReconnectStarted","onReconnectSucceeded","onReconnectFailed","reconnect","addConnectionHandler","removeConnectionHandler","tryReconnect","connectionState","window","addEventListener","removeEventListener","body","document","querySelector","classList","add","remove","LOG_LEVELS","DEBUG","WARNING","ERROR","INFO","ALL","colorLog","level","printLog","title","description","console","log","Date","toISOString","getDefaultLogger","LoggerFactory","lvl","customInterface","logInterface","lvlArray","Array","isArray","applyLog","lgLvl","reduce","accumulator","currentLvl","topics","hOP","__getTopics","subscribe","topic","listener","call","index","push","publish","forEach","item","useAppendDomNode","ids","rootSelector","root","id","elem","createElement","setAttribute","appendChild","target","getElementById","removeChild","Sendbird","props","dateLocale","children","disableUserProfile","disableMarkAsDelivered","renderUserProfile","onUserProfileMessage","allowProfileEdit","theme","userListQuery","config","colorSet","stringSet","imageCompression","isReactionEnabled","isMentionEnabled","isTypingIndicatorEnabledOnChannelList","isMessageReceiptStatusEnabledOnChannelList","replyType","mediaQueryBreakPoint","logLevel","userMention","isREMUnitEnabled","setLogger","pubSub","setPubSub","sdkStore","useReducer","sdkReducers","sdkInitialState","userStore","userReducers","userInitialState","pubSubFactory","currenttheme","setCurrenttheme","useOnlineStatus","localeStringSet","React","useMemo","getStringSet","stores","compressionRate","maxMentionCount","maxSuggestionCount","propTypes","PropTypes","string","isRequired","func","oneOfType","element","arrayOf","any","shape","bool","number","objectOf","resizingWidth","resizingHeight","oneOf","defaultProps"],"mappings":";;;;;;;;;;;;;;;;;;AAAO,MAAMA,QAAQ,GAAG,UAAjB,CAAA;AACA,MAAMC,eAAe,GAAG,iBAAxB,CAAA;AACA,MAAMC,SAAS,GAAG,WAAlB,CAAA;AACA,MAAMC,SAAS,GAAG,WAAlB;;ACUP,MAAMC,kBAAkB,GAAG,OAA3B,CAAA;AAIO,MAAMC,aAAa,GAAG,IAKvB,IAAA;EAAA,IALwB;IAC5BC,aAD4B;IAE5BC,cAF4B;IAG5BC,GAH4B;AAI5BC,IAAAA,YAAAA;GACI,GAAA,IAAA,CAAA;AACJH,EAAAA,aAAa,CAAC;AAAEI,IAAAA,IAAI,EAAET,eAAR;AAAyBU,IAAAA,OAAO,EAAE,IAAA;AAAlC,GAAD,CAAb,CAAA;;AACA,EAAA,IAAIH,GAAG,IAAIA,GAAG,CAACI,UAAf,EAA2B;AACzBJ,IAAAA,GAAG,CAACI,UAAJ,EACGC,CAAAA,IADH,CACQ,MAAM;AACVP,MAAAA,aAAa,CAAC;AAAEI,QAAAA,IAAI,EAAER,SAAAA;AAAR,OAAD,CAAb,CAAA;AACAK,MAAAA,cAAc,CAAC;AAAEG,QAAAA,IAAI,EAAEI,UAAAA;AAAR,OAAD,CAAd,CAAA;KAHJ,CAAA,CAKGC,OALH,CAKW,MAAM;MACbN,YAAY,EAAA,CAAA;KANhB,CAAA,CAAA;AAQD,GATD,MASO;IACLA,YAAY,EAAA,CAAA;AACb,GAAA;AACF,CAnBM,CAAA;AAqBA,MAAMO,gBAAgB,GAAG,CAAA,KAAA,EAW7BC,WAX6B,KAWb;EAAA,IAXc;IAC/BC,MAD+B;IAE/BC,KAF+B;IAG/BC,QAH+B;IAI/BC,UAJ+B;IAK/BC,WAL+B;IAM/BC,gBAN+B;IAO/BC,aAP+B;IAQ/BC,mBAR+B;IAS/BjB,GAT+B;AAU/BkB,IAAAA,MAAAA;GACiB,GAAA,KAAA,CAAA;EACjB,MAAM;IACJpB,aADI;AAEJC,IAAAA,cAAAA;AAFI,GAAA,GAGFU,WAHJ,CAAA;AAIAZ,EAAAA,aAAa,CAAC;IACZC,aADY;IAEZC,cAFY;IAGZC,GAHY;IAIZkB,MAJY;AAKZjB,IAAAA,YAAY,EAAE,MAAM;MAClBiB,MAAM,CAACC,IAAP,CAAY,kBAAZ,CAAA,CAAA;MACA,IAAIC,cAAc,GAAG,IAArB,CAAA;AACAtB,MAAAA,aAAa,CAAC;AAAEI,QAAAA,IAAI,EAAET,eAAR;AAAyBU,QAAAA,OAAO,EAAE,IAAA;AAAlC,OAAD,CAAb,CAAA;;MACA,IAAIO,MAAM,IAAIC,KAAd,EAAqB;AACnB,QAAA,MAAMU,MAAM,GAAG;UACbV,KADa;UAEbW,OAAO,EAAE,CACP,IAAIC,kBAAJ,EADO,EAEP,IAAIC,iBAAJ,EAFO,CAAA;SAFX,CAAA;;AAOA,QAAA,IAAIR,aAAJ,EAAmB;UACjBK,MAAM,CAACL,aAAP,GAAuBA,aAAvB,CAAA;AACD,SAAA;;AACD,QAAA,IAAIC,mBAAJ,EAAyB;UACvBI,MAAM,CAACJ,mBAAP,GAA6BA,mBAA7B,CAAA;AACD,SAAA;;AACD,QAAA,MAAMQ,MAAM,GAAGC,YAAY,CAACC,IAAb,CAAkBN,MAAlB,CAAf,CAAA;;AACA,QAAA,IAAIN,gBAAgB,IAAI,OAAOA,gBAAP,KAA4B,UAApD,EAAgE;AAC9DK,UAAAA,cAAc,GAAGL,gBAAgB,CAACU,MAAD,CAAjC,CAAA;UACAA,MAAM,CAACG,iBAAP,CAAyBR,cAAzB,CAAA,CAAA;AACD,SAlBkB;AAoBnB;;;QACqC;AACnCK,UAAAA,MAAM,CAACI,YAAP,CAAoB,UAApB,EAAgCjC,kBAAhC,CAAA,CAAA;AACD,SAAA;;QACD,MAAMkC,eAAe,GAAIC,IAAD,IAAU;AAChCjC,UAAAA,aAAa,CAAC;AAAEI,YAAAA,IAAI,EAAEV,QAAR;AAAkBW,YAAAA,OAAO,EAAEsB,MAAAA;AAA3B,WAAD,CAAb,CAAA;AACA1B,UAAAA,cAAc,CAAC;AAAEG,YAAAA,IAAI,EAAE8B,SAAR;AAAmB7B,YAAAA,OAAO,EAAE4B,IAAAA;WAA7B,CAAd,CAFgC;AAIhC;;UACA,IAAI,CAACnB,QAAQ,KAAKmB,IAAI,CAACnB,QAAlB,IAA8BC,UAAU,KAAKkB,IAAI,CAAClB,UAAnD,KACC,EAAEoB,eAAe,CAACrB,QAAD,CAAf,IAA6BqB,eAAe,CAACpB,UAAD,CAA9C,CADL,EAEE;YACAY,MAAM,CAACS,qBAAP,CAA6B;AAC3BtB,cAAAA,QAAQ,EAAEA,QAAQ,IAAImB,IAAI,CAACnB,QADA;AAE3BC,cAAAA,UAAU,EAAEA,UAAU,IAAIkB,IAAI,CAAClB,UAAAA;AAFJ,aAA7B,CAGGR,CAAAA,IAHH,CAGS8B,SAAD,IAAe;AACrBpC,cAAAA,cAAc,CAAC;AAAEG,gBAAAA,IAAI,EAAEkC,gBAAR;AAA0BjC,gBAAAA,OAAO,EAAEgC,SAAAA;AAAnC,eAAD,CAAd,CAAA;aAJF,CAAA,CAAA;AAMD,WAAA;SAdH,CAAA;;QAiBA,MAAME,cAAc,GAAIC,CAAD,IAAO;AAC5BpB,UAAAA,MAAM,CAACqB,KAAP,CAAa,mBAAb,EAAmC,CAAA,EAAED,CAAE,CAAvC,CAAA,CAAA,CAAA;AACAxC,UAAAA,aAAa,CAAC;AAAEI,YAAAA,IAAI,EAAER,SAAAA;AAAR,WAAD,CAAb,CAAA;AACAI,UAAAA,aAAa,CAAC;AAAEI,YAAAA,IAAI,EAAEI,UAAAA;AAAR,WAAD,CAAb,CAAA;AACAR,UAAAA,aAAa,CAAC;AAAEI,YAAAA,IAAI,EAAEP,SAAAA;AAAR,WAAD,CAAb,CAAA;SAJF,CAAA;;AAOA,QAAA,IAAImB,WAAJ,EAAiB;UACfW,MAAM,CAACe,OAAP,CAAe9B,MAAf,EAAuBI,WAAvB,CAAA,CACGT,IADH,CACSoC,GAAD,IAASX,eAAe,CAACW,GAAD,CADhC,CAAA,CAEGC,KAFH,CAEUC,GAAD,IAASN,cAAc,CAACM,GAAD,CAFhC,CAAA,CAAA;AAGD,SAJD,MAIO;UACLlB,MAAM,CAACe,OAAP,CAAe9B,MAAf,EACGL,IADH,CACSoC,GAAD,IAASX,eAAe,CAACW,GAAD,CADhC,EAEGC,KAFH,CAEUC,GAAD,IAASN,cAAc,CAACM,GAAD,CAFhC,CAAA,CAAA;AAGD,SAAA;AACF,OAzDD,MAyDO;AACL7C,QAAAA,aAAa,CAAC;AAAEI,UAAAA,IAAI,EAAEP,SAAAA;AAAR,SAAD,CAAb,CAAA;AACAuB,QAAAA,MAAM,CAAC0B,OAAP,CAAe,mBAAf,EAAoC,yBAApC,CAAA,CAAA;AACD,OAAA;AACF,KAAA;AAtEW,GAAD,CAAb,CAAA;AAwED,CAxFM;;ACnCP,IAAMC,OAAO,GAAG,UAACC,GAAD,EAAI;AAClB,EAAA,IAAIA,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAKC,SAA5B,EAAuC;AACrC,IAAA,OAAO,IAAP,CAAA;AACD,GAAA;;AAED,EAAA,KAAK,IAAMC,IAAX,IAAmBF,GAAnB,EAAwB;AACtB,IAAA,IAAIA,GAAG,CAACG,cAAJ,CAAmBD,IAAnB,CAAJ,EAA8B;AAC5B,MAAA,OAAO,KAAP,CAAA;AACD,KAAA;AACF,GAAA;;EACD,OAAOE,IAAI,CAACC,SAAL,CAAeL,GAAf,CAAwBI,KAAAA,IAAI,CAACC,SAAL,CAAe,EAAf,CAA/B,CAAA;AACD,CAXD,CAAA;;AAaA,IAAMC,QAAQ,GAAG,UAACC,SAAD,EAAkC;AACjDC,EAAAA,eAAe,CAAC,YAAA;AACd,IAAA,IAAI,CAACT,OAAO,CAACQ,SAAD,CAAZ,EAAyB;AACvBE,MAAAA,OAAO,CAAC;QACNC,SAAS,EACJC,QAAA,CAAA;AACD,UAAA,6BAAA,EAA+B,SAD9B;AAED,UAAA,6BAAA,EAA+B,SAF9B;AAGD,UAAA,6BAAA,EAA+B,SAH9B;AAID,UAAA,6BAAA,EAA+B,SAJ9B;AAKD,UAAA,6BAAA,EAA+B,SAL9B;AAOD,UAAA,+BAAA,EAAiC,SAPhC;AAQD,UAAA,+BAAA,EAAiC,SARhC;AASD,UAAA,+BAAA,EAAiC,SAThC;AAUD,UAAA,+BAAA,EAAiC,SAVhC;AAWD,UAAA,+BAAA,EAAiC,SAXhC;AAaD,UAAA,iCAAA,EAAmC,SAblC;AAeD,UAAA,2BAAA,EAA6B,SAf5B;AAgBD,UAAA,2BAAA,EAA6B,SAhB5B;AAiBD,UAAA,2BAAA,EAA6B,SAjB5B;AAkBD,UAAA,2BAAA,EAA6B,SAlB5B;AAmBD,UAAA,2BAAA,EAA6B,SAnB5B;AAqBD,UAAA,gCAAA,EAAkC,SArBjC;AAsBD,UAAA,gCAAA,EAAkC,SAtBjC;AAuBD,UAAA,gCAAA,EAAkC,SAvBjC;AAwBD,UAAA,gCAAA,EAAkC,SAxBjC;AAyBD,UAAA,gCAAA,EAAkC,SAzBjC;AA0BD,UAAA,gCAAA,EAAkC,SA1BjC;AA2BD,UAAA,gCAAA,EAAkC,SA3BjC;AA4BD,UAAA,+BAAA,EAAiC,SA5BhC;AA8BD,UAAA,yBAAA,EAA2B,qBA9B1B;AAgCD,UAAA,4BAAA,EAA8B,qBAhC7B;AAiCD,UAAA,4BAAA,EAA8B,qBAjC7B;AAkCD,UAAA,4BAAA,EAA8B,qBAlC7B;AAmCD,UAAA,4BAAA,EAA8B,qBAnC7B;AAqCD,UAAA,2BAAA,EAA6B,2BArC5B;AAsCD,UAAA,2BAAA,EAA6B,2BAtC5B;AAuCD,UAAA,2BAAA,EAA6B,2BAvC5B;AAwCD,UAAA,2BAAA,EAA6B,2BAxC5B;AA0CD,UAAA,2BAAA,EAA6B,oGA1C5B;AA2CD,UAAA,2BAAA,EAA6B,+GA3C5B;AA4CD,UAAA,2BAAA,EAA6B,8GA5C5B;AA6CD,UAAA,2BAAA,EAA6B,8GA7C5B;AA+CD,UAAA,sCAAA,EAAwC,2IA/CvC;AAiDD,UAAA,8BAAA,EAAgC,SAjD/B;AAkDD,UAAA,8BAAA,EAAgC,SAlD/B;AAmDD,UAAA,8BAAA,EAAgC,SAnD/B;AAoDD,UAAA,8BAAA,EAAgC,SApD/B;AAqDD,UAAA,8BAAA,EAAgC,SArD/B;AAuDD,UAAA,gCAAA,EAAkC,SAvDjC;AAwDD,UAAA,gCAAA,EAAkC,SAxDjC;AAyDD,UAAA,gCAAA,EAAkC,SAzDjC;AA0DD,UAAA,gCAAA,EAAkC,SA1DjC;AA2DD,UAAA,gCAAA,EAAkC,SA3DjC;AA6DD,UAAA,kCAAA,EAAoC,SA7DnC;AA+DD,UAAA,4BAAA,EAA8B,SA/D7B;AAgED,UAAA,4BAAA,EAA8B,SAhE7B;AAiED,UAAA,4BAAA,EAA8B,SAjE7B;AAkED,UAAA,4BAAA,EAA8B,SAlE7B;AAmED,UAAA,4BAAA,EAA8B,SAnE7B;AAqED,UAAA,iCAAA,EAAmC,SArElC;AAsED,UAAA,iCAAA,EAAmC,SAtElC;AAuED,UAAA,iCAAA,EAAmC,SAvElC;AAwED,UAAA,iCAAA,EAAmC,SAxElC;AAyED,UAAA,iCAAA,EAAmC,SAzElC;AA0ED,UAAA,iCAAA,EAAmC,SA1ElC;AA2ED,UAAA,iCAAA,EAAmC,SA3ElC;AA4ED,UAAA,gCAAA,EAAkC,UA5EjC;AA8ED,UAAA,0BAAA,EAA4B,qBA9E3B;AAgFD,UAAA,6BAAA,EAA+B,qBAhF9B;AAiFD,UAAA,6BAAA,EAA+B,qBAjF9B;AAkFD,UAAA,6BAAA,EAA+B,qBAlF9B;AAmFD,UAAA,6BAAA,EAA+B,qBAnF9B;AAqFD,UAAA,4BAAA,EAA8B,2BArF7B;AAsFD,UAAA,4BAAA,EAA8B,2BAtF7B;AAuFD,UAAA,4BAAA,EAA8B,2BAvF7B;AAwFD,UAAA,4BAAA,EAA8B,2BAxF7B;AA0FD,UAAA,4BAAA,EAA8B,oGA1F7B;AA2FD,UAAA,4BAAA,EAA8B,+GA3F7B;AA4FD,UAAA,4BAAA,EAA8B,8GA5F7B;AA6FD,UAAA,4BAAA,EAA8B,8GA7F7B;UA+FD,uCAAyC,EAAA,2IAAA;AA/FxC,SAAA,EAiGAJ,SAjGA,CAAA;AAFC,OAAD,CAAP,CAAA;AAsGD,KAAA;AACF,GAzGc,EAyGZ,CAACA,SAAD,CAzGY,CAAf,CAAA;AA0GD,CA3GD;;AChBA,sBAAe;AACbK,EAAAA,WAAW,EAAE,KADA;AAEbC,EAAAA,OAAO,EAAE,KAFI;AAGb3D,EAAAA,GAAG,EAAE,EAHQ;AAIbuC,EAAAA,KAAK,EAAE,KAAA;AAJM,CAAf;;ACGe,SAASqB,SAAT,CAAiBC,KAAjB,EAAwBC,MAAxB,EAAgC;EAC7C,QAAQA,MAAM,CAAC5D,IAAf;IACE,KAAK6D,eAAL;AACE,MAAA,OAAAC,cAAA,CAAAA,cAAA,CAAA,EAAA,EACKH,KADL,CAAA,EAAA,EAAA,EAAA;AAEEH,QAAAA,WAAW,EAAE,KAFf;QAGEC,OAAO,EAAEG,MAAM,CAAC3D,OAAAA;AAHlB,OAAA,CAAA,CAAA;;IAKF,KAAK4D,SAAL;AACE,MAAA,OAAAC,cAAA,CAAAA,cAAA,CAAA,EAAA,EACKH,KADL,CAAA,EAAA,EAAA,EAAA;AAEEH,QAAAA,WAAW,EAAE,KAFf;AAGEC,QAAAA,OAAO,EAAE,KAHX;AAIEpB,QAAAA,KAAK,EAAE,IAAA;AAJT,OAAA,CAAA,CAAA;;IAMF,KAAKwB,QAAL;MACE,OAAO;QACL/D,GAAG,EAAE8D,MAAM,CAAC3D,OADP;AAELuD,QAAAA,WAAW,EAAE,IAFR;AAGLC,QAAAA,OAAO,EAAE,KAHJ;AAILpB,QAAAA,KAAK,EAAE,KAAA;OAJT,CAAA;;IAMF,KAAKwB,SAAL;AACE,MAAA,OAAOE,eAAP,CAAA;;AACF,IAAA;AACE,MAAA,OAAOJ,KAAP,CAAA;AAxBJ,GAAA;AA0BD;;AC9BD,uBAAe;AACbH,EAAAA,WAAW,EAAE,KADA;AAEbC,EAAAA,OAAO,EAAE,KAFI;AAGb5B,EAAAA,IAAI,EAAE,EAAA;AAHO,CAAf;;ACGe,SAAS6B,OAAT,CAAiBC,KAAjB,EAAwBC,MAAxB,EAAgC;EAC7C,QAAQA,MAAM,CAAC5D,IAAf;IACE,KAAKgE,SAAL;MACE,OAAO;AACLR,QAAAA,WAAW,EAAE,IADR;AAELC,QAAAA,OAAO,EAAE,KAFJ;QAGL5B,IAAI,EAAE+B,MAAM,CAAC3D,OAAAA;OAHf,CAAA;;IAKF,KAAK+D,UAAL;AACE,MAAA,OAAOD,gBAAP,CAAA;;IACF,KAAKC,gBAAL;AACE,MAAA,OAAAF,cAAA,CAAAA,cAAA,CAAA,EAAA,EACKH,KADL,CAAA,EAAA,EAAA,EAAA;QAEE9B,IAAI,EAAE+B,MAAM,CAAC3D,OAAAA;AAFf,OAAA,CAAA,CAAA;;AAIF,IAAA;AACE,MAAA,OAAO0D,KAAP,CAAA;AAfJ,GAAA;AAiBD;;AChBD,SAASM,mBAAT,CAA6BnE,GAA7B,EAAkCkB,MAAlC,EAA0C;EACxC,MAAM,CAACkD,QAAD,EAAWC,WAAX,IAA0BC,QAAQ,CAAC,IAAD,CAAxC,CAAA;AAEAC,EAAAA,SAAS,CAAC,MAAM;IACd,MAAMC,eAAe,GAAGC,MAAM,EAA9B,CAAA;;IACA,IAAI;AACFvD,MAAAA,MAAM,CAAC0B,OAAP,CAAe,aAAf,EAA8B4B,eAA9B,CAAA,CAAA;AACA,MAAA,MAAME,OAAO,GAAG,IAAIC,iBAAJ,EAAhB,CAAA;;MACAD,OAAO,CAACE,cAAR,GAAyB,MAAM;AAC7B1D,QAAAA,MAAM,CAAC0B,OAAP,CAAe,gBAAf,EAAiC;AAAEwB,UAAAA,QAAAA;SAAnC,CAAA,CAAA;OADF,CAAA;;MAGAM,OAAO,CAACG,kBAAR,GAA6B,MAAM;QACjCR,WAAW,CAAC,KAAD,CAAX,CAAA;AACAnD,QAAAA,MAAM,CAAC0B,OAAP,CAAe,oBAAf,EAAqC;AAAEwB,UAAAA,QAAAA;SAAvC,CAAA,CAAA;OAFF,CAAA;;MAIAM,OAAO,CAACI,oBAAR,GAA+B,MAAM;QACnCT,WAAW,CAAC,IAAD,CAAX,CAAA;AACAnD,QAAAA,MAAM,CAAC0B,OAAP,CAAe,sBAAf,EAAuC;AAAEwB,UAAAA,QAAAA;SAAzC,CAAA,CAAA;OAFF,CAAA;;MAIAM,OAAO,CAACK,iBAAR,GAA4B,MAAM;AAChC/E,QAAAA,GAAG,CAACgF,SAAJ,EAAA,CAAA;QACA9D,MAAM,CAAC0B,OAAP,CAAe,mBAAf,CAAA,CAAA;OAFF,CAAA;;AAIA1B,MAAAA,MAAM,CAACC,IAAP,CAAY,yBAAZ,EAAuCqD,eAAvC,EAlBE;AAoBF;;AACA,MAAA,IAAIxE,GAAJ,KAAIA,IAAAA,IAAAA,GAAJ,eAAIA,GAAG,CAAEiF,oBAAT,EAA+B;AAC7BjF,QAAAA,GAAG,CAACiF,oBAAJ,CAAyBT,eAAzB,EAA0CE,OAA1C,CAAA,CAAA;AACD,OAAA;KAvBH,CAwBE,gBAAM;AAEP,KAAA;;AACD,IAAA,OAAO,MAAM;MACX,IAAI;QACF1E,GAAG,CAACkF,uBAAJ,CAA4BV,eAA5B,CAAA,CAAA;AACAtD,QAAAA,MAAM,CAACC,IAAP,CAAY,2BAAZ,EAAyCqD,eAAzC,CAAA,CAAA;OAFF,CAGE,iBAAM;AAEP,OAAA;KANH,CAAA;AAQD,GArCQ,EAqCN,CAACxE,GAAD,CArCM,CAAT,CAAA;AAuCAuE,EAAAA,SAAS,CAAC,MAAM;IACd,MAAMY,YAAY,GAAG,MAAM;MACzB,IAAI;QACFjE,MAAM,CAAC0B,OAAP,CAAe,sBAAf,CAAA,CAAA;;AACA,QAAA,IAAI5C,GAAG,CAACoF,eAAJ,KAAwB,MAA5B,EAAoC;AAAE;AACpCpF,UAAAA,GAAG,CAACgF,SAAJ,EAAA,CAAA;AACD,SAAA;OAJH,CAKE,iBAAM;AAEP,OAAA;AACF,KATD,CADc;;;AAYdK,IAAAA,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkCH,YAAlC,CAAA,CAAA;AACA,IAAA,OAAO,MAAM;AACXE,MAAAA,MAAM,CAACE,mBAAP,CAA2B,QAA3B,EAAqCJ,YAArC,CAAA,CAAA;KADF,CAAA;AAGD,GAhBQ,EAgBN,CAACnF,GAAD,CAhBM,CAAT,CA1CwC;;AA6DxCuE,EAAAA,SAAS,CAAC,MAAM;AACd,IAAA,MAAMiB,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAb,CAAA;;IACA,IAAI,CAACtB,QAAL,EAAe;MACb,IAAI;AACFoB,QAAAA,IAAI,CAACG,SAAL,CAAeC,GAAf,CAAmB,mBAAnB,CAAA,CAAA;QACA1E,MAAM,CAACC,IAAP,CAAY,uCAAZ,CAAA,CAAA;AACD,OAHD,CAGE,OAAOmB,CAAP,EAAU;AAEX,OAAA;AACF,KAPD,MAOO;MACL,IAAI;AACFkD,QAAAA,IAAI,CAACG,SAAL,CAAeE,MAAf,CAAsB,mBAAtB,CAAA,CAAA;QACA3E,MAAM,CAACC,IAAP,CAAY,2CAAZ,CAAA,CAAA;AACD,OAHD,CAGE,OAAOmB,CAAP,EAAU;AAEX,OAAA;AACF,KAAA;AACF,GAjBQ,EAiBN,CAAC8B,QAAD,CAjBM,CAAT,CAAA;AAmBA,EAAA,OAAOA,QAAP,CAAA;AACD;;ACtFD;AACA;AACA;AACO,MAAM0B,UAAU,GAAG;AACxBC,EAAAA,KAAK,EAAE,OADiB;AAExBC,EAAAA,OAAO,EAAE,SAFe;AAGxBC,EAAAA,KAAK,EAAE,OAHiB;AAIxBC,EAAAA,IAAI,EAAE,MAJkB;AAKxBC,EAAAA,GAAG,EAAE,KAAA;AALmB,CAAnB,CAAA;;AAQP,MAAMC,QAAQ,GAAIC,KAAD,IAAW;AAC1B,EAAA,QAAQA,KAAR;IACE,KAAKP,UAAU,CAACE,OAAhB;AACE,MAAA,OAAQ,eAAR,CAAA;;IACF,KAAKF,UAAU,CAACG,KAAhB;AACE,MAAA,OAAQ,YAAR,CAAA;;AACF,IAAA;AACE,MAAA,OAAQ,aAAR,CAAA;AANJ,GAAA;AAQD,CATD,CAAA;;AAWO,MAAMK,QAAQ,GAAG,IAIlB,IAAA;EAAA,IAJmB;IACvBD,KADuB;IAEvBE,KAFuB;AAGvBC,IAAAA,WAAW,GAAG,EAAA;GACV,GAAA,IAAA,CAAA;AACJ;EACAC,OAAO,CAACC,GAAR,CACG,CAAqBL,mBAAAA,EAAAA,KAAM,MAAK,IAAIM,IAAJ,EAAWC,CAAAA,WAAX,EAAyB,CAAA,GAAA,EAAKL,KAAM,CAAGC,CAAAA,EAAAA,WAAW,IAAI,GAAI,CAD7F,CAAA,EACgGJ,QAAQ,CAACC,KAAD,CADxG,EAEEG,WAFF,CAAA,CAAA;AAID,CAVM,CAAA;AAYA,MAAMK,gBAAgB,GAAG,OAAO;EACrC1F,IAAI,EAAE,MAAM,EADyB;EAErCoB,KAAK,EAAE,MAAM,EAFwB;EAGrCK,OAAO,EAAE,MAAM,EAAE;AAHoB,CAAP,CAAzB,CAAA;AAMA,MAAMkE,aAAa,GAAG,CAACC,GAAD,EAAMC,eAAN,KAA0B;AACrD,EAAA,MAAMC,YAAY,GAAGD,eAAe,IAAIV,QAAxC,CAAA;AACA,EAAA,MAAMY,QAAQ,GAAGC,KAAK,CAACC,OAAN,CAAcL,GAAd,CAAA,GAAqBA,GAArB,GAA2B,CAACA,GAAD,CAA5C,CAAA;;EAEA,MAAMM,QAAQ,GAAIC,KAAD,IAAW,CAACf,KAAD,EAAQC,WAAR,KAAwBS,YAAY,CAAC;AAC/DZ,IAAAA,KAAK,EAAEiB,KADwD;IAE/Df,KAF+D;AAG/DC,IAAAA,WAAAA;AAH+D,GAAD,CAAhE,CAAA;;EAMA,MAAMtF,MAAM,GAAGgG,QAAQ,CAACK,MAAT,CAAgB,CAACC,WAAD,EAAcC,UAAd,KAA6B;IAC1D,IAAIA,UAAU,KAAK3B,UAAU,CAACC,KAA1B,IAAmC0B,UAAU,KAAK3B,UAAU,CAACK,GAAjE,EAAsE;AACpE,MAAA,OAAAnC,cAAA,CAAAA,cAAA,CAAA,EAAA,EACKwD,WADL,CAAA,EAAA,EAAA,EAAA;AAEErG,QAAAA,IAAI,EAAEkG,QAAQ,CAACvB,UAAU,CAACI,IAAZ,CAFhB;AAGE3D,QAAAA,KAAK,EAAE8E,QAAQ,CAACvB,UAAU,CAACG,KAAZ,CAHjB;AAIErD,QAAAA,OAAO,EAAEyE,QAAQ,CAACvB,UAAU,CAACE,OAAZ,CAAA;AAJnB,OAAA,CAAA,CAAA;AAMD,KAAA;;AAED,IAAA,IAAIyB,UAAU,KAAK3B,UAAU,CAACI,IAA9B,EAAoC;AAClC,MAAA,OAAAlC,cAAA,CAAAA,cAAA,CAAA,EAAA,EACKwD,WADL,CAAA,EAAA,EAAA,EAAA;AAEErG,QAAAA,IAAI,EAAEkG,QAAQ,CAACvB,UAAU,CAACI,IAAZ,CAAA;AAFhB,OAAA,CAAA,CAAA;AAID,KAAA;;AAED,IAAA,IAAIuB,UAAU,KAAK3B,UAAU,CAACG,KAA9B,EAAqC;AACnC,MAAA,OAAAjC,cAAA,CAAAA,cAAA,CAAA,EAAA,EACKwD,WADL,CAAA,EAAA,EAAA,EAAA;AAEEjF,QAAAA,KAAK,EAAE8E,QAAQ,CAACvB,UAAU,CAACG,KAAZ,CAAA;AAFjB,OAAA,CAAA,CAAA;AAID,KAAA;;AAED,IAAA,IAAIwB,UAAU,KAAK3B,UAAU,CAACE,OAA9B,EAAuC;AACrC,MAAA,OAAAhC,cAAA,CAAAA,cAAA,CAAA,EAAA,EACKwD,WADL,CAAA,EAAA,EAAA,EAAA;AAEE5E,QAAAA,OAAO,EAAEyE,QAAQ,CAACvB,UAAU,CAACE,OAAZ,CAAA;AAFnB,OAAA,CAAA,CAAA;AAID,KAAA;;AAED,IAAA,OAAAhC,cAAA,CAAA,EAAA,EAAYwD,WAAZ,CAAA,CAAA;GA/Ba,EAgCZX,gBAAgB,EAhCJ,CAAf,CAAA;AAiCA,EAAA,OAAO3F,MAAP,CAAA;AACD,CA5CM;;ACxCP;AACA;AACA;AACA;AACA;AACA,oBAAA,CAAe,MAAM;EACnB,MAAMwG,MAAM,GAAG,EAAf,CAAA;AACA,EAAA,MAAMC,GAAG,GAAGD,MAAM,CAACzE,cAAnB,CAAA;EAEA,OAAO;IACL2E,WAAW,EAAE,MAAMF,MADd;AAELG,IAAAA,SAAS,EAAE,CAACC,KAAD,EAAQC,QAAR,KAAqB;AAC9B;MACA,IAAI,CAACJ,GAAG,CAACK,IAAJ,CAASN,MAAT,EAAiBI,KAAjB,CAAL,EAA8B;AAAEJ,QAAAA,MAAM,CAACI,KAAD,CAAN,GAAgB,EAAhB,CAAA;AAAqB,OAFvB;;;AAK9B,MAAA,MAAMG,KAAK,GAAGP,MAAM,CAACI,KAAD,CAAN,CAAcI,IAAd,CAAmBH,QAAnB,CAA+B,GAAA,CAA7C,CAL8B;;MAQ9B,OAAO;AACLlC,QAAAA,MAAM,EAAE,MAAM;AACZ,UAAA,OAAO6B,MAAM,CAACI,KAAD,CAAN,CAAcG,KAAd,CAAP,CAAA;AACD,SAAA;OAHH,CAAA;KAVG;AAgBLE,IAAAA,OAAO,EAAE,CAACL,KAAD,EAAQ3G,IAAR,KAAiB;AACxB;MACA,IAAI,CAACwG,GAAG,CAACK,IAAJ,CAASN,MAAT,EAAiBI,KAAjB,CAAL,EAA8B;AAAE,QAAA,OAAA;AAAS,OAFjB;;;AAKxBJ,MAAAA,MAAM,CAACI,KAAD,CAAN,CAAcM,OAAd,CAAuBC,IAAD,IAAU;QAC9BA,IAAI,CAAClH,IAAI,KAAK4B,SAAT,GAAqB5B,IAArB,GAA4B,EAA7B,CAAJ,CAAA;OADF,CAAA,CAAA;AAGD,KAAA;GAxBH,CAAA;AA0BD,CA9BD;;ACHA,SAASmH,gBAAT,GAAkD;EAAA,IAAxBC,GAAwB,uEAAlB,EAAkB,CAAA;AAAA,EAAA,IAAdC,YAAc,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAA,SAAA,CAAA;AAChDjE,EAAAA,SAAS,CAAC,MAAM;AACd,IAAA,MAAMkE,IAAI,GAAGhD,QAAQ,CAACC,aAAT,CAAuB8C,YAAvB,CAAb,CAAA;AACAD,IAAAA,GAAG,CAACH,OAAJ,CAAaM,EAAD,IAAQ;AAClB,MAAA,MAAMC,IAAI,GAAGlD,QAAQ,CAACmD,aAAT,CAAuB,KAAvB,CAAb,CAAA;AACAD,MAAAA,IAAI,CAACE,YAAL,CAAkB,IAAlB,EAAwBH,EAAxB,CAAA,CAAA;MACAD,IAAI,CAACK,WAAL,CAAiBH,IAAjB,CAAA,CAAA;KAHF,CAAA,CAAA;AAKA,IAAA,OAAO,MAAM;AACXJ,MAAAA,GAAG,CAACH,OAAJ,CAAaM,EAAD,IAAQ;AAClB,QAAA,MAAMK,MAAM,GAAGtD,QAAQ,CAACuD,cAAT,CAAwBN,EAAxB,CAAf,CAAA;;AACA,QAAA,IAAIK,MAAJ,EAAY;UACVN,IAAI,CAACQ,WAAL,CAAiBF,MAAjB,CAAA,CAAA;AACD,SAAA;OAJH,CAAA,CAAA;KADF,CAAA;GAPO,EAeN,EAfM,CAAT,CAAA;AAgBD;;ACOc,SAASG,QAAT,CAAkBC,KAAlB,EAAyB;EACtC,MAAM;IACJzI,MADI;IAEJ0I,UAFI;IAGJzI,KAHI;IAIJG,WAJI;IAKJC,gBALI;AAMJ;IACAC,aAPI;IAQJC,mBARI;IASJoI,QATI;IAUJC,kBAVI;IAWJC,sBAXI;IAYJC,iBAZI;IAaJC,oBAbI;IAcJC,gBAdI;IAeJC,KAfI;IAgBJ/I,QAhBI;IAiBJC,UAjBI;IAkBJ+I,aAlBI;AAmBJC,IAAAA,MAAM,GAAG,EAnBL;IAoBJC,QApBI;IAqBJC,SArBI;IAsBJC,gBAtBI;IAuBJC,iBAvBI;IAwBJC,gBAxBI;IAyBJC,qCAzBI;IA0BJC,0CA1BI;AA2BJC,IAAAA,SAAAA;AA3BI,GAAA,GA4BFlB,KA5BJ,CAAA;EA8BA,MAAMmB,oBAAoB,GAAG,KAA7B,CAAA;EAEA,MAAM;AACJC,IAAAA,QAAQ,GAAG,EADP;AAEJC,IAAAA,WAAW,GAAG,EAFV;AAGJC,IAAAA,gBAAgB,GAAG,KAAA;AAHf,GAAA,GAIFZ,MAJJ,CAAA;EAKA,MAAM,CAAC3I,MAAD,EAASwJ,SAAT,CAAA,GAAsBpG,QAAQ,CAACwC,aAAa,CAACyD,QAAD,CAAd,CAApC,CAAA;AACA,EAAA,MAAM,CAACI,MAAD,EAASC,SAAT,CAAA,GAAsBtG,QAAQ,EAApC,CAAA;EACA,MAAM,CAACuG,QAAD,EAAW/K,aAAX,CAAA,GAA4BgL,UAAU,CAACC,SAAD,EAAcC,eAAd,CAA5C,CAAA;EACA,MAAM,CAACC,SAAD,EAAYlL,cAAZ,CAAA,GAA8B+K,UAAU,CAACI,OAAD,EAAeC,gBAAf,CAA9C,CAAA;EAEA/H,QAAQ,CAAC0G,QAAD,CAAR,CAAA;AAEAvF,EAAAA,SAAS,CAAC,MAAM;IACdqG,SAAS,CAACQ,aAAa,EAAd,CAAT,CAAA;GADO,EAEN,EAFM,CAAT,CAAA;AAIA7G,EAAAA,SAAS,CAAC,MAAM;AACdrD,IAAAA,MAAM,CAACC,IAAP,CAAY,UAAZ,EADc;;AAGdX,IAAAA,gBAAgB,CAAC;MACfE,MADe;MAEfC,KAFe;MAGfG,WAHe;MAIf+J,QAJe;MAKfjK,QALe;MAMfC,UANe;MAOfE,gBAPe;MAQfC,aARe;MASfC,mBATe;MAUfjB,GAAG,EAAE6K,QAAQ,CAAC7K,GAVC;AAWfkB,MAAAA,MAAAA;AAXe,KAAD,EAYb;MACDpB,aADC;AAEDC,MAAAA,cAAAA;AAFC,KAZa,CAAhB,CAAA;GAHO,EAmBN,CAACW,MAAD,EAASC,KAAT,EAAgBG,WAAhB,CAnBM,CAAT,CAjDsC;;AAuEtCyD,EAAAA,SAAS,CAAC,MAAM;AACdmG,IAAAA,SAAS,CAAC5D,aAAa,CAACyD,QAAD,CAAd,CAAT,CAAA;AACD,GAFQ,EAEN,CAACA,QAAD,CAFM,CAAT,CAAA;AAIAjC,EAAAA,gBAAgB,CAAC,CACf,qBADe,EAEf,0BAFe,EAGf,4BAHe,CAAD,EAIb,MAJa,CAAhB,CA3EsC;;EAkFtC,MAAM,CAAC+C,YAAD,EAAeC,eAAf,IAAkChH,QAAQ,CAACqF,KAAD,CAAhD,CAAA;AACApF,EAAAA,SAAS,CAAC,MAAM;IACd+G,eAAe,CAAC3B,KAAD,CAAf,CAAA;AACD,GAFQ,EAEN,CAACA,KAAD,CAFM,CAAT,CAAA;AAIApF,EAAAA,SAAS,CAAC,MAAM;AACd,IAAA,MAAMiB,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAb,CAAA;AACAF,IAAAA,IAAI,CAACG,SAAL,CAAeE,MAAf,CAAsB,mCAAtB,CAAA,CAAA;;AACA,IAAA,IAAI4E,gBAAJ,EAAsB;AACpBjF,MAAAA,IAAI,CAACG,SAAL,CAAeC,GAAf,CAAmB,mCAAnB,CAAA,CAAA;AACD,KAAA;AACF,GANQ,EAMN,CAAC6E,gBAAD,CANM,CAAT,CAvFsC;;AA+FtClG,EAAAA,SAAS,CAAC,MAAM;AACdrD,IAAAA,MAAM,CAACC,IAAP,CAAY,aAAZ,EAA4B,CAAA,OAAA,EAASkK,YAAa,CAAlD,CAAA,CAAA,CAAA;;IACA,IAAI;AACF,MAAA,MAAM7F,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAb,CAAA;AACAF,MAAAA,IAAI,CAACG,SAAL,CAAeE,MAAf,CAAsB,uBAAtB,CAAA,CAAA;AACAL,MAAAA,IAAI,CAACG,SAAL,CAAeE,MAAf,CAAsB,sBAAtB,CAAA,CAAA;MACAL,IAAI,CAACG,SAAL,CAAeC,GAAf,CAAoB,CAAkByF,gBAAAA,EAAAA,YAAY,IAAI,OAAQ,CAA9D,CAAA,CAAA,CAAA;AACAnK,MAAAA,MAAM,CAACC,IAAP,CAAY,oBAAZ,EALE;KAAJ,CAOE,OAAOmB,CAAP,EAAU;AACVpB,MAAAA,MAAM,CAAC0B,OAAP,CAAe,oBAAf,EAAsC,CAAA,EAAEN,CAAE,CAA1C,CAAA,CAAA,CAAA;AACD,KAAA;;AACD,IAAA,OAAO,MAAM;MACX,IAAI;AACF,QAAA,MAAMkD,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAb,CAAA;AACAF,QAAAA,IAAI,CAACG,SAAL,CAAeE,MAAf,CAAsB,uBAAtB,CAAA,CAAA;AACAL,QAAAA,IAAI,CAACG,SAAL,CAAeE,MAAf,CAAsB,sBAAtB,EAHE;OAAJ,CAKE,gBAAM,EAAG;KANb,CAAA;AAQD,GApBQ,EAoBN,CAACwF,YAAD,CApBM,CAAT,CAAA;EAsBA,MAAMjH,QAAQ,GAAGmH,mBAAe,CAACV,QAAQ,CAAC7K,GAAV,EAAekB,MAAf,CAAhC,CAAA;AAEA,EAAA,MAAMsK,eAAe,GAAGC,cAAK,CAACC,OAAN,CAAc,MAAM;IAC1C,IAAI,CAAC3B,SAAL,EAAgB;MACd,OAAO4B,YAAY,CAAC,IAAD,CAAnB,CAAA;AACD,KAAA;;AACD,IAAA,OAAA3H,cAAA,CAAAA,cAAA,CAAA,EAAA,EACK2H,YAAY,CAAC,IAAD,CADjB,GAEK5B,SAFL,CAAA,CAAA;AAID,GARuB,EAQrB,CAACA,SAAD,CARqB,CAAxB,CAAA;EAUA,oBACE0B,cAAA,CAAA,aAAA,CAAC,kBAAD,CAAoB,QAApB,EAAA;AACE,IAAA,KAAK,EAAE;AACLG,MAAAA,MAAM,EAAE;QACNf,QADM;AAENI,QAAAA,SAAAA;OAHG;AAKLxK,MAAAA,WAAW,EAAE;QACXX,aADW;QAEXC,cAFW;AAGXiF,QAAAA,SAAS,EAAE,MAAM;AACfxE,UAAAA,gBAAgB,CAAC;YACfE,MADe;YAEfC,KAFe;YAGfG,WAHe;YAIf+J,QAJe;YAKfjK,QALe;YAMfC,UANe;YAOfK,MAPe;YAQflB,GAAG,EAAE6K,QAAQ,CAAC7K,GAAAA;AARC,WAAD,EASb;YACDF,aADC;AAEDC,YAAAA,cAAAA;AAFC,WATa,CAAhB,CAAA;AAaD,SAAA;OAtBE;AAwBL8J,MAAAA,MAAM,EAAE;QACNP,kBADM;QAENC,sBAFM;QAGNC,iBAHM;QAINC,oBAJM;QAKNC,gBALM;QAMNtF,QANM;QAON1D,MAPM;QAQNC,KARM;QASNG,WATM;AAUN6I,QAAAA,KAAK,EAAE0B,YAVD;QAWNC,eAXM;QAYN1B,aAZM;QAaN1I,MAbM;QAcNyJ,MAdM;QAeNX,gBAAgB,EAAAhG,cAAA,CAAA;AACd6H,UAAAA,eAAe,EAAE,GAAA;AADH,SAAA,EAEX7B,gBAFW,CAfV;QAmBNC,iBAnBM;QAoBNC,gBAAgB,EAAEA,gBAAgB,IAAI,KApBhC;AAqBNM,QAAAA,WAAW,EAAE;AACXsB,UAAAA,eAAe,EAAE,CAAAtB,WAAW,KAAA,IAAX,IAAAA,WAAW,KAAX,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,WAAW,CAAEsB,eAAb,KAAgC,EADtC;UAEXC,kBAAkB,EAAE,CAAAvB,WAAW,KAAX,IAAA,IAAAA,WAAW,KAAA,KAAA,CAAX,GAAAA,KAAAA,CAAAA,GAAAA,WAAW,CAAEuB,kBAAb,KAAmC,EAAA;SAvBnD;QAyBN5B,qCAzBM;QA0BNC,0CA1BM;AA2BNC,QAAAA,SAAAA;AA3BM,OAAA;AAxBH,KAAA;AADT,GAAA,eAwDEoB,6BAAC,kBAAD,EAAA;AAAoB,IAAA,MAAM,EAAEvK,MAA5B;AAAoC,IAAA,oBAAoB,EAAEoJ,oBAAAA;AAA1D,GAAA,eACEmB,6BAAC,oBAAD,EAAA;AAAsB,IAAA,SAAS,EAAED,eAAjC;AAAkD,IAAA,UAAU,EAAEpC,UAAAA;GAC3DC,EAAAA,QADH,CADF,CAxDF,CADF,CAAA;AAgED,CAAA;AAEDH,QAAQ,CAAC8C,SAAT,GAAqB;AACnBtL,EAAAA,MAAM,EAAEuL,SAAS,CAACC,MAAV,CAAiBC,UADN;AAEnBxL,EAAAA,KAAK,EAAEsL,SAAS,CAACC,MAAV,CAAiBC,UAFL;EAGnBrL,WAAW,EAAEmL,SAAS,CAACC,MAHJ;EAInBlL,aAAa,EAAEiL,SAAS,CAACC,MAJN;EAKnBjL,mBAAmB,EAAEgL,SAAS,CAACC,MALZ;AAMnB;EACAnL,gBAAgB,EAAEkL,SAAS,CAACG,IAPT;EAQnB/C,QAAQ,EAAE4C,SAAS,CAACI,SAAV,CAAoB,CAC5BJ,SAAS,CAACK,OADkB,EAE5BL,SAAS,CAACM,OAAV,CAAkBN,SAAS,CAACK,OAA5B,CAF4B,EAG5BL,SAAS,CAACO,GAHkB,CAApB,CAAA,CAIPL,UAZgB;EAanBxC,KAAK,EAAEsC,SAAS,CAACC,MAbE;EAcnBtL,QAAQ,EAAEqL,SAAS,CAACC,MAdD;AAenB9C,EAAAA,UAAU,EAAE6C,SAAS,CAACQ,KAAV,CAAgB,EAAhB,CAfO;EAgBnB5L,UAAU,EAAEoL,SAAS,CAACC,MAhBH;EAiBnB5C,kBAAkB,EAAE2C,SAAS,CAACS,IAjBX;EAkBnBnD,sBAAsB,EAAE0C,SAAS,CAACS,IAlBf;EAmBnBlD,iBAAiB,EAAEyC,SAAS,CAACG,IAnBV;EAoBnB3C,oBAAoB,EAAEwC,SAAS,CAACG,IApBb;EAqBnB1C,gBAAgB,EAAEuC,SAAS,CAACS,IArBT;EAsBnB9C,aAAa,EAAEqC,SAAS,CAACG,IAtBN;AAuBnBvC,EAAAA,MAAM,EAAEoC,SAAS,CAACQ,KAAV,CAAgB;AACtB;AACAlC,IAAAA,QAAQ,EAAE0B,SAAS,CAACI,SAAV,CAAoB,CAC5BJ,SAAS,CAACC,MADkB,EAE5BD,SAAS,CAACM,OAAV,CAAkBN,SAAS,CAACC,MAA5B,CAF4B,CAApB,CAFY;AAMtBvB,IAAAA,MAAM,EAAEsB,SAAS,CAACQ,KAAV,CAAgB;MACtB5E,SAAS,EAAEoE,SAAS,CAACG,IADC;MAEtBjE,OAAO,EAAE8D,SAAS,CAACG,IAAAA;AAFG,KAAhB,CANc;AAUtB5B,IAAAA,WAAW,EAAEyB,SAAS,CAACQ,KAAV,CAAgB;MAC3BX,eAAe,EAAEG,SAAS,CAACU,MADA;MAE3BZ,kBAAkB,EAAEE,SAAS,CAACU,MAAAA;AAFH,KAAhB,CAVS;IActBlC,gBAAgB,EAAEwB,SAAS,CAACS,IAAAA;AAdN,GAAhB,CAvBW;EAuCnB3C,SAAS,EAAEkC,SAAS,CAACW,QAAV,CAAmBX,SAAS,CAACC,MAA7B,CAvCQ;EAwCnBpC,QAAQ,EAAEmC,SAAS,CAACW,QAAV,CAAmBX,SAAS,CAACC,MAA7B,CAxCS;EAyCnBjC,iBAAiB,EAAEgC,SAAS,CAACS,IAzCV;EA0CnBxC,gBAAgB,EAAE+B,SAAS,CAACS,IA1CT;AA2CnB1C,EAAAA,gBAAgB,EAAEiC,SAAS,CAACQ,KAAV,CAAgB;IAChCZ,eAAe,EAAEI,SAAS,CAACU,MADK;AAEhCE,IAAAA,aAAa,EAAEZ,SAAS,CAACI,SAAV,CAAoB,CACjCJ,SAAS,CAACU,MADuB,EAEjCV,SAAS,CAACC,MAFuB,CAApB,CAFiB;AAMhCY,IAAAA,cAAc,EAAEb,SAAS,CAACI,SAAV,CAAoB,CAClCJ,SAAS,CAACU,MADwB,EAElCV,SAAS,CAACC,MAFwB,CAApB,CAAA;AANgB,GAAhB,CA3CC;EAsDnB/B,qCAAqC,EAAE8B,SAAS,CAACS,IAtD9B;EAuDnBtC,0CAA0C,EAAE6B,SAAS,CAACS,IAvDnC;EAwDnBrC,SAAS,EAAE4B,SAAS,CAACc,KAAV,CAAgB,CAAC,MAAD,EAAS,aAAT,EAAwB,QAAxB,CAAhB,CAAA;AAxDQ,CAArB,CAAA;AA2DA7D,QAAQ,CAAC8D,YAAT,GAAwB;AACtBlM,EAAAA,WAAW,EAAE,EADS;AAEtBE,EAAAA,aAAa,EAAE,IAFO;AAGtBC,EAAAA,mBAAmB,EAAE,IAHC;AAItBF,EAAAA,gBAAgB,EAAE,IAJI;AAKtB4I,EAAAA,KAAK,EAAE,OALe;AAMtB;AACA/I,EAAAA,QAAQ,EAAE,EAPY;AAQtBwI,EAAAA,UAAU,EAAE,IARU;AAStBvI,EAAAA,UAAU,EAAE,EATU;AAUtByI,EAAAA,kBAAkB,EAAE,KAVE;AAWtBC,EAAAA,sBAAsB,EAAE,KAXF;AAYtBC,EAAAA,iBAAiB,EAAE,IAZG;AAatBC,EAAAA,oBAAoB,EAAE,IAbA;AActBC,EAAAA,gBAAgB,EAAE,KAdI;AAetBE,EAAAA,aAAa,EAAE,IAfO;AAgBtBC,EAAAA,MAAM,EAAE,EAhBc;AAiBtBE,EAAAA,SAAS,EAAE,IAjBW;AAkBtBD,EAAAA,QAAQ,EAAE,IAlBY;AAmBtBE,EAAAA,gBAAgB,EAAE,EAnBI;AAoBtBC,EAAAA,iBAAiB,EAAE,IApBG;AAqBtBC,EAAAA,gBAAgB,EAAE,KArBI;AAsBtBC,EAAAA,qCAAqC,EAAE,KAtBjB;AAuBtBC,EAAAA,0CAA0C,EAAE,KAvBtB;AAwBtBC,EAAAA,SAAS,EAAE,MAAA;AAxBW,CAAxB;;;;"}