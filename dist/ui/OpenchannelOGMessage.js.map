{"version":3,"file":"OpenchannelOGMessage.js","sources":["../../src/ui/OpenchannelOGMessage/utils.ts","../../src/ui/OpenchannelOGMessage/index.tsx"],"sourcesContent":["import type { UserMessage } from \"@sendbird/chat/message\";\n\nexport const URL_REG = /[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/;\nexport const createUrlTester = (regexp: RegExp) => (text: string): boolean => regexp.test(text);\nexport const checkOGIsEnalbed = (message: UserMessage): boolean => {\n  const { ogMetaData } = message;\n  if (!ogMetaData) {\n    return false;\n  }\n  const { url } = ogMetaData;\n  if (!url) {\n    return false;\n  }\n  return true;\n};\n","import React, { useState, useContext, useMemo, useRef, useEffect } from 'react';\nimport { UserMessage } from '@sendbird/chat/message';\nimport format from 'date-fns/format';\nimport './index.scss';\n\nimport Avatar from '../Avatar';\nimport ContextMenu, { MenuItems, MenuItem } from '../ContextMenu';\nimport Icon, { IconTypes, IconColors } from '../Icon';\nimport IconButton from '../IconButton';\nimport ImageRenderer from '../ImageRenderer';\nimport LinkLabel from '../LinkLabel';\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport Loader from '../Loader';\nimport UserProfile from '../UserProfile';\nimport Word from '../Word';\nimport { UserProfileContext } from '../../lib/UserProfileContext';\n\nimport uuidv4 from '../../utils/uuid';\nimport { copyToClipboard } from '../OpenchannelUserMessage/utils';\nimport { useLocalization } from '../../lib/LocalizationContext';\nimport { checkOGIsEnalbed } from './utils';\nimport {\n  checkIsPending,\n  checkIsFailed,\n  isFineCopy,\n  isFineEdit,\n  isFineResend,\n  isFineDelete,\n  showMenuTrigger,\n} from '../../utils/openChannelUtils';\nimport { getSenderFromMessage } from '../../utils/openChannelUtils';\nimport useSendbirdStateContext from '../../hooks/useSendbirdStateContext';\nimport { useMediaQueryContext } from '../../lib/MediaQueryContext';\nimport useLongPress from '../../hooks/useLongPress';\nimport OpenChannelMobileMenu from '../OpenChannelMobileMenu';\n\ninterface Props {\n  message: UserMessage;\n  isOperator?: boolean;\n  className?: string | Array<string>;\n  disabled?: boolean;\n  showEdit(bool: boolean): void;\n  showRemove(bool: boolean): void;\n  resendMessage(message: UserMessage): void;\n  chainTop?: boolean;\n  chainBottom?: boolean;\n  userId: string;\n}\n\nexport default function OpenchannelOGMessage({\n  message,\n  isOperator,\n  className,\n  disabled,\n  showEdit,\n  showRemove,\n  resendMessage,\n  chainTop,\n  userId,\n}: Props): JSX.Element {\n  if (!message || message.messageType !== 'user') {\n    return null;\n  }\n\n  const openLink = () => {\n    if (checkOGIsEnalbed(message)) {\n      const { url } = ogMetaData;\n      window.open(url);\n    }\n  };\n\n  const status = message?.sendingStatus;\n  const { ogMetaData } = message;\n  const { defaultImage } = ogMetaData;\n  const sdk = useSendbirdStateContext?.()?.stores?.sdkStore?.sdk;\n  const { stringSet, dateLocale } = useLocalization();\n  const { disableUserProfile, renderUserProfile } = useContext<UserProfileContext>(UserProfileContext);\n  const [contextStyle, setContextStyle] = useState({});\n  const [contextMenu, setContextMenu] = useState(false);\n  const onLongPress = useLongPress({\n    onLongPress: () => setContextMenu(true),\n    onClick: openLink,\n  }, { delay: 300 });\n  const messageComponentRef = useRef(null);\n  const contextMenuRef = useRef(null);\n  const mobileMenuRef = useRef(null);\n  const avatarRef = useRef(null);\n\n  const isPending = checkIsPending(status);\n  const isFailed = checkIsFailed(status);\n  const sender = getSenderFromMessage(message);\n  const { isMobile } = useMediaQueryContext();\n\n  const MemoizedMessageText = useMemo(() => () => {\n    const wordClassName = 'sendbird-openchannel-og-message--word';\n    const splitMessage = message.message.split(' ');\n    const matchedMessage = splitMessage\n      .map((word) => (\n        <Word\n          key={uuidv4()}\n          word={word}\n          message={message}\n          isByMe={message?.sender?.userId === sdk?.currentUser?.userId}\n        />\n      ));\n\n    if (message.updatedAt > 0) {\n      matchedMessage.push(\n        <Label\n          key={uuidv4()}\n          className={wordClassName}\n          type={LabelTypography.BODY_1}\n          color={LabelColors.ONBACKGROUND_2}\n        >\n          {stringSet.MESSAGE_EDITED}\n        </Label>,\n      );\n    }\n\n    return matchedMessage;\n  }, [message, message.updatedAt]);\n\n  // place conxt menu top depending clientHeight of message component\n  useEffect(() => {\n    if (messageComponentRef?.current?.clientHeight > 36) {\n      setContextStyle({ top: '8px ' });\n    } else {\n      setContextStyle({ top: '2px' });\n    }\n  }, [window.innerWidth]);\n\n  return (\n    <div\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        'sendbird-openchannel-og-message',\n      ].join(' ')}\n      ref={messageComponentRef}\n    >\n      <div\n        className=\"sendbird-openchannel-og-message__top\"\n      >\n        <div className=\"sendbird-openchannel-og-message__top__left\">\n          {\n            !chainTop && (\n              <ContextMenu\n                menuTrigger={(toggleDropdown) => (\n                  <Avatar\n                    className=\"sendbird-openchannel-og-message__top__left__avatar\"\n                    src={sender.profileUrl || ''}\n                    ref={avatarRef}\n                    width=\"28px\"\n                    height=\"28px\"\n                    onClick={() => {\n                      if (!disableUserProfile) {\n                        toggleDropdown();\n                      }\n                    }}\n                  />\n                )}\n                menuItems={(closeDropdown) => (\n                  <MenuItems\n                    parentRef={avatarRef}\n                    parentContainRef={avatarRef}\n                    closeDropdown={closeDropdown}\n                    style={{ paddingTop: '0px', paddingBottom: '0px' }}\n                  >\n                    {\n                      renderUserProfile\n                        ? (\n                          renderUserProfile({\n                            user: sender,\n                            close: closeDropdown,\n                          })\n                        )\n                        : (\n                          <UserProfile\n                            user={sender}\n                            onSuccess={closeDropdown}\n                            disableMessaging\n                          />\n                        )\n                    }\n                  </MenuItems>\n                )}\n              />\n            )\n          }\n        </div>\n        <div className=\"sendbird-openchannel-og-message__top__right\">\n          {\n            !chainTop && (\n              <div className=\"sendbird-openchannel-og-message__top__right__title\">\n                <Label\n                  className=\"sendbird-openchannel-og-message__top__right__title__sender-name\"\n                  type={LabelTypography.CAPTION_2}\n                  color={isOperator ? LabelColors.SECONDARY_3 : LabelColors.ONBACKGROUND_2}\n                >\n                  {\n                    sender && (\n                      sender.friendName\n                      || sender.nickname\n                      || sender.userId\n                    )\n                  }\n                </Label>\n                <Label\n                  className=\"sendbird-openchannel-og-message__top__right__title__sent-at\"\n                  type={LabelTypography.CAPTION_3}\n                  color={LabelColors.ONBACKGROUND_3}\n                >\n                  {\n                    message?.createdAt && (\n                      format(message?.createdAt, 'p', {\n                        locale: dateLocale,\n                      })\n                    )\n                  }\n                </Label>\n              </div>\n            )\n          }\n          <div className=\"sendbird-openchannel-og-message__top__right__description\">\n            <Label\n              className=\"sendbird-openchannel-og-message__top__right__description__message\"\n              type={LabelTypography.BODY_1}\n              color={LabelColors.ONBACKGROUND_1}\n            >\n              {MemoizedMessageText()}\n            </Label>\n          </div>\n        </div>\n        {\n          !isMobile && (\n            <div\n              className=\"sendbird-openchannel-og-message__top__context-menu\"\n              ref={contextMenuRef}\n              style={contextStyle}\n            >\n              <ContextMenu\n                menuTrigger={(toggleDropdown) => (\n                  showMenuTrigger({ message: message, userId: userId, status: status }) && (\n                    <IconButton\n                      className=\"sendbird-openchannel-og-message__top__context-menu--icon\"\n                      width=\"32px\"\n                      height=\"32px\"\n                      onClick={() => {\n                        toggleDropdown();\n                      }}\n                    >\n                      <Icon\n                        type={IconTypes.MORE}\n                        fillColor={IconColors.CONTENT_INVERSE}\n                        width=\"24px\"\n                        height=\"24px\"\n                      />\n                    </IconButton>\n                  )\n                )}\n                menuItems={(closeDropdown) => (\n                  <MenuItems\n                    parentRef={contextMenuRef}\n                    parentContainRef={contextMenuRef}\n                    closeDropdown={closeDropdown}\n                    openLeft\n                  >\n                    {\n                      isFineCopy({ message, userId, status }) && (\n                        <MenuItem\n                          className=\"sendbird-openchannel-og-message__top__context-menu__copy\"\n                          onClick={() => {\n                            copyToClipboard(message.message);\n                            closeDropdown();\n                          }}\n                        >\n                          {stringSet.CONTEXT_MENU_DROPDOWN__COPY}\n                        </MenuItem>\n                      )\n                    }\n                    {\n                      isFineEdit({ message, userId, status }) && (\n                        <MenuItem\n                          className=\"sendbird-openchannel-og-message__top__context-menu__edit\"\n                          onClick={() => {\n                            if (disabled) {\n                              return;\n                            }\n                            showEdit(true);\n                            closeDropdown();\n                          }}\n                        >\n                          {stringSet.CONTEXT_MENU_DROPDOWN__EDIT}\n                        </MenuItem>\n                      )\n                    }\n                    {\n                      isFineResend({ message, userId, status }) && (\n                        <MenuItem\n                          className=\"sendbird-openchannel-og-message__top__context-menu__resend\"\n                          onClick={() => {\n                            resendMessage(message);\n                            closeDropdown();\n                          }}\n                        >\n                          {stringSet.CONTEXT_MENU_DROPDOWN__RESEND}\n                        </MenuItem>\n                      )\n                    }\n                    {\n                      isFineDelete({ message, userId, status }) && (\n                        <MenuItem\n                          className=\"sendbird-openchannel-og-message__top__context-menu__delete\"\n                          onClick={() => {\n                            if (disabled) {\n                              return;\n                            }\n                            showRemove(true);\n                            closeDropdown();\n                          }}\n                        >\n                          {stringSet.CONTEXT_MENU_DROPDOWN__DELETE}\n                        </MenuItem>\n                      )\n                    }\n                  </MenuItems>\n                )}\n              />\n            </div>\n          )\n        }\n      </div>\n      <div className=\"sendbird-openchannel-og-message__bottom\">\n        <div className=\"sendbird-openchannel-og-message__bottom__og-tag\" ref={mobileMenuRef}>\n          {\n            ogMetaData.url && (\n              <Label\n                className=\"sendbird-openchannel-og-message__bottom__og-tag__url\"\n                type={LabelTypography.CAPTION_3}\n                color={LabelColors.ONBACKGROUND_2}\n              >\n                {ogMetaData.url}\n              </Label>\n            )\n          }\n          {\n            ogMetaData.title && (\n              <LinkLabel\n                className=\"sendbird-openchannel-og-message__bottom__og-tag__title\"\n                src={ogMetaData.url}\n                type={LabelTypography.SUBTITLE_2}\n                color={LabelColors.PRIMARY}\n              >\n                {\n                  ogMetaData.title\n                }\n              </LinkLabel>\n            )\n          }\n          {\n            ogMetaData.description && (\n              <Label\n                className=\"sendbird-openchannel-og-message__bottom__og-tag__description\"\n                type={LabelTypography.BODY_2}\n                color={LabelColors.ONBACKGROUND_1}\n              >\n                {ogMetaData.description}\n              </Label>\n            )\n          }\n          {\n            ogMetaData.url && (\n              <div\n                className=\"sendbird-openchannel-og-message__bottom__og-tag__thumbnail\"\n                role=\"button\"\n                onClick={openLink}\n                onKeyDown={openLink}\n                tabIndex={0}\n                {...(isMobile ? { ...onLongPress } : {})}\n              >\n                {\n                  defaultImage && (\n                    <ImageRenderer\n                      className=\"sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image\"\n                      url={defaultImage.url || ''}\n                      alt={defaultImage.alt || ''}\n                      height=\"189px\"\n                      defaultComponent={(\n                        <div className=\"sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image--placeholder\">\n                          <Icon\n                            type={IconTypes.THUMBNAIL_NONE}\n                            width=\"56px\"\n                            height=\"56px\"\n                          />\n                        </div>\n                      )}\n                    />\n                  )\n                }\n              </div>\n            )\n          }\n        </div>\n        {\n          (isPending || isFailed) && (\n            <div className=\"sendbird-openchannel-og-message__top__right__tail\">\n              {\n                isPending && (\n                  <Loader\n                    width=\"16px\"\n                    height=\"16px\"\n                  >\n                    <Icon\n                      className=\"sendbird-openchannel-og-message__top__right__tail__pending\"\n                      type={IconTypes.SPINNER}\n                      fillColor={IconColors.PRIMARY}\n                      width=\"16px\"\n                      height=\"16px\"\n                    />\n                  </Loader>\n                )\n              }\n              {\n                isFailed && (\n                  <Icon\n                    className=\"sendbird-openchannel-og-message__top__right__tail__failed\"\n                    type={IconTypes.ERROR}\n                    fillColor={IconColors.ERROR}\n                    width=\"16px\"\n                    height=\"16px\"\n                  />\n                )\n              }\n            </div>\n          )\n        }\n      </div>\n      {\n        contextMenu && (\n          <OpenChannelMobileMenu\n            message={message}\n            parentRef={mobileMenuRef}\n            hideMenu={() => {\n              setContextMenu(false);\n            }}\n            showRemove={() => {\n              setContextMenu(false);\n              showRemove(true);\n            }}\n            showEdit={() => {\n              setContextMenu(false);\n              showEdit(true);\n            }}\n            copyToClipboard={() => {\n              setContextMenu(false);\n              copyToClipboard(message?.message);\n            }}\n            resendMessage={() => {\n              setContextMenu(false);\n              resendMessage(message);\n            }}\n          />\n        )\n      }\n    </div>\n  );\n}\n"],"names":["checkOGIsEnalbed","message","ogMetaData","url","OpenchannelOGMessage","_a","isOperator","className","disabled","showEdit","showRemove","resendMessage","chainTop","userId","messageType","openLink","window","open","status","sendingStatus","defaultImage","sdk","_d","_c","_b","useSendbirdStateContext","stores","sdkStore","_e","useLocalization","stringSet","dateLocale","_f","useContext","UserProfileContext","disableUserProfile","renderUserProfile","_g","useState","contextStyle","setContextStyle","_h","contextMenu","setContextMenu","onLongPress","useLongPress","onClick","delay","messageComponentRef","useRef","contextMenuRef","mobileMenuRef","avatarRef","isPending","checkIsPending","isFailed","checkIsFailed","sender","getSenderFromMessage","isMobile","useMediaQueryContext","MemoizedMessageText","useMemo","wordClassName","splitMessage","split","matchedMessage","map","word","React","uuidv4","currentUser","updatedAt","push","LabelTypography","BODY_1","LabelColors","ONBACKGROUND_2","MESSAGE_EDITED","useEffect","current","clientHeight","top","innerWidth","__spreadArray","Array","isArray","join","toggleDropdown","profileUrl","closeDropdown","paddingTop","paddingBottom","user","close","CAPTION_2","SECONDARY_3","friendName","nickname","CAPTION_3","ONBACKGROUND_3","createdAt","format","locale","ONBACKGROUND_1","showMenuTrigger","IconTypes","MORE","IconColors","CONTENT_INVERSE","isFineCopy","copyToClipboard","CONTEXT_MENU_DROPDOWN__COPY","isFineEdit","CONTEXT_MENU_DROPDOWN__EDIT","isFineResend","CONTEXT_MENU_DROPDOWN__RESEND","isFineDelete","CONTEXT_MENU_DROPDOWN__DELETE","title","SUBTITLE_2","PRIMARY","description","BODY_2","alt","THUMBNAIL_NONE","SPINNER","ERROR"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIO,IAAMA,gBAAgB,GAAG,UAACC,OAAD,EAAqB;AAC3C,EAAA,IAAAC,UAAU,GAAKD,OAAO,CAAAC,UAAtB,CAAA;;EACR,IAAI,CAACA,UAAL,EAAiB;AACf,IAAA,OAAO,KAAP,CAAA;AACD,GAAA;;AACO,EAAA,IAAAC,GAAG,GAAKD,UAAU,CAAAC,GAAlB,CAAA;;EACR,IAAI,CAACA,GAAL,EAAU;AACR,IAAA,OAAO,KAAP,CAAA;AACD,GAAA;;AACD,EAAA,OAAO,IAAP,CAAA;AACD,CAVM;;AC6CiB,SAAAC,oBAAA,CAAqBC,EAArB,EAUhB;;;MATNJ,OAAO,GAAAI,EAAA,CAAAJ;MACPK,UAAU,GAAAD,EAAA,CAAAC;MACVC,SAAS,GAAAF,EAAA,CAAAE;MACTC,QAAQ,GAAAH,EAAA,CAAAG;MACRC,QAAQ;MACRC,UAAU,GAAAL,EAAA,CAAAK;MACVC,aAAa,GAAAN,EAAA,CAAAM;MACbC,QAAQ,GAAAP,EAAA,CAAAO;MACRC,MAAM,GAAAR,EAAA,CAAAQ;;EAEN,IAAI,CAACZ,OAAD,IAAYA,OAAO,CAACa,WAAR,KAAwB,MAAxC,EAAgD;AAC9C,IAAA,OAAO,IAAP,CAAA;AACD,GAAA;;EAED,IAAMC,QAAQ,GAAG,YAAA;AACf,IAAA,IAAIf,gBAAgB,CAACC,OAAD,CAApB,EAA+B;AACrB,MAAA,IAAAE,GAAG,GAAKD,UAAU,CAAAC,GAAlB,CAAA;MACRa,MAAM,CAACC,IAAP,CAAYd,GAAZ,CAAA,CAAA;AACD,KAAA;GAJH,CAAA;;AAOA,EAAA,IAAMe,MAAM,GAAGjB,OAAO,KAAA,IAAP,IAAAA,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,OAAO,CAAEkB,aAAxB,CAAA;AACQ,EAAA,IAAAjB,UAAU,GAAKD,OAAO,CAAAC,UAAtB,CAAA;AACA,EAAA,IAAAkB,YAAY,GAAKlB,UAAU,CAAAkB,YAA3B,CAAA;AACR,EAAA,IAAMC,GAAG,GAAG,CAAAC,EAAA,GAAA,CAAAC,EAAA,GAAA,CAAAC,EAAA,GAAAC,uBAAuB,KAAvB,IAAA,IAAAA,uBAAuB,KAAvB,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,uBAAuB,EAAvB,MAA6B,IAA7B,IAA6BD,EAAA,KAAA,KAAA,CAA7B,GAA6B,KAAA,CAA7B,GAA6BA,EAAA,CAAAE,MAA7B,UAAA,iBAAA,SAAA,MAAqCC,QAArC,MAA6C,IAA7C,IAA6CL,EAAA,KAAA,KAAA,CAA7C,GAA6C,KAAA,CAA7C,GAA6CA,EAAA,CAAED,GAA3D,CAAA;;EACM,IAAAO,EAAA,GAA4BC,eAAe,EAA3C;AAAA,MAAEC,SAAS,GAAAF,EAAA,CAAAE,SAAX;AAAA,MAAaC,UAAU,GAAAH,EAAA,CAAAG,UAAvB,CAAA;;AACA,EAAA,IAAAC,EAAA,GAA4CC,UAAU,CAAqBC,kBAArB,CAAtD;AAAA,MAAEC,kBAAkB,GAAAH,EAAA,CAAAG,kBAApB;AAAA,MAAsBC,iBAAiB,GAAAJ,EAAA,CAAAI,iBAAvC,CAAA;;AACA,EAAA,IAAAC,EAAA,GAAkCC,QAAQ,CAAC,EAAD,CAA1C;AAAA,MAACC,YAAY,GAAAF,EAAA,CAAA,CAAA,CAAb;AAAA,MAAeG,eAAe,GAAAH,EAAA,CAAA,CAAA,CAA9B,CAAA;;AACA,EAAA,IAAAI,EAAA,GAAgCH,QAAQ,CAAC,KAAD,CAAxC;AAAA,MAACI,WAAW,GAAAD,EAAA,CAAA,CAAA,CAAZ;AAAA,MAAcE,cAAc,GAAAF,EAAA,CAAA,CAAA,CAA5B,CAAA;;EACN,IAAMG,WAAW,GAAGC,YAAY,CAAC;AAC/BD,IAAAA,WAAW,EAAE;MAAM,OAAAD,cAAc,CAAC,IAAD,CAAd,CAAA;KADY;AAE/BG,IAAAA,OAAO,EAAE/B,QAAAA;AAFsB,GAAD,EAG7B;AAAEgC,IAAAA,KAAK,EAAE,GAAA;AAAT,GAH6B,CAAhC,CAAA;AAIA,EAAA,IAAMC,mBAAmB,GAAGC,MAAM,CAAC,IAAD,CAAlC,CAAA;AACA,EAAA,IAAMC,cAAc,GAAGD,MAAM,CAAC,IAAD,CAA7B,CAAA;AACA,EAAA,IAAME,aAAa,GAAGF,MAAM,CAAC,IAAD,CAA5B,CAAA;AACA,EAAA,IAAMG,SAAS,GAAGH,MAAM,CAAC,IAAD,CAAxB,CAAA;AAEA,EAAA,IAAMI,SAAS,GAAGC,cAAc,CAACpC,MAAD,CAAhC,CAAA;AACA,EAAA,IAAMqC,QAAQ,GAAGC,aAAa,CAACtC,MAAD,CAA9B,CAAA;AACA,EAAA,IAAMuC,MAAM,GAAGC,oBAAoB,CAACzD,OAAD,CAAnC,CAAA;AACQ,EAAA,IAAA0D,QAAQ,GAAKC,oBAAoB,EAAA,SAAjC,CAAA;AAER,EAAA,IAAMC,mBAAmB,GAAGC,OAAO,CAAC;AAAM,IAAA,OAAA,YAAA;MACxC,IAAMC,aAAa,GAAG,uCAAtB,CAAA;MACA,IAAMC,YAAY,GAAG/D,OAAO,CAACA,OAAR,CAAgBgE,KAAhB,CAAsB,GAAtB,CAArB,CAAA;MACA,IAAMC,cAAc,GAAGF,YAAY,CAChCG,GADoB,CAChB,UAACC,IAAD,EAAK;;;AAAK,QAAA,oBACbC,6BAAC,IAAD,EAAA;UACE,GAAG,EAAEC,MAAM,EADb;AAEE,UAAA,IAAI,EAAEF,IAFR;AAGE,UAAA,OAAO,EAAEnE,OAHX;AAIE,UAAA,MAAM,EAAE,CAAA,CAAAI,EAAA,GAAAJ,OAAO,KAAP,IAAA,IAAAA,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,OAAO,CAAEwD,MAAT,MAAe,IAAf,IAAepD,EAAA,KAAA,KAAA,CAAf,GAAe,KAAA,CAAf,GAAeA,EAAA,CAAEQ,MAAjB,OAA4B,CAAAW,EAAA,GAAAH,GAAG,SAAH,IAAAA,GAAG,KAAA,KAAA,CAAH,GAAG,KAAA,CAAH,GAAAA,GAAG,CAAEkD,WAAL,MAAgB,IAAhB,IAAgB/C,EAAA,KAAA,KAAA,CAAhB,GAAgB,KAAA,CAAhB,GAAgBA,EAAA,CAAEX,MAA9C,CAAA;SALG,CAAA,CAAA;AAOd,OARoB,CAAvB,CAAA;;AAUA,MAAA,IAAIZ,OAAO,CAACuE,SAAR,GAAoB,CAAxB,EAA2B;AACzBN,QAAAA,cAAc,CAACO,IAAf,eACEJ,cAAA,CAAA,aAAA,CAAC,KAAD,EAAA;UACE,GAAG,EAAEC,MAAM,EADb;AAEE,UAAA,SAAS,EAAEP,aAFb;UAGE,IAAI,EAAEW,eAAe,CAACC,MAHxB;UAIE,KAAK,EAAEC,WAAW,CAACC,cAAAA;SAElB/C,EAAAA,SAAS,CAACgD,cANb,CADF,CAAA,CAAA;AAUD,OAAA;;AAED,MAAA,OAAOZ,cAAP,CAAA;KA1BwC,CAAA;GAAP,EA2BhC,CAACjE,OAAD,EAAUA,OAAO,CAACuE,SAAlB,CA3BgC,CAAnC,CAlCM;;AAgENO,EAAAA,SAAS,CAAC,YAAA;;;AACR,IAAA,IAAI,CAAA,CAAA1E,EAAA,GAAA2C,mBAAmB,KAAA,IAAnB,IAAAA,mBAAmB,KAAA,KAAA,CAAnB,GAAmB,KAAA,CAAnB,GAAAA,mBAAmB,CAAEgC,OAArB,MAA4B,IAA5B,IAA4B3E,EAAA,KAAA,KAAA,CAA5B,GAA4B,KAAA,CAA5B,GAA4BA,EAAA,CAAE4E,YAA9B,IAA6C,EAAjD,EAAqD;AACnDzC,MAAAA,eAAe,CAAC;AAAE0C,QAAAA,GAAG,EAAE,MAAA;AAAP,OAAD,CAAf,CAAA;AACD,KAFD,MAEO;AACL1C,MAAAA,eAAe,CAAC;AAAE0C,QAAAA,GAAG,EAAE,KAAA;AAAP,OAAD,CAAf,CAAA;AACD,KAAA;AACF,GANQ,EAMN,CAAClE,MAAM,CAACmE,UAAR,CANM,CAAT,CAAA;EAQA,oBACEd,cAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAEe,aAAA,CAAAA,aAAA,CAAA,EAAA,EACLC,KAAK,CAACC,OAAN,CAAc/E,SAAd,CAAA,GAA2BA,SAA3B,GAAuC,CAACA,SAAD,CADlC,EAC8C,IAD9C,CAAA,EAC8C,CACvD,iCADuD,CAD9C,OAAA,CAAA,CAGTgF,IAHS,CAGJ,GAHI,CADb;AAKE,IAAA,GAAG,EAAEvC,mBAAAA;GAEL,eAAAqB,cAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAC,sCAAA;GAEV,eAAAA,cAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC,4CAAA;AAAf,GAAA,EAEI,CAACzD,QAAD,iBACEyD,cAAA,CAAA,aAAA,CAAC,WAAD,EAAA;IACE,WAAW,EAAE,UAACmB,cAAD,EAAoB;AAAA,MAAA,oBAC/BnB,6BAAC,MAAD,EAAA;AACE,QAAA,SAAS,EAAC,oDADZ;AAEE,QAAA,GAAG,EAAEZ,MAAM,CAACgC,UAAP,IAAqB,EAF5B;AAGE,QAAA,GAAG,EAAErC,SAHP;AAIE,QAAA,KAAK,EAAC,MAJR;AAKE,QAAA,MAAM,EAAC,MALT;AAME,QAAA,OAAO,EAAE,YAAA;UACP,IAAI,CAACjB,kBAAL,EAAyB;YACvBqD,cAAc,EAAA,CAAA;AACf,WAAA;AACF,SAAA;OAX4B,CAAA,CAAA;KADnC;IAeE,SAAS,EAAE,UAACE,aAAD,EAAmB;AAAA,MAAA,oBAC5BrB,6BAAC,SAAD,EAAA;AACE,QAAA,SAAS,EAAEjB,SADb;AAEE,QAAA,gBAAgB,EAAEA,SAFpB;AAGE,QAAA,aAAa,EAAEsC,aAHjB;AAIE,QAAA,KAAK,EAAE;AAAEC,UAAAA,UAAU,EAAE,KAAd;AAAqBC,UAAAA,aAAa,EAAE,KAAA;AAApC,SAAA;OAGLxD,EAAAA,iBAAiB,GAEbA,iBAAiB,CAAC;AAChByD,QAAAA,IAAI,EAAEpC,MADU;AAEhBqC,QAAAA,KAAK,EAAEJ,aAAAA;OAFQ,CAFJ,gBAQbrB,cAAA,CAAA,aAAA,CAAC,WAAD,EAAA;AACE,QAAA,IAAI,EAAEZ,MADR;AAEE,QAAA,SAAS,EAAEiC,aAFb;QAGE,gBAAgB,EAAA,IAAA;AAHlB,OAAA,CAfR,CAD4B,CAAA;AAwB7B,KAAA;AAvCH,GAAA,CAHN,CAHF,eAkDErB,cAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC,6CAAA;GAEX,EAAA,CAACzD,QAAD,iBACEyD,cAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC,oDAAA;AAAf,GAAA,eACEA,6BAAC,KAAD,EAAA;AACE,IAAA,SAAS,EAAC,iEADZ;IAEE,IAAI,EAAEK,eAAe,CAACqB,SAFxB;IAGE,KAAK,EAAEzF,UAAU,GAAGsE,WAAW,CAACoB,WAAf,GAA6BpB,WAAW,CAACC,cAAAA;AAH5D,GAAA,EAMIpB,MAAM,KACJA,MAAM,CAACwC,UAAP,IACGxC,MAAM,CAACyC,QADV,IAEGzC,MAAM,CAAC5C,MAHN,CANV,CADF,eAcEwD,6BAAC,KAAD,EAAA;AACE,IAAA,SAAS,EAAC,6DADZ;IAEE,IAAI,EAAEK,eAAe,CAACyB,SAFxB;IAGE,KAAK,EAAEvB,WAAW,CAACwB,cAAAA;AAHrB,GAAA,EAMI,CAAAnG,OAAO,KAAP,IAAA,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEoG,SAAT,KACEC,MAAM,CAACrG,OAAO,SAAP,IAAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAAA,OAAO,CAAEoG,SAAV,EAAqB,GAArB,EAA0B;AAC9BE,IAAAA,MAAM,EAAExE,UAAAA;GADJ,CAPZ,CAdF,CAHN,eAiCEsC,cAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC,0DAAA;AAAf,GAAA,eACEA,6BAAC,KAAD,EAAA;AACE,IAAA,SAAS,EAAC,mEADZ;IAEE,IAAI,EAAEK,eAAe,CAACC,MAFxB;IAGE,KAAK,EAAEC,WAAW,CAAC4B,cAAAA;GAElB3C,EAAAA,mBAAmB,EALtB,CADF,CAjCF,CAlDF,EA8FI,CAACF,QAAD,iBACEU,cAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAC,oDADZ;AAEE,IAAA,GAAG,EAAEnB,cAFP;AAGE,IAAA,KAAK,EAAEX,YAAAA;AAHT,GAAA,eAKE8B,6BAAC,WAAD,EAAA;IACE,WAAW,EAAE,UAACmB,cAAD;AAAoB,MAAA,OAC/BiB,eAAe,CAAC;AAAExG,QAAAA,OAAO,EAAEA,OAAX;AAAoBY,QAAAA,MAAM,EAAEA,MAA5B;AAAoCK,QAAAA,MAAM,EAAEA,MAAAA;OAA7C,CAAf,iBACEmD,cAAA,CAAA,aAAA,CAAC,UAAD,EAAA;AACE,QAAA,SAAS,EAAC,0DADZ;AAEE,QAAA,KAAK,EAAC,MAFR;AAGE,QAAA,MAAM,EAAC,MAHT;AAIE,QAAA,OAAO,EAAE,YAAA;UACPmB,cAAc,EAAA,CAAA;AACf,SAAA;AANH,OAAA,eAQEnB,6BAAC,IAAD,EAAA;QACE,IAAI,EAAEqC,SAAS,CAACC,IADlB;QAEE,SAAS,EAAEC,UAAU,CAACC,eAFxB;AAGE,QAAA,KAAK,EAAC,MAHR;AAIE,QAAA,MAAM,EAAC,MAAA;AAJT,OAAA,CARF,CAF6B,CAAA;KADnC;IAoBE,SAAS,EAAE,UAACnB,aAAD;AAAmB,MAAA,oBAC5BrB,6BAAC,SAAD,EAAA;AACE,QAAA,SAAS,EAAEnB,cADb;AAEE,QAAA,gBAAgB,EAAEA,cAFpB;AAGE,QAAA,aAAa,EAAEwC,aAHjB;QAIE,QAAQ,EAAA,IAAA;AAJV,OAAA,EAOIoB,UAAU,CAAC;AAAE7G,QAAAA,OAAO,EAAAA,OAAT;AAAWY,QAAAA,MAAM,EAAAA,MAAjB;AAAmBK,QAAAA,MAAM,EAAAA,MAAAA;OAA1B,CAAV,iBACEmD,cAAA,CAAA,aAAA,CAAC,QAAD,EAAA;AACE,QAAA,SAAS,EAAC,0DADZ;AAEE,QAAA,OAAO,EAAE,YAAA;AACP0C,UAAAA,eAAe,CAAC9G,OAAO,CAACA,OAAT,CAAf,CAAA;UACAyF,aAAa,EAAA,CAAA;AACd,SAAA;AALH,OAAA,EAOG5D,SAAS,CAACkF,2BAPb,CARN,EAoBIC,UAAU,CAAC;AAAEhH,QAAAA,OAAO,EAAAA,OAAT;AAAWY,QAAAA,MAAM,EAAAA,MAAjB;AAAmBK,QAAAA,MAAM,EAAAA,MAAAA;OAA1B,CAAV,iBACEmD,cAAA,CAAA,aAAA,CAAC,QAAD,EAAA;AACE,QAAA,SAAS,EAAC,0DADZ;AAEE,QAAA,OAAO,EAAE,YAAA;AACP,UAAA,IAAI7D,QAAJ,EAAc;AACZ,YAAA,OAAA;AACD,WAAA;;UACDC,QAAQ,CAAC,IAAD,CAAR,CAAA;UACAiF,aAAa,EAAA,CAAA;AACd,SAAA;AARH,OAAA,EAUG5D,SAAS,CAACoF,2BAVb,CArBN,EAoCIC,YAAY,CAAC;AAAElH,QAAAA,OAAO,EAAAA,OAAT;AAAWY,QAAAA,MAAM,EAAAA,MAAjB;AAAmBK,QAAAA,MAAM,EAAAA,MAAAA;OAA1B,CAAZ,iBACEmD,cAAA,CAAA,aAAA,CAAC,QAAD,EAAA;AACE,QAAA,SAAS,EAAC,4DADZ;AAEE,QAAA,OAAO,EAAE,YAAA;UACP1D,aAAa,CAACV,OAAD,CAAb,CAAA;UACAyF,aAAa,EAAA,CAAA;AACd,SAAA;AALH,OAAA,EAOG5D,SAAS,CAACsF,6BAPb,CArCN,EAiDIC,YAAY,CAAC;AAAEpH,QAAAA,OAAO,EAAAA,OAAT;AAAWY,QAAAA,MAAM,EAAAA,MAAjB;AAAmBK,QAAAA,MAAM,EAAAA,MAAAA;OAA1B,CAAZ,iBACEmD,cAAA,CAAA,aAAA,CAAC,QAAD,EAAA;AACE,QAAA,SAAS,EAAC,4DADZ;AAEE,QAAA,OAAO,EAAE,YAAA;AACP,UAAA,IAAI7D,QAAJ,EAAc;AACZ,YAAA,OAAA;AACD,WAAA;;UACDE,UAAU,CAAC,IAAD,CAAV,CAAA;UACAgF,aAAa,EAAA,CAAA;AACd,SAAA;AARH,OAAA,EAUG5D,SAAS,CAACwF,6BAVb,CAlDN,CAD4B,CAAA;AAkE7B,KAAA;GA3FL,CAAA,CA/FN,CAPF,eAuMEjD,cAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC,yCAAA;GACb,eAAAA,cAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC,iDAAf;AAAiE,IAAA,GAAG,EAAElB,aAAAA;AAAtE,GAAA,EAEIjD,UAAU,CAACC,GAAX,iBACEkE,6BAAC,KAAD,EAAA;AACE,IAAA,SAAS,EAAC,sDADZ;IAEE,IAAI,EAAEK,eAAe,CAACyB,SAFxB;IAGE,KAAK,EAAEvB,WAAW,CAACC,cAAAA;GAElB3E,EAAAA,UAAU,CAACC,GALd,CAHN,EAaID,UAAU,CAACqH,KAAX,iBACElD,cAAA,CAAA,aAAA,CAAC,SAAD,EAAA;AACE,IAAA,SAAS,EAAC,wDADZ;IAEE,GAAG,EAAEnE,UAAU,CAACC,GAFlB;IAGE,IAAI,EAAEuE,eAAe,CAAC8C,UAHxB;IAIE,KAAK,EAAE5C,WAAW,CAAC6C,OAAAA;GAGjBvH,EAAAA,UAAU,CAACqH,KAPf,CAdN,EA2BIrH,UAAU,CAACwH,WAAX,iBACErD,cAAA,CAAA,aAAA,CAAC,KAAD,EAAA;AACE,IAAA,SAAS,EAAC,8DADZ;IAEE,IAAI,EAAEK,eAAe,CAACiD,MAFxB;IAGE,KAAK,EAAE/C,WAAW,CAAC4B,cAAAA;GAElBtG,EAAAA,UAAU,CAACwH,WALd,CA5BN,EAsCIxH,UAAU,CAACC,GAAX,iBACEkE,cAAA,CAAA,aAAA,CAAA,KAAA,EAAA,QAAA,CAAA;AACE,IAAA,SAAS,EAAC,4DADZ;AAEE,IAAA,IAAI,EAAC,QAFP;AAGE,IAAA,OAAO,EAAEtD,QAHX;AAIE,IAAA,SAAS,EAAEA,QAJb;AAKE,IAAA,QAAQ,EAAE,CAAA;AALZ,GAAA,EAMO4C,QAAQ,gBAAQf,YAAR,GAAwB,EANvC,CAAA,EASIxB,YAAY,iBACViD,6BAAC,aAAD,EAAA;AACE,IAAA,SAAS,EAAC,mEADZ;AAEE,IAAA,GAAG,EAAEjD,YAAY,CAACjB,GAAb,IAAoB,EAF3B;AAGE,IAAA,GAAG,EAAEiB,YAAY,CAACwG,GAAb,IAAoB,EAH3B;AAIE,IAAA,MAAM,EAAC,OAJT;AAKE,IAAA,gBAAgB,eACdvD,cAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,MAAA,SAAS,EAAC,gFAAA;AAAf,KAAA,eACEA,6BAAC,IAAD,EAAA;MACE,IAAI,EAAEqC,SAAS,CAACmB,cADlB;AAEE,MAAA,KAAK,EAAC,MAFR;AAGE,MAAA,MAAM,EAAC,MAAA;KAJX,CAAA,CAAA;AANJ,GAAA,CAVN,CAvCN,CADF,EAwEI,CAACxE,SAAS,IAAIE,QAAd,kBACEc,cAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC,mDAAA;GAEXhB,EAAAA,SAAS,iBACPgB,cAAA,CAAA,aAAA,CAAC,MAAD,EAAA;AACE,IAAA,KAAK,EAAC,MADR;AAEE,IAAA,MAAM,EAAC,MAAA;AAFT,GAAA,eAIEA,6BAAC,IAAD,EAAA;AACE,IAAA,SAAS,EAAC,4DADZ;IAEE,IAAI,EAAEqC,SAAS,CAACoB,OAFlB;IAGE,SAAS,EAAElB,UAAU,CAACa,OAHxB;AAIE,IAAA,KAAK,EAAC,MAJR;AAKE,IAAA,MAAM,EAAC,MAAA;AALT,GAAA,CAJF,CAHN,EAkBIlE,QAAQ,iBACNc,6BAAC,IAAD,EAAA;AACE,IAAA,SAAS,EAAC,2DADZ;IAEE,IAAI,EAAEqC,SAAS,CAACqB,KAFlB;IAGE,SAAS,EAAEnB,UAAU,CAACmB,KAHxB;AAIE,IAAA,KAAK,EAAC,MAJR;AAKE,IAAA,MAAM,EAAC,MAAA;AALT,GAAA,CAnBN,CAzEN,CAvMF,EAiTIrF,WAAW,iBACT2B,6BAAC,qBAAD,EAAA;AACE,IAAA,OAAO,EAAEpE,OADX;AAEE,IAAA,SAAS,EAAEkD,aAFb;AAGE,IAAA,QAAQ,EAAE,YAAA;MACRR,cAAc,CAAC,KAAD,CAAd,CAAA;KAJJ;AAME,IAAA,UAAU,EAAE,YAAA;MACVA,cAAc,CAAC,KAAD,CAAd,CAAA;MACAjC,UAAU,CAAC,IAAD,CAAV,CAAA;KARJ;AAUE,IAAA,QAAQ,EAAE,YAAA;MACRiC,cAAc,CAAC,KAAD,CAAd,CAAA;MACAlC,QAAQ,CAAC,IAAD,CAAR,CAAA;KAZJ;AAcE,IAAA,eAAe,EAAE,YAAA;MACfkC,cAAc,CAAC,KAAD,CAAd,CAAA;AACAoE,MAAAA,eAAe,CAAC9G,OAAO,KAAP,IAAA,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEA,OAAV,CAAf,CAAA;KAhBJ;AAkBE,IAAA,aAAa,EAAE,YAAA;MACb0C,cAAc,CAAC,KAAD,CAAd,CAAA;MACAhC,aAAa,CAACV,OAAD,CAAb,CAAA;AACD,KAAA;AArBH,GAAA,CAlTN,CADF,CAAA;AA8UD;;;;"}