{"version":3,"file":"FileViewer.js","sources":["../../src/ui/FileViewer/index.tsx"],"sourcesContent":["import React, { MouseEvent, ReactElement, useContext } from 'react';\nimport { FileMessage } from '@sendbird/chat/message';\nimport { createPortal } from 'react-dom';\n\nimport './index.scss';\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport { MODAL_ROOT } from '../../hooks/useModal/ModalRoot';\nimport { isImage, isVideo, isSupportedFileView } from '../../utils';\n\nimport Avatar from '../Avatar/index';\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport Icon, { IconColors, IconTypes } from '../Icon';\n\ninterface SenderInfo {\n  profileUrl: string;\n  nickname: string;\n}\ninterface FileInfo {\n  name: string;\n  type: string;\n  url: string;\n}\nexport interface FileViewerComponentProps extends SenderInfo, FileInfo {\n  isByMe?: boolean;\n  disableDelete?: boolean;\n  onClose: (e: MouseEvent<HTMLDivElement>) => void;\n  onDelete: (e: MouseEvent<HTMLDivElement>) => void;\n}\n\nexport const FileViewerComponent = ({\n  profileUrl,\n  nickname,\n  name,\n  type,\n  url,\n  isByMe = true,\n  disableDelete = false,\n  onClose,\n  onDelete,\n}: FileViewerComponentProps): ReactElement => {\n  const { stringSet } = useContext(LocalizationContext);\n  return (\n    <div className=\"sendbird-fileviewer\">\n      <div className=\"sendbird-fileviewer__header\">\n        <div className=\"sendbird-fileviewer__header__left\">\n          <div className=\"sendbird-fileviewer__header__left__avatar\">\n            <Avatar height=\"32px\" width=\"32px\" src={profileUrl} />\n          </div>\n          <Label\n            className=\"sendbird-fileviewer__header__left__filename\"\n            type={LabelTypography.H_2}\n            color={LabelColors.ONBACKGROUND_1}\n          >\n            {name}\n          </Label>\n          <Label\n            className=\"sendbird-fileviewer__header__left__sender-name\"\n            type={LabelTypography.BODY_1}\n            color={LabelColors.ONBACKGROUND_2}\n          >\n            {nickname}\n          </Label>\n        </div>\n        <div\n          className=\"sendbird-fileviewer__header__right\"\n        >\n          {\n            isSupportedFileView(type) && (\n              <div className=\"sendbird-fileviewer__header__right__actions\" >\n                <a\n                  className=\"sendbird-fileviewer__header__right__actions__download\"\n                  rel=\"noopener noreferrer\"\n                  href={url}\n                  target=\"_blank\"\n                >\n                  <Icon\n                    type={IconTypes.DOWNLOAD}\n                    fillColor={IconColors.ON_BACKGROUND_1}\n                    height=\"24px\"\n                    width=\"24px\"\n                  />\n                </a>\n                {\n                  onDelete && isByMe && (\n                    <div className=\"sendbird-fileviewer__header__right__actions__delete\">\n                      <Icon\n                        className={disableDelete ? 'disabled' : ''}\n                        type={IconTypes.DELETE}\n                        fillColor={disableDelete ? IconColors.GRAY : IconColors.ON_BACKGROUND_1}\n                        height=\"24px\"\n                        width=\"24px\"\n                        onClick={(e) => { if (!disableDelete) { onDelete?.(e); } }}\n                      />\n                    </div>\n                  )\n                }\n              </div>\n            )\n          }\n          <div className=\"sendbird-fileviewer__header__right__actions__close\">\n            <Icon\n              type={IconTypes.CLOSE}\n              fillColor={IconColors.ON_BACKGROUND_1}\n              height=\"24px\"\n              width=\"24px\"\n              onClick={(e) => onClose?.(e)}\n            />\n          </div>\n        </div>\n      </div>\n      <div className=\"sendbird-fileviewer__content\">\n        {isVideo(type) && (\n          <video\n            controls\n            className=\"sendbird-fileviewer__content__video\"\n          >\n            <source src={url} type={type} />\n          </video>\n        )}\n        {\n          isImage(type) && (\n            <img\n              src={url}\n              alt={name}\n              className=\"sendbird-fileviewer__content__img\"\n            />\n          )\n        }\n        {\n          !isSupportedFileView(type) && (\n            <div\n              className=\"sendbird-fileviewer__content__unsupported\"\n            >\n              <Label type={LabelTypography.H_1} color={LabelColors.ONBACKGROUND_1}>\n                {stringSet?.UI__FILE_VIEWER__UNSUPPORT || 'Unsupported message'}\n              </Label>\n            </div>\n          )\n        }\n      </div>\n    </div>\n  );\n};\n\nexport interface FileViewerProps {\n  message: FileMessage;\n  isByMe?: boolean;\n  onClose: (e: MouseEvent<HTMLDivElement>) => void;\n  onDelete: (e: MouseEvent<HTMLDivElement>) => void;\n}\n\nexport default function FileViewer({\n  message,\n  isByMe = false,\n  onClose,\n  onDelete,\n}: FileViewerProps): ReactElement {\n  return createPortal(\n    (\n      <FileViewerComponent\n        profileUrl={message?.sender?.profileUrl}\n        nickname={message?.sender?.nickname}\n        name={message?.name}\n        type={message?.type}\n        url={message?.url}\n        isByMe={isByMe}\n        disableDelete={message?.threadInfo?.replyCount > 0}\n        onClose={onClose}\n        onDelete={onDelete}\n      />\n    ),\n    document.getElementById(MODAL_ROOT),\n  );\n}\n"],"names":["FileViewerComponent","_a","profileUrl","nickname","name","type","url","_b","isByMe","_c","disableDelete","onClose","onDelete","stringSet","useContext","LocalizationContext","React","LabelTypography","H_2","LabelColors","ONBACKGROUND_1","BODY_1","ONBACKGROUND_2","isSupportedFileView","IconTypes","DOWNLOAD","IconColors","ON_BACKGROUND_1","DELETE","GRAY","e","CLOSE","isVideo","isImage","H_1","UI__FILE_VIEWER__UNSUPPORT","FileViewer","message","_e","createPortal","sender","_d","threadInfo","replyCount","document","getElementById","MODAL_ROOT"],"mappings":"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"}