{"version":3,"file":"OpenChannelMessage.js","sources":["../../../src/smart-components/OpenChannel/components/OpenChannelMessage/RemoveMessageModal.tsx","../../../src/ui/FileViewer/types.ts","../../../src/smart-components/OpenChannel/components/OpenChannelMessage/utils.ts","../../../src/smart-components/OpenChannel/components/OpenChannelMessage/index.tsx"],"sourcesContent":["import React, { useContext } from 'react'\nimport { ClientFileMessage, ClientUserMessage } from '../../../../index';\nimport Modal from '../../../../ui/Modal';\nimport { LocalizationContext } from '../../../../lib/LocalizationContext';\n\ninterface Props {\n  onCloseModal(): void;\n  onDeleteMessage(message: ClientUserMessage | ClientFileMessage, callback?: () => void): void;\n}\n\nexport default function RemoveMessageModal({\n  onCloseModal,\n  onDeleteMessage,\n}: Props): JSX.Element {\n  const { stringSet } = useContext(LocalizationContext);\n\n  return (\n    <Modal\n      onCancel={onCloseModal}\n      onSubmit={onDeleteMessage}\n      submitText={stringSet.MESSAGE_MENU__DELETE}\n      titleText={stringSet.MODAL__DELETE_MESSAGE__TITLE}\n    />\n  );\n}\n","// https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Complete_list_of_MIME_types\n\nexport type SupportedImageMimesType = 'image/jpeg' | 'image/jpg' | 'image/png' | 'image/gif' | 'image/svg+xml' | 'image/webp';\nexport type SupportedVideoMimesType = 'video/mpeg' | 'video/ogg' | 'video/webm' | 'video/mp4';\nexport type SupportedMimesType = SupportedImageMimesType | SupportedVideoMimesType;\n\nconst SUPPORTED_MIMES = {\n  IMAGE: [\n    'image/jpeg',\n    'image/jpg',\n    'image/png',\n    'image/gif',\n    'image/svg+xml',\n    'image/webp',\n  ],\n  VIDEO: [\n    'video/mpeg',\n    'video/ogg',\n    'video/webm',\n    'video/mp4',\n  ],\n};\n\nexport const isImage = (type: SupportedImageMimesType): boolean => SUPPORTED_MIMES.IMAGE.indexOf(type) >= 0;\nexport const isVideo = (type: SupportedVideoMimesType): boolean => SUPPORTED_MIMES.VIDEO.indexOf(type) >= 0;\nexport const isGif = (type: SupportedMimesType): boolean => type === 'image/gif';\nexport const unSupported = (type: SupportedMimesType): boolean => (\n  !(\n    isImage(type as SupportedImageMimesType)\n    || isVideo(type as SupportedVideoMimesType)\n  )\n);\n\nexport default { ...SUPPORTED_MIMES };\n","import { AdminMessage, FileMessage, UserMessage } from '@sendbird/chat/message';\nimport { isImage, isVideo } from '../../../../ui/FileViewer/types';\n\nexport const MessageTypes = {\n  ADMIN: 'ADMIN',\n  USER: 'USER',\n  FILE: 'FILE',\n  THUMBNAIL: 'THUMBNAIL',\n  OG: 'OG',\n  UNKNOWN: 'UNKNOWN',\n};\n\nexport const SendingMessageStatus = {\n  NONE: 'none',\n  SUCCEEDED: 'succeeded',\n  FAILED: 'failed',\n  PENDING: 'pending',\n};\n\nexport const getMessageType = (message: UserMessage | FileMessage | AdminMessage): string => {\n  if ((message?.isUserMessage?.()) || message?.messageType === 'user') {\n    return (message?.ogMetaData)\n      ? MessageTypes.OG\n      : MessageTypes.USER;\n  }\n  if (message?.isAdminMessage?.()) {\n    return MessageTypes.ADMIN;\n  }\n  if (message?.messageType === 'file') {\n    return (isImage((message as FileMessage).type) || isVideo((message as FileMessage).type))\n      ? MessageTypes.THUMBNAIL\n      : MessageTypes.FILE;\n  }\n  return MessageTypes.UNKNOWN;\n};\n\nexport default {\n  MessageTypes,\n  SendingMessageStatus,\n  getMessageType,\n};\n","import React, {\n  useState,\n  useRef,\n  ReactElement,\n  useMemo,\n} from 'react';\nimport { AdminMessage, FileMessage, UserMessage } from '@sendbird/chat/message';\nimport { User } from '@sendbird/chat';\nimport format from 'date-fns/format';\n\nimport OpenChannelUserMessage from '../../../../ui/OpenchannelUserMessage';\nimport OpenChannelAdminMessage from '../../../../ui/OpenChannelAdminMessage';\nimport OpenChannelOGMessage from '../../../../ui/OpenchannelOGMessage';\nimport OpenChannelThumbnailMessage from '../../../../ui/OpenchannelThumbnailMessage';\nimport OpenChannelFileMessage from '../../../../ui/OpenchannelFileMessage';\n// import UnknownMessage from '../../../../ui/UnknownMessage';\n\nimport DateSeparator from '../../../../ui/DateSeparator';\nimport Label, { LabelTypography, LabelColors } from '../../../../ui/Label';\nimport MessageInput from '../../../../ui/MessageInput';\nimport FileViewer from '../../../../ui/FileViewer';\n\nimport RemoveMessageModal from './RemoveMessageModal';\nimport {\n  MessageTypes,\n  SendingMessageStatus,\n  getMessageType,\n} from './utils';\nimport { useOpenChannelContext } from '../../context/OpenChannelProvider';\nimport useSendbirdStateContext from '../../../../hooks/useSendbirdStateContext';\nimport type { RenderMessageProps } from '../../../../types';\nimport { useLocalization } from '../../../../lib/LocalizationContext';\n\nexport type OpenChannelMessageProps = {\n  renderMessage?: (props: RenderMessageProps) => React.ElementType<RenderMessageProps>;\n  message: UserMessage | FileMessage | AdminMessage;\n  chainTop?: boolean;\n  chainBottom?: boolean;\n  hasSeparator?: boolean;\n  editDisabled?: boolean;\n};\n\nexport default function MessagOpenChannelMessageeHoc(props: OpenChannelMessageProps): ReactElement {\n  const {\n    message,\n    chainTop,\n    chainBottom,\n    hasSeparator,\n    renderMessage,\n  } = props;\n\n  const {\n    currentOpenChannel,\n    deleteMessage,\n    updateMessage,\n    resendMessage,\n  } = useOpenChannelContext();\n  const { dateLocale } = useLocalization();\n  const editDisabled = currentOpenChannel?.isFrozen;\n\n  const globalState = useSendbirdStateContext();\n  const userId = globalState?.config?.userId;\n\n  let sender: User = null;\n  if (message?.messageType !== 'admin') {\n    sender = (message as UserMessage | FileMessage)?.sender;\n  }\n\n  const RenderedMessage = useMemo(() => (props: RenderMessageProps) => {\n    return (\n      <>\n        {\n          renderMessage\n            ? (renderMessage(props))\n            : null\n        }\n      </>\n    );\n  }, [message, renderMessage]);\n\n  const [showEdit, setShowEdit] = useState(false);\n  const [showRemove, setShowRemove] = useState(false);\n  const [showFileViewer, setShowFileViewer] = useState(false);\n  const editMessageInputRef = useRef(null);\n\n  let isByMe = false;\n\n  if (sender && message?.messageType !== 'admin') {\n    // pending and failed messages are by me\n    isByMe = (userId === sender.userId)\n      || ((message as UserMessage | FileMessage)?.sendingStatus === SendingMessageStatus.PENDING)\n      || ((message as UserMessage | FileMessage)?.sendingStatus === SendingMessageStatus.FAILED);\n  }\n\n  if (renderMessage && RenderedMessage) {\n    return (\n      <div className=\"sendbird-msg-hoc sendbird-msg--scroll-ref\">\n        <RenderedMessage message={message} chainTop={chainTop} chainBottom={chainBottom} />\n      </div>\n    );\n  }\n\n  if (message?.messageType === 'user' && showEdit) {\n    return (\n      <MessageInput\n        isEdit\n        disabled={editDisabled}\n        ref={editMessageInputRef}\n        message={message as UserMessage}\n        name={message?.messageId}\n        onUpdateMessage={({ messageId, message }) => {\n          updateMessage(messageId, message);\n          setShowEdit(false);\n        }}\n        onCancelEdit={() => { setShowEdit(false); }}\n      />\n    );\n  }\n\n  return (\n    <div className=\"sendbird-msg-hoc sendbird-msg--scroll-ref\">\n      {/* date-separator */}\n      {\n        (hasSeparator && message?.createdAt) && (\n          <DateSeparator>\n            <Label type={LabelTypography.CAPTION_2} color={LabelColors.ONBACKGROUND_2}>\n              {format(message?.createdAt, 'MMMM dd, yyyy', {\n                locale: dateLocale,\n              })}\n            </Label>\n          </DateSeparator>\n        )\n      }\n      {/* Message */}\n      {\n        {\n          [MessageTypes.ADMIN]: (() => {\n            if (message?.messageType === 'admin') {\n              return (\n                <OpenChannelAdminMessage message={message as AdminMessage} />\n              )\n            }\n          })(),\n          [MessageTypes.FILE]: (() => {\n            if (message?.messageType === 'file') {\n              return (\n                <OpenChannelFileMessage\n                  message={message as FileMessage}\n                  isOperator={currentOpenChannel?.isOperator((message as FileMessage)?.sender?.userId)}\n                  disabled={editDisabled}\n                  userId={userId}\n                  showRemove={setShowRemove}\n                  resendMessage={resendMessage}\n                  chainTop={chainTop}\n                  chainBottom={chainBottom}\n                />\n              );\n            }\n            return;\n          })(),\n          [MessageTypes.OG]: (() => {\n            if (message?.messageType === 'user') {\n              return (\n                <OpenChannelOGMessage\n                  message={message as UserMessage}\n                  isOperator={currentOpenChannel?.isOperator((message as UserMessage)?.sender?.userId)}\n                  userId={userId}\n                  showEdit={setShowEdit}\n                  disabled={editDisabled}\n                  showRemove={setShowRemove}\n                  resendMessage={resendMessage}\n                  chainTop={chainTop}\n                  chainBottom={chainBottom}\n                />\n              );\n            }\n            return;\n          })(),\n          [MessageTypes.THUMBNAIL]: (() => {\n            if (message?.messageType === 'file') {\n              return (\n                <OpenChannelThumbnailMessage\n                  message={message as FileMessage}\n                  isOperator={currentOpenChannel?.isOperator((message as FileMessage)?.sender?.userId)}\n                  disabled={editDisabled}\n                  userId={userId}\n                  showRemove={setShowRemove}\n                  resendMessage={resendMessage}\n                  onClick={setShowFileViewer}\n                  chainTop={chainTop}\n                  chainBottom={chainBottom}\n                />\n              );\n            }\n            return;\n          })(),\n          [MessageTypes.USER]: (() => {\n            if (message?.messageType === 'user') {\n              return (\n                <OpenChannelUserMessage\n                  message={message as UserMessage}\n                  isOperator={currentOpenChannel?.isOperator((message as UserMessage)?.sender?.userId)}\n                  userId={userId}\n                  disabled={editDisabled}\n                  showEdit={setShowEdit}\n                  showRemove={setShowRemove}\n                  resendMessage={resendMessage}\n                  chainTop={chainTop}\n                  chainBottom={chainBottom}\n                />\n              );\n            }\n            return;\n          })(),\n          [MessageTypes.UNKNOWN]: (() => {\n            return;\n            // return (\n            //   <OpenChannelUnknownMessage message={message} />\n            // );\n          })(),\n        }[getMessageType(message)]\n      }\n      {/* Modal */}\n      {\n        showRemove && (\n          <RemoveMessageModal\n            onCloseModal={() => setShowRemove(false)}\n            onDeleteMessage={() => {\n              if (message?.messageType !== 'admin') {\n                deleteMessage(message);\n              }\n            }}\n          />\n        )\n      }\n      {\n        (showFileViewer && message?.messageType === 'file') && (\n          <FileViewer\n            onClose={() => setShowFileViewer(false)}\n            message={message}\n            onDelete={() => deleteMessage(message)}\n            isByMe={isByMe}\n          />\n        )\n      }\n      {/* {\n        !((message?.isFileMessage && message?.isFileMessage()) || message?.messageType === 'file')\n        && !(message?.isAdminMessage && message?.isAdminMessage())\n        && !(((message?.isUserMessage && message?.isUserMessage()) || message?.messageType === 'user'))\n        && !(showFileViewer)\n        && (\n          <UnknownMessage\n            message={message}\n            isByMe={isByMe}\n            showRemove={setShowRemove}\n            chainTop={chainTop}\n            chainBottom={chainBottom}\n          />\n        )\n      } */}\n    </div>\n  );\n}\n"],"names":["RemoveMessageModal","_a","onCloseModal","onDeleteMessage","stringSet","useContext","LocalizationContext","React","MESSAGE_MENU__DELETE","MODAL__DELETE_MESSAGE__TITLE","SUPPORTED_MIMES","IMAGE","VIDEO","isImage","type","indexOf","isVideo","__assign","MessageTypes","ADMIN","USER","FILE","THUMBNAIL","OG","UNKNOWN","SendingMessageStatus","NONE","SUCCEEDED","FAILED","PENDING","getMessageType","message","isUserMessage","call","messageType","ogMetaData","_b","isAdminMessage","MessagOpenChannelMessageeHoc","props","chainTop","chainBottom","hasSeparator","renderMessage","_c","useOpenChannelContext","currentOpenChannel","deleteMessage","updateMessage","resendMessage","dateLocale","useLocalization","editDisabled","isFrozen","globalState","useSendbirdStateContext","userId","config","sender","RenderedMessage","useMemo","_d","useState","showEdit","setShowEdit","_e","showRemove","setShowRemove","_f","showFileViewer","setShowFileViewer","editMessageInputRef","useRef","isByMe","sendingStatus","messageId","createdAt","LabelTypography","CAPTION_2","LabelColors","ONBACKGROUND_2","format","locale","OpenChannelFileMessage","isOperator","OpenChannelOGMessage","OpenChannelThumbnailMessage","OpenChannelUserMessage"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUwB,SAAAA,kBAAA,CAAmBC,EAAnB,EAGhB;MAFNC,YAAY,GAAAD,EAAA,CAAAC;MACZC,eAAe,GAAAF,EAAA,CAAAE;AAEP,EAAA,IAAAC,SAAS,GAAKC,UAAU,CAACC,mBAAD,CAAV,UAAd,CAAA;AAER,EAAA,oBACEC,6BAAC,KAAD,EAAA;AACE,IAAA,QAAQ,EAAEL,YADZ;AAEE,IAAA,QAAQ,EAAEC,eAFZ;IAGE,UAAU,EAAEC,SAAS,CAACI,oBAHxB;IAIE,SAAS,EAAEJ,SAAS,CAACK,4BAAAA;GALzB,CAAA,CAAA;AAQD;;ACxBD;AAMA,IAAMC,eAAe,GAAG;AACtBC,EAAAA,KAAK,EAAE,CACL,YADK,EAEL,WAFK,EAGL,WAHK,EAIL,WAJK,EAKL,eALK,EAML,YANK,CADe;EAStBC,KAAK,EAAE,CACL,YADK,EAEL,WAFK,EAGL,YAHK,EAIL,WAJK,CAAA;AATe,CAAxB,CAAA;AAiBO,IAAMC,OAAO,GAAG,UAACC,IAAD,EAA8B;EAAc,OAAAJ,eAAe,CAACC,KAAhB,CAAsBI,OAAtB,CAA8BD,IAA9B,KAAuC,CAAvC,CAAA;AAAwC,CAApG,CAAA;AACA,IAAME,OAAO,GAAG,UAACF,IAAD,EAA8B;EAAc,OAAAJ,eAAe,CAACE,KAAhB,CAAsBG,OAAtB,CAA8BD,IAA9B,KAAuC,CAAvC,CAAA;AAAwC,CAApG,CAAA;AASPG,QAAA,CAAA,EAAA,EAAoBP,eAApB,CAAA;;AC9BO,IAAMQ,YAAY,GAAG;AAC1BC,EAAAA,KAAK,EAAE,OADmB;AAE1BC,EAAAA,IAAI,EAAE,MAFoB;AAG1BC,EAAAA,IAAI,EAAE,MAHoB;AAI1BC,EAAAA,SAAS,EAAE,WAJe;AAK1BC,EAAAA,EAAE,EAAE,IALsB;AAM1BC,EAAAA,OAAO,EAAE,SAAA;AANiB,CAArB,CAAA;AASA,IAAMC,oBAAoB,GAAG;AAClCC,EAAAA,IAAI,EAAE,MAD4B;AAElCC,EAAAA,SAAS,EAAE,WAFuB;AAGlCC,EAAAA,MAAM,EAAE,QAH0B;AAIlCC,EAAAA,OAAO,EAAE,SAAA;AAJyB,CAA7B,CAAA;AAOA,IAAMC,cAAc,GAAG,UAACC,OAAD,EAAkD;;;EAC9E,IAAI,CAAC,MAAAA,OAAO,KAAA,IAAP,IAAAA,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,OAAO,CAAEC,aAAT,MAA0B,IAA1B,IAA0B/B,EAAA,KAAA,KAAA,CAA1B,GAA0B,KAAA,CAA1B,GAA0BA,EAAA,CAAAgC,IAAA,CAAAF,OAAA,CAA3B,KAAgC,CAAAA,OAAO,SAAP,IAAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAAA,OAAO,CAAEG,WAAT,MAAyB,MAA7D,EAAqE;IACnE,OAAO,CAACH,OAAO,KAAP,IAAA,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEI,UAAV,IACHjB,YAAY,CAACK,EADV,GAEHL,YAAY,CAACE,IAFjB,CAAA;AAGD,GAAA;;AACD,EAAA,IAAI,CAAAgB,EAAA,GAAAL,OAAO,KAAP,IAAA,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEM,cAAT,MAAuB,IAAvB,IAAuBD,EAAA,KAAA,KAAA,CAAvB,GAAuB,KAAA,CAAvB,GAAuBA,EAAA,CAAAH,IAAA,CAAAF,OAAA,CAA3B,EAAiC;IAC/B,OAAOb,YAAY,CAACC,KAApB,CAAA;AACD,GAAA;;AACD,EAAA,IAAI,CAAAY,OAAO,KAAA,IAAP,IAAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAAA,OAAO,CAAEG,WAAT,MAAyB,MAA7B,EAAqC;IACnC,OAAQrB,OAAO,CAAEkB,OAAuB,CAACjB,IAA1B,CAAP,IAA0CE,OAAO,CAAEe,OAAuB,CAACjB,IAA1B,CAAlD,GACHI,YAAY,CAACI,SADV,GAEHJ,YAAY,CAACG,IAFjB,CAAA;AAGD,GAAA;;EACD,OAAOH,YAAY,CAACM,OAApB,CAAA;AACD,CAfM;;ACuBiB,SAAAc,4BAAA,CAA6BC,KAA7B,EAA2D;;;;;AAE/E,EAAA,IAAAR,OAAO,GAKLQ,KAAK,CALAR,OAAP;AAAA,MACAS,QAAQ,GAIND,KAAK,CAJCC,QADR;AAAA,MAEAC,WAAW,GAGTF,KAAK,CAHIE,WAFX;AAAA,MAGAC,YAAY,GAEVH,KAAK,CAAAG,YALP;AAAA,MAIAC,aAAa,GACXJ,KAAK,CAAAI,aALP,CAAA;;EAOI,IAAAC,EAKF,GAAAC,qBAAqB,EALnB;AAAA,MACJC,kBAAkB,GAAAF,EAAA,CAAAE,kBADd;AAAA,MAEJC,aAAa,GAAAH,EAAA,CAAAG,aAFT;AAAA,MAGJC,aAAa,GAAAJ,EAAA,CAAAI,aAHT;AAAA,MAIJC,aAAa,mBAJT,CAAA;;AAME,EAAA,IAAAC,UAAU,GAAKC,eAAe,EAAA,WAA9B,CAAA;AACR,EAAA,IAAMC,YAAY,GAAGN,kBAAkB,KAAA,IAAlB,IAAAA,kBAAkB,KAAlB,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,kBAAkB,CAAEO,QAAzC,CAAA;EAEA,IAAMC,WAAW,GAAGC,uBAAuB,EAA3C,CAAA;AACA,EAAA,IAAMC,MAAM,GAAG,CAAApB,EAAA,GAAAkB,WAAW,KAAX,IAAA,IAAAA,WAAW,KAAX,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,WAAW,CAAEG,MAAb,MAAqB,IAArB,IAAqBrB,EAAA,KAAA,KAAA,CAArB,GAAqB,KAAA,CAArB,GAAqBA,EAAA,CAAAoB,MAApC,CAAA;EAEA,IAAIE,MAAM,GAAS,IAAnB,CAAA;;AACA,EAAA,IAAI,CAAA3B,OAAO,KAAA,IAAP,IAAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAAA,OAAO,CAAEG,WAAT,MAAyB,OAA7B,EAAsC;AACpCwB,IAAAA,MAAM,GAAI3B,OAAqC,KAArC,IAAA,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAgC2B,MAAjD,CAAA;AACD,GAAA;;AAED,EAAA,IAAMC,eAAe,GAAGC,OAAO,CAAC,YAAM;IAAA,OAAA,UAACrB,KAAD,EAA0B;MAC9D,oBACEhC,cAAA,CAAA,aAAA,CAAAA,cAAA,CAAA,QAAA,EAAA,IAAA,EAEIoC,aAAa,GACRA,aAAa,CAACJ,KAAD,CADL,GAET,IAJR,CADF,CAAA;KADoC,CAAA;AAUrC,GAV8B,EAU5B,CAACR,OAAD,EAAUY,aAAV,CAV4B,CAA/B,CAAA;;AAYM,EAAA,IAAAkB,EAAA,GAA0BC,QAAQ,CAAC,KAAD,CAAlC;AAAA,MAACC,QAAQ,GAAAF,EAAA,CAAA,CAAA,CAAT;AAAA,MAAWG,WAAW,GAAAH,EAAA,CAAA,CAAA,CAAtB,CAAA;;AACA,EAAA,IAAAI,EAAA,GAA8BH,QAAQ,CAAC,KAAD,CAAtC;AAAA,MAACI,UAAU,GAAAD,EAAA,CAAA,CAAA,CAAX;AAAA,MAAaE,aAAa,GAAAF,EAAA,CAAA,CAAA,CAA1B,CAAA;;AACA,EAAA,IAAAG,EAAA,GAAsCN,QAAQ,CAAC,KAAD,CAA9C;AAAA,MAACO,cAAc,GAAAD,EAAA,CAAA,CAAA,CAAf;AAAA,MAAiBE,iBAAiB,GAAAF,EAAA,CAAA,CAAA,CAAlC,CAAA;;AACN,EAAA,IAAMG,mBAAmB,GAAGC,MAAM,CAAC,IAAD,CAAlC,CAAA;EAEA,IAAIC,MAAM,GAAG,KAAb,CAAA;;EAEA,IAAIf,MAAM,IAAI,CAAA3B,OAAO,KAAP,IAAA,IAAAA,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,OAAO,CAAEG,WAAT,MAAyB,OAAvC,EAAgD;AAC9C;IACAuC,MAAM,GAAIjB,MAAM,KAAKE,MAAM,CAACF,MAAnB,IACH,CAACzB,OAAqC,KAArC,IAAA,IAAAA,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,OAAO,CAAgC2C,aAAxC,MAA0DjD,oBAAoB,CAACI,OAD5E,IAEH,CAACE,OAAqC,KAArC,IAAA,IAAAA,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,OAAO,CAAgC2C,aAAxC,MAA0DjD,oBAAoB,CAACG,MAFrF,CAAA;AAGD,GAAA;;EAED,IAAIe,aAAa,IAAIgB,eAArB,EAAsC;IACpC,oBACEpD,cAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,MAAA,SAAS,EAAC,2CAAA;AAAf,KAAA,eACEA,6BAAC,eAAD,EAAA;AAAiB,MAAA,OAAO,EAAEwB,OAA1B;AAAmC,MAAA,QAAQ,EAAES,QAA7C;AAAuD,MAAA,WAAW,EAAEC,WAAAA;AAApE,KAAA,CADF,CADF,CAAA;AAKD,GAAA;;EAED,IAAI,CAAAV,OAAO,KAAP,IAAA,IAAAA,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,OAAO,CAAEG,WAAT,MAAyB,MAAzB,IAAmC6B,QAAvC,EAAiD;AAC/C,IAAA,oBACExD,6BAAC,YAAD,EAAA;AACE,MAAA,MAAM,EADR,IAAA;AAEE,MAAA,QAAQ,EAAE6C,YAFZ;AAGE,MAAA,GAAG,EAAEmB,mBAHP;AAIE,MAAA,OAAO,EAAExC,OAJX;AAKE,MAAA,IAAI,EAAEA,OAAO,SAAP,IAAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAAA,OAAO,CAAE4C,SALjB;MAME,eAAe,EAAE,UAAC1E,EAAD,EAAuB;YAApB0E,SAAS,GAAA1E,EAAA,CAAA0E;YAAE5C,OAAO,GAAA9B,EAAA,CAAA8B;AACpCiB,QAAAA,aAAa,CAAC2B,SAAD,EAAY5C,OAAZ,CAAb,CAAA;QACAiC,WAAW,CAAC,KAAD,CAAX,CAAA;OARJ;AAUE,MAAA,YAAY,EAAE;QAAQA,WAAW,CAAC,KAAD,CAAX,CAAA;AAAqB,OAAA;KAX/C,CAAA,CAAA;AAcD,GAAA;;EAED,oBACEzD,cAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAC,2CAAA;GAGVmC,EAAAA,YAAY,KAAIX,OAAO,KAAA,IAAP,IAAAA,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,OAAO,CAAE6C,SAAb,CAAb,iBACErE,cAAC,CAAA,aAAA,CAAA,aAAD,EACE,IAAA,eAAAA,cAAA,CAAA,aAAA,CAAC,KAAD,EAAA;IAAO,IAAI,EAAEsE,eAAe,CAACC,SAA7B;IAAwC,KAAK,EAAEC,WAAW,CAACC,cAAAA;AAA3D,GAAA,EACGC,MAAM,CAAClD,OAAO,KAAP,IAAA,IAAAA,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,OAAO,CAAE6C,SAAV,EAAqB,eAArB,EAAsC;AAC3CM,IAAAA,MAAM,EAAEhC,UAAAA;AADmC,GAAtC,CADT,CADF,CAJN,EAeI,CAAAjD,EAAA,GAAA,EAAA,EACEA,EAAA,CAACiB,YAAY,CAACC,KAAd,CAAA,GAAuB,YAAA;AACrB,IAAA,IAAI,CAAAY,OAAO,KAAA,IAAP,IAAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAAA,OAAO,CAAEG,WAAT,MAAyB,OAA7B,EAAsC;AACpC,MAAA,oBACE3B,6BAAC,uBAAD,EAAA;AAAyB,QAAA,OAAO,EAAEwB,OAAAA;OADpC,CAAA,CAAA;AAGD,KAAA;GALmB,EADxB,EAQE9B,EAAA,CAACiB,YAAY,CAACG,IAAd,CAAA,GAAsB,YAAA;;;AACpB,IAAA,IAAI,CAAAU,OAAO,KAAA,IAAP,IAAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAAA,OAAO,CAAEG,WAAT,MAAyB,MAA7B,EAAqC;AACnC,MAAA,oBACE3B,6BAAC4E,sBAAD,EAAA;AACE,QAAA,OAAO,EAAEpD,OADX;QAEE,UAAU,EAAEe,kBAAkB,KAAlB,IAAA,IAAAA,kBAAkB,KAAlB,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,kBAAkB,CAAEsC,UAApB,CAA+B,CAAAnF,EAAA,GAAC8B,OAAuB,KAAvB,IAAA,IAAAA,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,OAAO,CAAkB2B,MAA1B,MAAgC,IAAhC,IAAgCzD,EAAA,KAAA,KAAA,CAAhC,GAAgC,KAAA,CAAhC,GAAgCA,EAAA,CAAEuD,MAAjE,CAFd;AAGE,QAAA,QAAQ,EAAEJ,YAHZ;AAIE,QAAA,MAAM,EAAEI,MAJV;AAKE,QAAA,UAAU,EAAEW,aALd;AAME,QAAA,aAAa,EAAElB,aANjB;AAOE,QAAA,QAAQ,EAAET,QAPZ;AAQE,QAAA,WAAW,EAAEC,WAAAA;OATjB,CAAA,CAAA;AAYD,KAAA;;AACD,IAAA,OAAA;GAfmB,EARvB,EAyBExC,EAAA,CAACiB,YAAY,CAACK,EAAd,CAAA,GAAoB,YAAA;;;AAClB,IAAA,IAAI,CAAAQ,OAAO,KAAA,IAAP,IAAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAAA,OAAO,CAAEG,WAAT,MAAyB,MAA7B,EAAqC;AACnC,MAAA,oBACE3B,6BAAC8E,oBAAD,EAAA;AACE,QAAA,OAAO,EAAEtD,OADX;QAEE,UAAU,EAAEe,kBAAkB,KAAA,IAAlB,IAAAA,kBAAkB,KAAlB,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,kBAAkB,CAAEsC,UAApB,CAA+B,CAACnF,EAAA,GAAA8B,OAAuB,KAAvB,IAAA,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAkB2B,MAA1B,MAAgC,IAAhC,IAAgCzD,EAAA,KAAA,KAAA,CAAhC,GAAgC,KAAA,CAAhC,GAAgCA,EAAA,CAAEuD,MAAjE,CAFd;AAGE,QAAA,MAAM,EAAEA,MAHV;AAIE,QAAA,QAAQ,EAAEQ,WAJZ;AAKE,QAAA,QAAQ,EAAEZ,YALZ;AAME,QAAA,UAAU,EAAEe,aANd;AAOE,QAAA,aAAa,EAAElB,aAPjB;AAQE,QAAA,QAAQ,EAAET,QARZ;AASE,QAAA,WAAW,EAAEC,WAAAA;OAVjB,CAAA,CAAA;AAaD,KAAA;;AACD,IAAA,OAAA;GAhBiB,EAzBrB,EA2CExC,EAAA,CAACiB,YAAY,CAACI,SAAd,CAAA,GAA2B,YAAA;;;AACzB,IAAA,IAAI,CAAAS,OAAO,KAAA,IAAP,IAAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAAA,OAAO,CAAEG,WAAT,MAAyB,MAA7B,EAAqC;AACnC,MAAA,oBACE3B,6BAAC+E,2BAAD,EAAA;AACE,QAAA,OAAO,EAAEvD,OADX;QAEE,UAAU,EAAEe,kBAAkB,KAAA,IAAlB,IAAAA,kBAAkB,KAAlB,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,kBAAkB,CAAEsC,UAApB,CAA+B,CAACnF,EAAA,GAAA8B,OAAuB,KAAvB,IAAA,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAkB2B,MAA1B,MAAgC,IAAhC,IAAgCzD,EAAA,KAAA,KAAA,CAAhC,GAAgC,KAAA,CAAhC,GAAgCA,EAAA,CAAEuD,MAAjE,CAFd;AAGE,QAAA,QAAQ,EAAEJ,YAHZ;AAIE,QAAA,MAAM,EAAEI,MAJV;AAKE,QAAA,UAAU,EAAEW,aALd;AAME,QAAA,aAAa,EAAElB,aANjB;AAOE,QAAA,OAAO,EAAEqB,iBAPX;AAQE,QAAA,QAAQ,EAAE9B,QARZ;AASE,QAAA,WAAW,EAAEC,WAAAA;OAVjB,CAAA,CAAA;AAaD,KAAA;;AACD,IAAA,OAAA;GAhBwB,EA3C5B,EA6DExC,EAAA,CAACiB,YAAY,CAACE,IAAd,CAAA,GAAsB,YAAA;;;AACpB,IAAA,IAAI,CAAAW,OAAO,KAAA,IAAP,IAAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAAA,OAAO,CAAEG,WAAT,MAAyB,MAA7B,EAAqC;AACnC,MAAA,oBACE3B,6BAACgF,sBAAD,EAAA;AACE,QAAA,OAAO,EAAExD,OADX;QAEE,UAAU,EAAEe,kBAAkB,KAAA,IAAlB,IAAAA,kBAAkB,KAAlB,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,kBAAkB,CAAEsC,UAApB,CAA+B,CAACnF,EAAA,GAAA8B,OAAuB,KAAvB,IAAA,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAkB2B,MAA1B,MAAgC,IAAhC,IAAgCzD,EAAA,KAAA,KAAA,CAAhC,GAAgC,KAAA,CAAhC,GAAgCA,EAAA,CAAEuD,MAAjE,CAFd;AAGE,QAAA,MAAM,EAAEA,MAHV;AAIE,QAAA,QAAQ,EAAEJ,YAJZ;AAKE,QAAA,QAAQ,EAAEY,WALZ;AAME,QAAA,UAAU,EAAEG,aANd;AAOE,QAAA,aAAa,EAAElB,aAPjB;AAQE,QAAA,QAAQ,EAAET,QARZ;AASE,QAAA,WAAW,EAAEC,WAAAA;OAVjB,CAAA,CAAA;AAaD,KAAA;;AACD,IAAA,OAAA;GAhBmB,EA7DvB,EA+EExC,EAAA,CAACiB,YAAY,CAACM,OAAd,CAAA,GAAyB,YAAA;AACvB,IAAA,OADuB;AAGvB;AACA;AACD,GALuB,EA/E1B,EAqFEvB,EArFF,EAqFE6B,cAAc,CAACC,OAAD,CArFhB,CAfJ,EAwGImC,UAAU,iBACR3D,6BAAC,kBAAD,EAAA;AACE,IAAA,YAAY,EAAE,YAAA;MAAM,OAAA4D,aAAa,CAAC,KAAD,CAAb,CAAA;KADtB;AAEE,IAAA,eAAe,EAAE,YAAA;AACf,MAAA,IAAI,CAAApC,OAAO,KAAA,IAAP,IAAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAAA,OAAO,CAAEG,WAAT,MAAyB,OAA7B,EAAsC;QACpCa,aAAa,CAAChB,OAAD,CAAb,CAAA;AACD,OAAA;AACF,KAAA;GA/GT,CAAA,EAoHKsC,cAAc,IAAI,CAAAtC,OAAO,KAAP,IAAA,IAAAA,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,OAAO,CAAEG,WAAT,MAAyB,MAA5C,iBACE3B,cAAA,CAAA,aAAA,CAAC,UAAD,EAAA;AACE,IAAA,OAAO,EAAE,YAAA;MAAM,OAAA+D,iBAAiB,CAAC,KAAD,CAAjB,CAAA;KADjB;AAEE,IAAA,OAAO,EAAEvC,OAFX;AAGE,IAAA,QAAQ,EAAE,YAAA;MAAM,OAAAgB,aAAa,CAAChB,OAAD,CAAb,CAAA;KAHlB;AAIE,IAAA,MAAM,EAAE0C,MAAAA;AAJV,GAAA,CArHN,CADF,CAAA;AA+ID;;;;"}