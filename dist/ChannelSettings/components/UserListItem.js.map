{"version":3,"file":"UserListItem.js","sources":["../../../src/smart-components/ChannelSettings/components/UserListItem/index.tsx"],"sourcesContent":["import React, { ReactElement, useRef, useContext } from 'react';\nimport { User } from '@sendbird/chat';\n\nimport { LocalizationContext } from '../../../../lib/LocalizationContext';\nimport { UserProfileContext } from '../../../../lib/UserProfileContext';\nimport Avatar from '../../../../ui/Avatar/index';\nimport MutedAvatarOverlay from '../../../../ui/Avatar/MutedAvatarOverlay';\nimport Label, { LabelTypography, LabelColors } from '../../../../ui/Label';\nimport UserProfile from '../../../../ui/UserProfile';\nimport ContextMenu, { MenuItems } from '../../../../ui/ContextMenu';\n\nimport './user-list-item.scss';\n\nconst COMPONENT_NAME = 'sendbird-user-list-item--small';\n\ninterface ActionProps {\n  actionRef: React.RefObject<HTMLInputElement>;\n  parentRef: React.RefObject<HTMLInputElement>;\n}\n\ntype CustomUser = User & {\n  isMuted: boolean;\n  role: string;\n};\n\ninterface Props {\n  user: CustomUser;\n  currentUser?: string;\n  className?: string;\n  action?(props: ActionProps): ReactElement;\n}\n\nconst UserListItem = ({\n  user,\n  className,\n  currentUser,\n  action,\n}: Props): ReactElement => {\n  const actionRef = useRef(null);\n  const parentRef = useRef(null);\n  const avatarRef = useRef(null);\n  const { stringSet } = useContext(LocalizationContext);\n  const {\n    disableUserProfile,\n    renderUserProfile,\n  } = useContext<UserProfileContext>(UserProfileContext);\n  const injectingClassNames = Array.isArray(className) ? className : [className];\n  return (\n    <div\n      ref={parentRef}\n      className={[\n        COMPONENT_NAME, ...injectingClassNames,\n      ].join(' ')}\n    >\n      <ContextMenu\n        menuTrigger={(toggleDropdown) => (\n          <Avatar\n            onClick={() => {\n              if (!disableUserProfile) {\n                toggleDropdown();\n              }\n            }}\n            ref={avatarRef}\n            className={`${COMPONENT_NAME}__avatar`}\n            src={user.profileUrl}\n            width={24}\n            height={24}\n          />\n        )}\n        menuItems={(closeDropdown) => (\n          <MenuItems\n            openLeft\n            parentRef={avatarRef}\n            // for catching location(x, y) of MenuItems\n            parentContainRef={avatarRef}\n            // for toggling more options(menus & reactions)\n            closeDropdown={closeDropdown}\n            style={{ paddingTop: '0px', paddingBottom: '0px' }}\n          >\n            {\n              renderUserProfile\n                ? renderUserProfile({\n                  user,\n                  currentUserId: currentUser,\n                  close: closeDropdown,\n                })\n                : (\n                  <UserProfile\n                    user={user}\n                    currentUserId={currentUser}\n                    onSuccess={closeDropdown}\n                  />\n                )\n            }\n          </MenuItems>\n        )}\n      />\n      {\n        user.isMuted && (\n          <MutedAvatarOverlay />\n        )\n      }\n      <Label\n        className={`${COMPONENT_NAME}__title`}\n        type={LabelTypography.SUBTITLE_1}\n        color={LabelColors.ONBACKGROUND_1}\n      >\n        {user.nickname || stringSet.NO_NAME}\n        {\n          (currentUser === user.userId) && (\n            stringSet.CHANNEL_SETTING__MEMBERS__YOU\n          )\n        }\n      </Label>\n      { // if there is now nickname, display userId\n        !user.nickname && (\n          <Label\n            className={`${COMPONENT_NAME}__subtitle`}\n            type={LabelTypography.CAPTION_3}\n            color={LabelColors.ONBACKGROUND_2}\n          >\n            {user.userId}\n          </Label>\n        )\n      }\n      {\n        user.role === 'operator' && (\n          <Label\n            className={`${COMPONENT_NAME}__operator`}\n            type={LabelTypography.SUBTITLE_2}\n            color={LabelColors.ONBACKGROUND_2}\n          >\n            {stringSet.CHANNEL_SETTING__MEMBERS__OPERATOR}\n          </Label>\n        )\n      }\n      {\n        action && (\n          <div ref={actionRef} className={`${COMPONENT_NAME}__action`}>\n            {action({ actionRef, parentRef })}\n          </div>\n        )\n      }\n    </div>\n  );\n}\n\nexport default UserListItem;\n"],"names":["COMPONENT_NAME","UserListItem","_a","user","className","currentUser","action","actionRef","useRef","parentRef","avatarRef","stringSet","useContext","LocalizationContext","_b","UserProfileContext","disableUserProfile","renderUserProfile","injectingClassNames","Array","isArray","React","__spreadArray","join","toggleDropdown","concat","profileUrl","closeDropdown","paddingTop","paddingBottom","currentUserId","close","isMuted","LabelTypography","SUBTITLE_1","LabelColors","ONBACKGROUND_1","nickname","NO_NAME","userId","CHANNEL_SETTING__MEMBERS__YOU","CAPTION_3","ONBACKGROUND_2","role","SUBTITLE_2","CHANNEL_SETTING__MEMBERS__OPERATOR"],"mappings":"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"}