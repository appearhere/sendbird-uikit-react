{"version":3,"file":"OpenChannelProvider-b1de2e4c.js","sources":["../../src/smart-components/OpenChannel/context/utils.ts","../../src/smart-components/OpenChannel/context/dux/actionTypes.ts","../../src/smart-components/OpenChannel/context/dux/reducers.ts","../../src/smart-components/OpenChannel/context/dux/initialState.ts","../../src/smart-components/OpenChannel/context/hooks/useSetChannel.ts","../../src/smart-components/OpenChannel/context/hooks/useHandleChannelEvents.ts","../../src/smart-components/OpenChannel/context/hooks/useInitialMessagesFetch.ts","../../src/smart-components/OpenChannel/context/hooks/useScrollCallback.ts","../../src/smart-components/OpenChannel/context/hooks/useCheckScrollBottom.ts","../../src/smart-components/OpenChannel/context/hooks/useSendMessageCallback.ts","../../src/smart-components/OpenChannel/context/hooks/useFileUploadCallback.ts","../../src/smart-components/OpenChannel/context/hooks/useUpdateMessageCallback.ts","../../src/smart-components/OpenChannel/context/hooks/useDeleteMessageCallback.ts","../../src/smart-components/OpenChannel/context/hooks/useResendMessageCallback.ts","../../src/smart-components/OpenChannel/context/hooks/useTrimMessageList.ts","../../src/smart-components/OpenChannel/context/OpenChannelProvider.tsx"],"sourcesContent":["import type React from 'react';\nimport type { User } from '@sendbird/chat';\nimport type { AdminMessage, FileMessage, UserMessage } from '@sendbird/chat/message';\nimport type { OpenChannel, ParticipantListQuery } from '@sendbird/chat/openChannel';\nimport format from 'date-fns/format';\n\nimport { Logger } from '../../../lib/SendbirdState';\n\nexport const getMessageCreatedAt = (message: UserMessage | FileMessage): string => format(message.createdAt, 'p');\n\nexport const shouldFetchMore = (messageLength: number, maxMessages: number): boolean => {\n  if (typeof maxMessages !== 'number') {\n    return true;\n  }\n\n  if (typeof maxMessages === 'number'\n    && maxMessages > messageLength\n  ) {\n    return true;\n  }\n  return false;\n}\n\nexport const scrollIntoLast = (initialTry = 0, scrollRef: React.RefObject<HTMLElement>): void => {\n  const MAX_TRIES = 10;\n  const currentTry = initialTry;\n  if (currentTry > MAX_TRIES) {\n    return;\n  }\n  try {\n    const scrollDOM = scrollRef?.current || document.querySelector('.sendbird-openchannel-conversation-scroll__container__item-container');\n    // eslint-disable-next-line no-multi-assign\n    scrollDOM.scrollTop = scrollDOM.scrollHeight;\n  } catch (error) {\n    setTimeout(() => {\n      scrollIntoLast(currentTry + 1, scrollRef);\n    }, 500 * currentTry);\n  }\n};\n\nexport const isSameGroup = (\n  message: AdminMessage | UserMessage | FileMessage,\n  comparingMessage: AdminMessage | UserMessage | FileMessage,\n): boolean => {\n  if (!(\n    message\n    && comparingMessage\n    && message?.messageType\n    && message.messageType !== 'admin'\n    && comparingMessage?.messageType\n    && comparingMessage.messageType !== 'admin'\n    && (message as UserMessage | FileMessage)?.sender\n    && (comparingMessage as UserMessage | FileMessage)?.sender\n    && message?.createdAt\n    && comparingMessage?.createdAt\n    && (message as UserMessage | FileMessage)?.sender?.userId\n    && (comparingMessage as UserMessage | FileMessage)?.sender?.userId\n  )) {\n    return false\n  }\n  // to fix typecasting\n  const message_ = message as UserMessage;\n  const comparingMessage_ = comparingMessage as UserMessage;\n  return (\n    message_?.sendingStatus === comparingMessage_?.sendingStatus\n    && message_?.sender?.userId === comparingMessage_?.sender?.userId\n    && (\n      getMessageCreatedAt(message as UserMessage | FileMessage) === getMessageCreatedAt(comparingMessage as UserMessage | FileMessage)\n    )\n  );\n};\n\nexport const compareMessagesForGrouping = (\n  prevMessage: AdminMessage | UserMessage | FileMessage,\n  currMessage: AdminMessage | UserMessage | FileMessage,\n  nextMessage: AdminMessage | UserMessage | FileMessage,\n): [boolean, boolean] => (\n  [\n    isSameGroup(prevMessage, currMessage),\n    isSameGroup(currMessage, nextMessage),\n  ]\n);\n\nexport const kFormatter = (num: number): string => {\n  if (Math.abs(num) > 999999) {\n    return `${(Math.abs(num) / 1000000).toFixed(1)}M`;\n  }\n\n  if (Math.abs(num) > 999) {\n    return `${(Math.abs(num) / 1000).toFixed(1)}K`;\n  }\n\n  return `${num}`;\n};\n\nexport const isOperator = (openChannel: OpenChannel, userId: string): boolean => {\n  const operators = openChannel?.operators;\n  if (operators.map(operator => operator.userId).indexOf(userId) < 0) {\n    return false;\n  }\n  return true;\n};\n\nexport const isDisabledBecauseFrozen = (openChannel: OpenChannel, userId: string): boolean => {\n  const isFrozen = openChannel?.isFrozen;\n  return isFrozen && !isOperator(openChannel, userId);\n};\n\nexport const isDisabledBecauseMuted = (mutedParticipantIds: Array<string>, userId: string): boolean => {\n  return mutedParticipantIds.indexOf(userId) > -1;\n};\n\nexport const fetchWithListQuery = (\n  listQuery: ParticipantListQuery,\n  logger: Logger,\n  eachQueryNextCallback: (users: Array<User>) => void,\n): void => {\n  const fetchList = (query: ParticipantListQuery) => {\n    const { hasNext } = query;\n    if (hasNext) {\n      query.next().then((users) => {\n        eachQueryNextCallback(users);\n        fetchList(query);\n      }).catch((error) => {\n        logger.warning('OpenChannel | FetchUserList failed', error);\n      });\n    } else {\n      logger.info('OpenChannel | FetchUserList finished');\n    }\n  };\n  logger.info('OpenChannel | FetchUserList start', listQuery);\n  fetchList(listQuery);\n};\n\nexport const pxToNumber = (px: string | number): number | void => {\n  if (typeof px === 'number') {\n    return px;\n  }\n  if (typeof px === 'string') {\n    const parsed = Number.parseFloat(px);\n    if (!Number.isNaN(parsed)) {\n      return parsed;\n    }\n  }\n  return null;\n};\n","export const SET_CURRENT_CHANNEL = 'SET_CURRENT_CHANNEL';\nexport const SET_CHANNEL_INVALID = 'SET_CHANNEL_INVALID';\nexport const RESET_MESSAGES = 'RESET_MESSAGES';\nexport const EXIT_CURRENT_CHANNEL = 'EXIT_CURRENT_CHANNEL';\nexport const GET_PREV_MESSAGES_START = 'GET_PREV_MESSAGES_START';\nexport const GET_PREV_MESSAGES_SUCESS = 'GET_PREV_MESSAGES_SUCESS';\nexport const GET_PREV_MESSAGES_FAIL = 'GET_PREV_MESSAGES_FAIL';\nexport const SENDING_MESSAGE_FAILED = 'SENDING_MESSAGE_FAILED';\nexport const SENDING_MESSAGE_SUCCEEDED = 'SENDING_MESSAGE_SUCCEEDED';\nexport const SENDING_MESSAGE_START = 'SENDING_MESSAGE_START';\nexport const RESENDING_MESSAGE_START = 'RESENDING_MESSAGE_START';\nexport const FETCH_PARTICIPANT_LIST = 'FETCH_PARTICIPANT_LIST';\nexport const FETCH_BANNED_USER_LIST = 'FETCH_BANNED_USER_LIST';\nexport const FETCH_MUTED_USER_LIST= 'FETCH_MUTED_USER_LIST';\nexport const TRIM_MESSAGE_LIST= 'TRIM_MESSAGE_LIST';\n\n// event handlers\nexport const ON_MESSAGE_RECEIVED = 'ON_MESSAGE_RECEIVED';\nexport const ON_MESSAGE_UPDATED = 'ON_MESSAGE_UPDATED';\nexport const ON_MESSAGE_DELETED = 'ON_MESSAGE_DELETED';\nexport const ON_MESSAGE_DELETED_BY_REQ_ID = 'ON_MESSAGE_DELETED_BY_REQ_ID';\nexport const ON_OPERATOR_UPDATED = 'ON_OPERATOR_UPDATED';\nexport const ON_USER_ENTERED = 'ON_USER_ENTERED';\nexport const ON_USER_EXITED = 'ON_USER_EXITED';\nexport const ON_USER_MUTED = 'ON_USER_MUTED';\nexport const ON_USER_UNMUTED = 'ON_USER_UNMUTED';\nexport const ON_USER_BANNED = 'ON_USER_BANNED';\nexport const ON_USER_UNBANNED = 'ON_USER_UNBANNED';\nexport const ON_CHANNEL_FROZEN = 'ON_CHANNEL_FROZEN';\nexport const ON_CHANNEL_UNFROZEN = 'ON_CHANNEL_UNFROZEN';\nexport const ON_CHANNEL_CHANGED = 'ON_CHANNEL_CHANGED';\nexport const ON_CHANNEL_DELETED = 'ON_CHANNEL_DELETED';\nexport const ON_META_DATA_CREATED = 'ON_META_DATA_CREATED';\nexport const ON_META_DATA_UPDATED = 'ON_META_DATA_UPDATED';\nexport const ON_META_DATA_DELETED = 'ON_META_DATA_DELETED';\nexport const ON_META_COUNTERS_CREATED = 'ON_META_COUNTERS_CREATED';\nexport const ON_META_COUNTERS_UPDATED = 'ON_META_COUNTERS_UPDATED';\nexport const ON_META_COUNTERS_DELETED = 'ON_META_COUNTERS_DELETED';\nexport const ON_MENTION_RECEIVED = 'ON_MENTION_RECEIVED';\n","import { State as initialStateInterface } from './initialState';\nimport * as actionTypes from './actionTypes';\n\nimport compareIds from '../../../../utils/compareIds.js';\nimport { FileMessage, UserMessage } from '@sendbird/chat/message';\n\n/* eslint-disable  @typescript-eslint/no-explicit-any */\n// @ts-ignore: Unreachable code error\ninterface ActionInterface {\n  type: string;\n  payload?: any;\n}\n\nexport default function reducer(\n  state: initialStateInterface,\n  action: ActionInterface,\n): initialStateInterface {\n  switch (action.type) {\n    case actionTypes.RESET_MESSAGES: {\n      return {\n        ...state,\n        allMessages: [],\n      };\n    }\n    case actionTypes.EXIT_CURRENT_CHANNEL: {\n      if (action.payload?.url === state.currentOpenChannel?.url) {\n        return {\n          ...state,\n          currentOpenChannel: null,\n        };\n      }\n      return state;\n    }\n    case actionTypes.SET_CURRENT_CHANNEL: {\n      const gottenChannel = action.payload;\n      const operators = gottenChannel.operators;\n      if (\n        !state.isInvalid\n        && state.currentOpenChannel\n        && state.currentOpenChannel.url\n        && (state.currentOpenChannel.url === gottenChannel.url)\n      ) {\n        return state;\n      }\n      return {\n        ...state,\n        currentOpenChannel: gottenChannel,\n        isInvalid: false,\n        operators: operators,\n        participants: operators,\n        bannedParticipantIds: [],\n        mutedParticipantIds: [],\n      };\n    }\n    case actionTypes.SET_CHANNEL_INVALID: {\n      return {\n        ...state,\n        isInvalid: true,\n      };\n    }\n    case actionTypes.GET_PREV_MESSAGES_START: {\n      return {\n        ...state,\n        loading: true,\n      };\n    }\n    case actionTypes.GET_PREV_MESSAGES_SUCESS:\n    case actionTypes.GET_PREV_MESSAGES_FAIL: {\n      const isFailed = (action.type === actionTypes.GET_PREV_MESSAGES_FAIL);\n      const {\n        currentOpenChannel = {},\n        messages = [],\n        hasMore,\n        lastMessageTimestamp,\n      } = action.payload;\n      const actionChannelUrl = currentOpenChannel.url;\n      const receivedMessages = isFailed ? [] : messages;\n      const _hasMore = isFailed ? false : hasMore;\n      const _lastMessageTimestamp = isFailed ? 0 : lastMessageTimestamp;\n\n      const stateChannel = state.currentOpenChannel;\n      const stateChannelUrl = stateChannel.url;\n\n      if (actionChannelUrl !== stateChannelUrl) {\n        return state;\n      }\n\n      const filteredAllMessages = state.allMessages.filter((message) => (\n        !(receivedMessages.find(({ messageId }) => compareIds(messageId, message.messageId)))\n      ));\n      return {\n        ...state,\n        loading: false,\n        initialized: true,\n        hasMore: _hasMore,\n        lastMessageTimestamp: _lastMessageTimestamp,\n        allMessages: [\n          ...receivedMessages,\n          ...filteredAllMessages,\n        ],\n      };\n    }\n    case actionTypes.SENDING_MESSAGE_START: {\n      const {\n        message,\n        channel,\n      } = action.payload;\n      if (channel?.url !== state.currentOpenChannel.url\n        || state.allMessages.some((m) => (m as UserMessage | FileMessage).reqId === message.reqId)\n        // Handing failed first than sending start issue\n      ) {\n        return state;\n      }\n      return {\n        ...state,\n        allMessages: [\n          ...state.allMessages,\n          message,\n        ],\n      };\n    }\n    case actionTypes.SENDING_MESSAGE_SUCCEEDED: {\n      const sentMessage = action.payload;\n      const newMessages = state.allMessages.map((m) => (\n        compareIds((m as UserMessage | FileMessage).reqId, sentMessage.reqId) ? sentMessage : m\n      ));\n      return {\n        ...state,\n        allMessages: newMessages,\n      };\n    }\n    case actionTypes.SENDING_MESSAGE_FAILED: {\n      const sentMessage = action.payload;\n      sentMessage.sendingStatus = 'failed';\n      if (!(state.allMessages.some((m) => (m as UserMessage | FileMessage)?.reqId === sentMessage?.reqId))) {\n        // Handling failed first than sending start issue\n        return {\n          ...state,\n          allMessages: [\n            ...state.allMessages.filter((m) => !compareIds((m as UserMessage | FileMessage).reqId, sentMessage)),\n            sentMessage,\n          ],\n        };\n      } else {\n        return {\n          ...state,\n          allMessages: state.allMessages.map((m) => (\n            compareIds((m as UserMessage | FileMessage).reqId, sentMessage.reqId) ? sentMessage : m\n          )),\n        };\n      }\n    }\n    case actionTypes.TRIM_MESSAGE_LIST: {\n      const { allMessages } = state;\n      const messageLimit = action.payload?.messageLimit;\n      if (messageLimit\n        && messageLimit > 0\n        && allMessages?.length > messageLimit\n      ) {\n        const sliceAt = allMessages.length - messageLimit;\n        return {\n          ...state,\n          allMessages: allMessages.slice(sliceAt),\n        }\n      }\n      return state;\n    }\n    case actionTypes.RESENDING_MESSAGE_START: {\n      const eventedChannel = action.payload.channel;\n      const resentMessage = action.payload.message;\n      if (eventedChannel.url !== state.currentOpenChannel.url) {\n        return state;\n      }\n      return {\n        ...state,\n        allMessages: state.allMessages.map((m) => (\n          compareIds((m as UserMessage | FileMessage).reqId, resentMessage.reqId) ? resentMessage : m\n        )),\n      };\n    }\n    case actionTypes.FETCH_PARTICIPANT_LIST: {\n      const eventedChannel = action.payload.channel;\n      const fetchedParticipantList = action.payload.users;\n      if (eventedChannel.url !== state.currentOpenChannel.url) {\n        return state;\n      }\n      return {\n        ...state,\n        participants: [...state.participants, ...fetchedParticipantList],\n        // Should check duplication\n      };\n    }\n    case actionTypes.FETCH_BANNED_USER_LIST: {\n      const eventedChannel = action.payload.channel;\n      const fetchedBannedUserList = action.payload.users;\n      if (\n        (eventedChannel.url !== state.currentOpenChannel.url)\n        || !(fetchedBannedUserList.every(user => typeof user.userId === 'string'))\n      ) {\n        return state;\n      }\n      return {\n        ...state,\n        bannedParticipantIds: [\n          ...state.bannedParticipantIds,\n          ...fetchedBannedUserList.map(user => user.userId),\n        ],\n        // Should check duplication\n      };\n    }\n    case actionTypes.FETCH_MUTED_USER_LIST: {\n      const eventedChannel = action.payload.channel;\n      const fetchedMutedUserList = action.payload.users;\n      if (\n        (eventedChannel.url !== state.currentOpenChannel.url)\n        || !(fetchedMutedUserList.every(user => typeof user.userId === 'string'))\n      ) {\n        return state;\n      }\n      return {\n        ...state,\n        mutedParticipantIds: [\n          ...state.mutedParticipantIds,\n          ...fetchedMutedUserList.map(user => user.userId),\n        ],\n        // Should check duplication\n      };\n    }\n    // events\n    case actionTypes.ON_MESSAGE_RECEIVED: {\n      const eventedChannel = action.payload.channel;\n      const receivedMessage = action.payload.message;\n\n      const {\n        currentOpenChannel\n      } = state;\n\n      if (\n        !compareIds(eventedChannel.url, currentOpenChannel.url)\n        || (\n          !(state.allMessages.map(\n            (message) => message.messageId).indexOf(receivedMessage.messageId) < 0\n          ))\n      ) {\n        return state;\n      }\n\n      return {\n        ...state,\n        allMessages: [...state.allMessages, receivedMessage],\n      };\n    }\n    case actionTypes.ON_MESSAGE_UPDATED: {\n      const eventedChannel = action.payload.channel;\n      const updatedMessage = action.payload.message;\n      const currentChannel = state.currentOpenChannel;\n      if (!currentChannel || currentChannel.url && (currentChannel.url !== eventedChannel.url)) {\n        return state;\n      }\n      return {\n        ...state,\n        allMessages: state.allMessages.map((message) => (\n          message.isIdentical(updatedMessage)\n            ? updatedMessage\n            : message\n        )),\n      };\n    }\n    case actionTypes.ON_MESSAGE_DELETED: {\n      const eventedChannel = action.payload.channel;\n      const deletedMessageId = action.payload.messageId;\n      const currentChannel = state.currentOpenChannel;\n      if (!currentChannel || currentChannel.url && (currentChannel.url !== eventedChannel.url)) {\n        return state;\n      }\n      return {\n        ...state,\n        allMessages: state.allMessages.filter((message) => (\n          !compareIds(message.messageId, deletedMessageId)\n        )),\n      };\n    }\n    case actionTypes.ON_MESSAGE_DELETED_BY_REQ_ID: {\n      return {\n        ...state,\n        allMessages: state.allMessages.filter((m) => (\n          !compareIds((m as UserMessage | FileMessage).reqId, action.payload)\n        )),\n      };\n    }\n    case actionTypes.ON_OPERATOR_UPDATED: {\n      const eventedChannel = action.payload.channel;\n      const updatedOperators = action.payload.operators;\n      const currentChannel = state.currentOpenChannel;\n      if (!currentChannel || currentChannel.url && (currentChannel.url !== eventedChannel.url)) {\n        return state;\n      }\n      return {\n        ...state,\n        currentOpenChannel: eventedChannel,\n        operators: updatedOperators,\n      };\n    }\n    case actionTypes.ON_USER_ENTERED: {\n      const eventedChannel = action.payload.channel;\n      const enteredUser = action.payload.user;\n      const currentChannel = state.currentOpenChannel;\n      if (!currentChannel || currentChannel.url && (currentChannel.url !== eventedChannel.url)) {\n        return state;\n      }\n      return {\n        ...state,\n        participants: [...state.participants, enteredUser],\n      };\n    }\n    case actionTypes.ON_USER_EXITED: {\n      const eventedChannel = action.payload.channel;\n      const exitedUser = action.payload.user;\n      const currentChannel = state.currentOpenChannel;\n      if (!currentChannel || currentChannel.url && (currentChannel.url !== eventedChannel.url)) {\n        return state;\n      }\n      return {\n        ...state,\n        participants: state.participants.filter((participant) => (\n          !compareIds(participant.userId, exitedUser.userId)\n        )),\n      };\n    }\n    case actionTypes.ON_USER_MUTED: {\n      const eventedChannel = action.payload.channel;\n      const mutedUser = action.payload.user;\n      const currentChannel = state.currentOpenChannel;\n      if (\n        !currentChannel\n        || (currentChannel.url && (currentChannel.url !== eventedChannel.url))\n        || state.mutedParticipantIds.indexOf(mutedUser.userId) >= 0\n      ) {\n        return state;\n      }\n      return {\n        ...state,\n        mutedParticipantIds: [...state.mutedParticipantIds, mutedUser.userId],\n      };\n    }\n    case actionTypes.ON_USER_UNMUTED: {\n      const eventedChannel = action.payload.channel;\n      const unmutedUser = action.payload.user;\n      const currentChannel = state.currentOpenChannel;\n      if (\n        !currentChannel\n        || (currentChannel.url && (currentChannel.url !== eventedChannel.url))\n        || state.mutedParticipantIds.indexOf(unmutedUser.userId) < 0\n      ) {\n        return state;\n      }\n      return {\n        ...state,\n        mutedParticipantIds: state.mutedParticipantIds.filter(userId => userId !== unmutedUser.userId),\n      };\n    }\n    case actionTypes.ON_USER_BANNED: {\n      const eventedChannel = action.payload.channel;\n      const bannedUser = action.payload.user;\n      const currentUser = action.payload.currentUser;\n      const currentChannel = state.currentOpenChannel;\n      if (currentChannel?.url === eventedChannel?.url && bannedUser?.userId === currentUser?.userId) {\n        return {\n          ...state,\n          currentOpenChannel: null,\n        }\n      } else if (currentChannel?.url === eventedChannel?.url) {\n        return {\n          ...state,\n          bannedParticipantIds: [...state.bannedParticipantIds, bannedUser.userId],\n        }\n      }\n      return state;\n    }\n    case actionTypes.ON_USER_UNBANNED: {\n      const eventedChannel = action.payload.channel;\n      const unbannedUser = action.payload.user;\n      const currentChannel = state.currentOpenChannel;\n      if (currentChannel?.url === eventedChannel?.url) {\n        return {\n          ...state,\n          bannedParticipantIds: state.bannedParticipantIds.filter((userId) => userId !== unbannedUser.userId),\n        }\n      }\n      return state;\n    }\n    case actionTypes.ON_CHANNEL_FROZEN: {\n      const frozenChannel = action.payload;\n      const currentChannel = state.currentOpenChannel;\n      if (!currentChannel || currentChannel.url && (currentChannel.url !== frozenChannel.url)) {\n        return state;\n      }\n      return {\n        ...state,\n        frozen: true,\n      };\n    }\n    case actionTypes.ON_CHANNEL_UNFROZEN: {\n      const unfrozenChannel = action.payload;\n      const currentChannel = state.currentOpenChannel;\n      if (!currentChannel || currentChannel.url && (currentChannel.url !== unfrozenChannel.url)) {\n        return state;\n      }\n      return {\n        ...state,\n        frozen: false,\n      };\n    }\n    case actionTypes.ON_CHANNEL_CHANGED: {\n      const changedChannel = action.payload;\n      const currentChannel = state.currentOpenChannel;\n      if (!currentChannel || currentChannel.url && (currentChannel.url !== changedChannel.url)) {\n        return state;\n      }\n      return {\n        ...state,\n        currentOpenChannel: changedChannel,\n      };\n    }\n    case actionTypes.ON_CHANNEL_DELETED: {\n      const deletedChannelUrl = action.payload;\n      const currentChannel = state?.currentOpenChannel;\n      if (currentChannel?.url === deletedChannelUrl) {\n        return {\n          ...state,\n          currentOpenChannel: null,\n        }\n      }\n      return state;\n    }\n    case actionTypes.ON_META_DATA_CREATED: {\n      // const eventedChannel = action.payload.channel;\n      // const createdMetaData = action.payload.metaData;\n      // return {\n      //   ...state\n      // };\n      return state;\n    }\n    case actionTypes.ON_META_DATA_UPDATED: {\n      // const eventedChannel = action.payload.channel;\n      // const updatedMetaData = action.payload.metaData;\n      // return {\n      //   ...state\n      // };\n      return state;\n    }\n    case actionTypes.ON_META_DATA_DELETED: {\n      // const eventedChannel = action.payload.channel;\n      // const deletedMetaDataKeys = action.payload.metaDataKeys;\n      // return {\n      //   ...state\n      // };\n      return state;\n    }\n    case actionTypes.ON_META_COUNTERS_CREATED: {\n      // const eventedChannel = action.payload.channel;\n      // const createdMetaCounter = action.payload.metaCounter;\n      // return {\n      //   ...state\n      // };\n      return state;\n    }\n    case actionTypes.ON_META_COUNTERS_UPDATED: {\n      // const eventedChannel = action.payload.channel;\n      // const updatedMetaCounter = action.payload.metaCounter;\n      // return {\n      //   ...state\n      // };\n      return state;\n    }\n    case actionTypes.ON_META_COUNTERS_DELETED: {\n      // const eventedChannel = action.payload.channel;\n      // const deletedMetaCounterKeys = action.payload.metaCounterKeys;\n      // return {\n      //   ...state\n      // };\n      return state;\n    }\n    case actionTypes.ON_MENTION_RECEIVED: {\n      // const eventedChannel = action.payload.channel;\n      // const mentionedMessage = action.payload.message;\n      // return {\n      //   ...state\n      // };\n      return state;\n    }\n    default:\n      return state;\n  }\n}\n","import type { User } from '@sendbird/chat';\nimport { AdminMessage, FileMessage, UserMessage } from '@sendbird/chat/message';\nimport type { OpenChannel } from '@sendbird/chat/openChannel';\n\nexport interface State {\n  allMessages: Array<AdminMessage | UserMessage | FileMessage>;\n  loading: boolean;\n  initialized: boolean;\n  currentOpenChannel: OpenChannel;\n  isInvalid: boolean;\n  hasMore: boolean;\n  lastMessageTimestamp: number;\n  frozen: boolean;\n  operators: Array<User>;\n  participants: Array<User>;\n  bannedParticipantIds: Array<string>;\n  mutedParticipantIds: Array<string>;\n}\n\nconst initialState: State = {\n  allMessages: [],\n  loading: false,\n  initialized: false,\n  currentOpenChannel: null,\n  isInvalid: false,\n  hasMore: false,\n  lastMessageTimestamp: 0,\n  frozen: false,\n  operators: [],\n  participants: [],\n  bannedParticipantIds: [],\n  mutedParticipantIds: [],\n};\n\nexport default initialState;\n","import type { OpenChannel, SendbirdOpenChat } from '@sendbird/chat/openChannel';\nimport { useEffect } from 'react';\nimport type { Logger } from '../../../../lib/SendbirdState';\nimport * as messageActionTypes from '../dux/actionTypes';\nimport * as utils from '../utils';\n\ninterface DynamicParams {\n  channelUrl: string;\n  sdkInit: boolean;\n  fetchingParticipants: boolean;\n  userId: string;\n  currentOpenChannel: OpenChannel;\n}\ninterface StaticParams {\n  sdk: SendbirdOpenChat;\n  logger: Logger;\n  messagesDispatcher: ({ type, payload }: { type: string, payload: any }) => void;\n}\n\nfunction useSetChannel(\n  { channelUrl, sdkInit, fetchingParticipants, userId, currentOpenChannel }: DynamicParams,\n  { sdk, logger, messagesDispatcher }: StaticParams,\n): void {\n  useEffect(() => {\n    if (channelUrl && sdkInit && sdk?.openChannel) {\n      if (currentOpenChannel && currentOpenChannel?.exit) {\n        currentOpenChannel.exit?.().then(() => {\n          logger.info('OpenChannel | useSetChannel: Exit from the previous open channel', currentOpenChannel?.url);\n          messagesDispatcher({\n            type: messageActionTypes.EXIT_CURRENT_CHANNEL,\n            payload: currentOpenChannel,\n          });\n        });\n      }\n      logger.info('OpenChannel | useSetChannel: Fetching channel', channelUrl);\n      sdk.openChannel.getChannel(channelUrl).then((openChannel) => {\n        logger.info('OpenChannel | useSetChannel: Succeeded to fetch channel', openChannel);\n        messagesDispatcher({\n          type: messageActionTypes.SET_CURRENT_CHANNEL,\n          payload: openChannel,\n        });\n        openChannel.enter().then(() => {\n          if (openChannel.isOperator(userId)) { // only operator has a permission to fetch these list\n            const bannedParticipantListQuery = openChannel.createBannedUserListQuery();\n            const mutedParticipantListQuery = openChannel.createMutedUserListQuery();\n            utils.fetchWithListQuery(\n              bannedParticipantListQuery,\n              logger,\n              (users) => {\n                messagesDispatcher({\n                  type: messageActionTypes.FETCH_BANNED_USER_LIST,\n                  payload: {\n                    channel: openChannel,\n                    users,\n                  },\n                });\n              },\n            );\n            utils.fetchWithListQuery(\n              mutedParticipantListQuery,\n              logger,\n              (users) => {\n                messagesDispatcher({\n                  type: messageActionTypes.FETCH_MUTED_USER_LIST,\n                  payload: {\n                    channel: openChannel,\n                    users,\n                  },\n                });\n              },\n            );\n          } else {\n            openChannel.getMyMutedInfo()\n              .then((mutedInfo) => {\n                if (mutedInfo?.isMuted) {\n                  messagesDispatcher({\n                    type: messageActionTypes.FETCH_MUTED_USER_LIST,\n                    payload: {\n                      channel: openChannel,\n                      users: [sdk?.currentUser],\n                    },\n                  });\n                }\n              });\n          }\n          if (fetchingParticipants) {\n            // fetch participants list\n            const participantListQuery = openChannel.createParticipantListQuery({\n              limit: openChannel.participantCount,\n            });\n            utils.fetchWithListQuery(\n              participantListQuery,\n              logger,\n              (users) => {\n                messagesDispatcher({\n                  type: messageActionTypes.FETCH_PARTICIPANT_LIST,\n                  payload: {\n                    channel: openChannel,\n                    users,\n                  },\n                });\n              },\n            );\n          }\n        }).catch((error) => {\n          logger.warning('OpenChannel | useSetChannel: Failed to enter channel', { channelUrl, error });\n          messagesDispatcher({\n            type: messageActionTypes.SET_CHANNEL_INVALID,\n            payload: null,\n          });\n        });\n      }).catch((error) => {\n        logger.warning('OpenChannel | useSetChannel: Failed to fetch channel', { channelUrl, error });\n        messagesDispatcher({\n          type: messageActionTypes.SET_CHANNEL_INVALID,\n          payload: null,\n        });\n      });\n    }\n  }, [channelUrl, sdkInit, fetchingParticipants]);\n}\n\nexport default useSetChannel;\n","import { useEffect } from 'react';\nimport { ChannelType } from '@sendbird/chat';\nimport { OpenChannel, OpenChannelHandler, SendbirdOpenChat } from '@sendbird/chat/openChannel';\nimport * as messageActionTypes from '../dux/actionTypes';\nimport uuidv4 from '../../../../utils/uuid';\nimport { scrollIntoLast } from '../utils';\nimport { Logger } from '../../../../lib/SendbirdState';\n\ntype MessagesDispatcherType = {\n  type: string, payload: any,\n}\ninterface DynamicParams {\n  currentOpenChannel: OpenChannel;\n  checkScrollBottom: () => boolean;\n}\ninterface StaticParams {\n  sdk: SendbirdOpenChat;\n  logger: Logger;\n  scrollRef: React.RefObject<HTMLElement>;\n  messagesDispatcher: (props: MessagesDispatcherType) => void;\n}\n\nfunction useHandleChannelEvents(\n  { currentOpenChannel, checkScrollBottom }: DynamicParams,\n  { sdk, logger, messagesDispatcher, scrollRef }: StaticParams,\n): void {\n  useEffect(() => {\n    const messageReceiverId = uuidv4();\n    if (currentOpenChannel && currentOpenChannel.url && sdk?.openChannel?.addOpenChannelHandler) {\n      logger.info('OpenChannel | useHandleChannelEvents: Setup evnet handler', messageReceiverId);\n      const channelHandlerParams: OpenChannelHandler = {\n        onMessageReceived: (channel, message) => {\n          const scrollToEnd = checkScrollBottom();\n          const channelUrl = channel?.url;\n          logger.info('OpenChannel | useHandleChannelEvents: onMessageReceived', { channelUrl, message });\n          messagesDispatcher({\n            type: messageActionTypes.ON_MESSAGE_RECEIVED,\n            payload: { channel, message },\n          });\n          if (scrollToEnd) {\n            try {\n              setTimeout(() => {\n                scrollIntoLast(0, scrollRef);\n              });\n            } catch (error) {\n              logger.warning('OpenChannel | onMessageReceived | scroll to end failed');\n            }\n          }\n        },\n        onMessageUpdated: (channel, message) => {\n          const channelUrl = channel?.url;\n          logger.info('OpenChannel | useHandleChannelEvents: onMessageUpdated', { channelUrl, message });\n          messagesDispatcher({\n            type: messageActionTypes.ON_MESSAGE_UPDATED,\n            payload: { channel, message },\n          });\n        },\n        onMessageDeleted: (channel, messageId) => {\n          const channelUrl = channel?.url;\n          logger.info('OpenChannel | useHandleChannelEvents: onMessageDeleted', { channelUrl, messageId });\n          messagesDispatcher({\n            type: messageActionTypes.ON_MESSAGE_DELETED,\n            payload: { channel, messageId },\n          });\n        },\n        onOperatorUpdated: (channel, operators) => {\n          const channelUrl = channel?.url;\n          logger.info('OpenChannel | useHandleChannelEvents: onOperatorUpdated', { channelUrl, operators });\n          messagesDispatcher({\n            type: messageActionTypes.ON_OPERATOR_UPDATED,\n            payload: { channel, operators },\n          });\n        },\n        onUserEntered: (channel, user) => {\n          const channelUrl = channel?.url;\n          logger.info('OpenChannel | useHandleChannelEvents: onUserEntered', { channelUrl, user });\n          messagesDispatcher({\n            type: messageActionTypes.ON_USER_ENTERED,\n            payload: { channel, user },\n          });\n        },\n        onUserExited: (channel, user) => {\n          const channelUrl = channel?.url;\n          logger.info('OpenChannel | useHandleChannelEvents: onUserExited', { channelUrl, user });\n          messagesDispatcher({\n            type: messageActionTypes.ON_USER_EXITED,\n            payload: { channel, user },\n          });\n        },\n        onUserMuted: (channel, user) => {\n          const channelUrl = channel?.url;\n          logger.info('OpenChannel | useHandleChannelEvents: onUserMuted', { channelUrl, user });\n          messagesDispatcher({\n            type: messageActionTypes.ON_USER_MUTED,\n            payload: { channel, user },\n          });\n        },\n        onUserUnmuted: (channel, user) => {\n          const channelUrl = channel?.url;\n          logger.info('OpenChannel | useHandleChannelEvents: onUserUnmuted', { channelUrl, user });\n          messagesDispatcher({\n            type: messageActionTypes.ON_USER_UNMUTED,\n            payload: { channel, user },\n          });\n        },\n        onUserBanned: (channel, user) => {\n          const channelUrl = channel?.url;\n          logger.info('OpenChannel | useHandleChannelEvents: onUserBanned', { channelUrl, user });\n          messagesDispatcher({\n            type: messageActionTypes.ON_USER_BANNED,\n            payload: { channel, user, currentUser: sdk?.currentUser },\n          });\n        },\n        onUserUnbanned: (channel, user) => {\n          const channelUrl = channel?.url;\n          logger.info('OpenChannel | useHandleChannelEvents: onUserUnbanned', { channelUrl, user });\n          messagesDispatcher({\n            type: messageActionTypes.ON_USER_UNBANNED,\n            payload: { channel, user },\n          });\n        },\n        onChannelFrozen: (channel) => {\n          logger.info('OpenChannel | useHandleChannelEvents: onChannelFrozen', channel);\n          messagesDispatcher({\n            type: messageActionTypes.ON_CHANNEL_FROZEN,\n            payload: channel,\n          });\n        },\n        onChannelUnfrozen: (channel) => {\n          logger.info('OpenChannel | useHandleChannelEvents: onChannelUnfrozen', channel);\n          messagesDispatcher({\n            type: messageActionTypes.ON_CHANNEL_UNFROZEN,\n            payload: channel,\n          });\n        },\n        onChannelChanged: (channel) => {\n          logger.info('OpenChannel | useHandleChannelEvents: onChannelChanged', channel);\n          messagesDispatcher({\n            type: messageActionTypes.ON_CHANNEL_CHANGED,\n            payload: channel,\n          });\n        },\n        onMetaDataCreated: (channel, metaData) => {\n          const channelUrl = channel?.url;\n          logger.info('OpenChannel | useHandleChannelEvents: onMetaDataCreated', { channelUrl, metaData });\n          messagesDispatcher({\n            type: messageActionTypes.ON_META_DATA_CREATED,\n            payload: { channel, metaData },\n          });\n        },\n        onMetaDataUpdated: (channel, metaData) => {\n          const channelUrl = channel?.url;\n          logger.info('OpenChannel | useHandleChannelEvents: onMetaDataUpdated', { channelUrl, metaData });\n          messagesDispatcher({\n            type: messageActionTypes.ON_META_DATA_UPDATED,\n            payload: { channel, metaData },\n          });\n        },\n        onMetaDataDeleted: (channel, metaDataKeys) => {\n          const channelUrl = channel?.url;\n          logger.info('OpenChannel | useHandleChannelEvents: onMetaDataDeleted', { channelUrl, metaDataKeys });\n          messagesDispatcher({\n            type: messageActionTypes.ON_META_DATA_DELETED,\n            payload: { channel, metaDataKeys },\n          });\n        },\n        onMetaCounterCreated: (channel, metaCounter) => {\n          const channelUrl = channel?.url;\n          logger.info('OpenChannel | useHandleChannelEvents: onMetaCountersCreated', { channelUrl, metaCounter });\n          messagesDispatcher({\n            type: messageActionTypes.ON_META_COUNTERS_CREATED,\n            payload: { channel, metaCounter },\n          });\n        },\n        onMetaCounterUpdated: (channel, metaCounter) => {\n          const channelUrl = channel?.url;\n          logger.info('OpenChannel | useHandleChannelEvents: onMetaCountersUpdated', { channelUrl, metaCounter });\n          messagesDispatcher({\n            type: messageActionTypes.ON_META_COUNTERS_UPDATED,\n            payload: { channel, metaCounter },\n          });\n        },\n        onMetaCounterDeleted: (channel, metaCounterKeys) => {\n          const channelUrl = channel?.url;\n          logger.info('OpenChannel | useHandleChannelEvents: onMetaCountersDeleted', { channelUrl, metaCounterKeys });\n          messagesDispatcher({\n            type: messageActionTypes.ON_META_COUNTERS_DELETED,\n            payload: { channel, metaCounterKeys },\n          });\n        },\n        onMentionReceived: (channel, message) => {\n          const channelUrl = channel?.url;\n          logger.info('OpenChannel | useHandleChannelEvents: onMentionReceived', { channelUrl, message });\n          messagesDispatcher({\n            type: messageActionTypes.ON_MENTION_RECEIVED,\n            payload: { channel, message },\n          });\n        },\n        onChannelDeleted: (channelUrl, channelType) => {\n          if (channelType === ChannelType.OPEN && currentOpenChannel?.url === channelUrl) {\n            messagesDispatcher({\n              type: messageActionTypes.ON_CHANNEL_DELETED,\n              payload: channelUrl,\n            });\n          }\n        },\n      };\n\n      const ChannelHandler = new OpenChannelHandler(channelHandlerParams);\n\n      sdk?.openChannel?.addOpenChannelHandler(messageReceiverId, ChannelHandler);\n    }\n\n    return () => {\n      if (sdk?.openChannel?.removeOpenChannelHandler) {\n        logger.info('OpenChannel | useHandleChannelEvents: Removing message receiver handler', messageReceiverId);\n        sdk.openChannel.removeOpenChannelHandler(messageReceiverId);\n      }\n    }\n  }, [currentOpenChannel]);\n}\n\nexport default useHandleChannelEvents;\n","import { MessageListParams } from '@sendbird/chat/message';\nimport type { OpenChannel } from '@sendbird/chat/openChannel';\nimport React, { useEffect } from 'react';\n\nimport type { CustomUseReducerDispatcher, Logger } from '../../../../lib/SendbirdState';\nimport * as messageActionTypes from '../dux/actionTypes';\nimport { scrollIntoLast } from '../utils';\n\ninterface DynamicParams {\n  currentOpenChannel: OpenChannel;\n  /* eslint-disable @typescript-eslint/no-explicit-any*/\n  userFilledMessageListParams?: Record<string, any>;\n}\ninterface StaticParams {\n  logger: Logger;\n  messagesDispatcher: CustomUseReducerDispatcher;\n  scrollRef: React.RefObject<HTMLElement>;\n}\n\nfunction useInitialMessagesFetch(\n  { currentOpenChannel, userFilledMessageListParams }: DynamicParams,\n  { logger, messagesDispatcher, scrollRef }: StaticParams,\n): void {\n  useEffect(() => {\n    logger.info('OpenChannel | useInitialMessagesFetch: Setup started', currentOpenChannel);\n    messagesDispatcher({\n      type: messageActionTypes.RESET_MESSAGES,\n      payload: null,\n    });\n\n    if (currentOpenChannel && currentOpenChannel.getMessagesByTimestamp) {\n      const messageListParams: MessageListParams = {\n        nextResultSize: 0,\n        prevResultSize: 30,\n        isInclusive: true,\n        includeReactions: false,\n      };\n      if (userFilledMessageListParams) {\n        Object.keys(userFilledMessageListParams).forEach((key) => {\n          messageListParams[key] = userFilledMessageListParams[key];\n        });\n        logger.info('OpenChannel | useInitialMessagesFetch: Used customizedMessageListParams');\n      }\n\n      logger.info('OpenChannel | useInitialMessagesFetch: Fetching messages', { currentOpenChannel, messageListParams });\n      messagesDispatcher({\n        type: messageActionTypes.GET_PREV_MESSAGES_START,\n        payload: null,\n      });\n      currentOpenChannel.getMessagesByTimestamp(new Date().getTime(), messageListParams).then((messages) => {\n        logger.info('OpenChannel | useInitialMessagesFetch: Fetching messages succeeded', messages);\n        const hasMore = (messages && messages.length > 0);\n        const lastMessageTimestamp = hasMore ? messages[0].createdAt : null;\n        messagesDispatcher({\n          type: messageActionTypes.GET_PREV_MESSAGES_SUCESS,\n          payload: {\n            currentOpenChannel,\n            messages,\n            hasMore,\n            lastMessageTimestamp,\n          },\n        });\n        setTimeout(() => { scrollIntoLast(0, scrollRef); });\n      }).catch((error) => {\n        logger.error('OpenChannel | useInitialMessagesFetch: Fetching messages failed', error);\n        messagesDispatcher({\n          type: messageActionTypes.GET_PREV_MESSAGES_FAIL,\n          payload: {\n            currentOpenChannel,\n            messages: [],\n            hasMore: false,\n            lastMessageTimestamp: 0,\n          },\n        });\n      });\n    }\n  }, [currentOpenChannel, userFilledMessageListParams]);\n}\n\nexport default useInitialMessagesFetch;\n","import { useCallback } from 'react';\nimport type { MessageListParams } from '@sendbird/chat/message';\nimport type { OpenChannel, SendbirdOpenChat } from '@sendbird/chat/openChannel';\n\nimport type { CustomUseReducerDispatcher, Logger } from '../../../../lib/SendbirdState';\nimport * as messageActionTypes from '../dux/actionTypes';\n\ninterface DynamicParams {\n  currentOpenChannel: OpenChannel;\n  lastMessageTimestamp: number;\n  fetchMore?: boolean;\n}\ninterface StaticParams {\n  sdk: SendbirdOpenChat;\n  logger: Logger;\n  messagesDispatcher: CustomUseReducerDispatcher;\n  hasMore: boolean;\n  /* eslint-disable @typescript-eslint/no-explicit-any*/\n  userFilledMessageListParams?: Record<string, any>;\n}\ntype CallbackReturn = (callback: () => void) => void;\n\nfunction useScrollCallback(\n  { currentOpenChannel, lastMessageTimestamp, fetchMore }: DynamicParams,\n  { sdk, logger, messagesDispatcher, hasMore, userFilledMessageListParams }: StaticParams,\n): CallbackReturn {\n  return useCallback((callback) => {\n    if (fetchMore && hasMore) {\n      logger.info('OpenChannel | useScrollCallback: start');\n      const messageListParams: MessageListParams = {\n        prevResultSize: 30,\n        includeReactions: false,\n        nextResultSize: 0,\n      };\n\n      if (userFilledMessageListParams) {\n        Object.keys(userFilledMessageListParams).forEach((key) => {\n          messageListParams[key] = userFilledMessageListParams[key];\n        });\n        logger.info('OpenChannel | useScrollCallback: Used userFilledMessageListParams', userFilledMessageListParams);\n      }\n\n      logger.info('OpenChannel | useScrollCallback: Fetching messages', { currentOpenChannel, messageListParams });\n\n      currentOpenChannel.getMessagesByTimestamp(lastMessageTimestamp || new Date().getTime(), messageListParams).then((messages) => {\n        logger.info('OpenChannel | useScrollCallback: Fetching messages succeeded', messages);\n        const hasMore = (messages && messages.length > 0);\n        const lastMessageTimestamp = hasMore ? messages[0].createdAt : null;\n        messagesDispatcher({\n          type: messageActionTypes.GET_PREV_MESSAGES_SUCESS,\n          payload: {\n            currentOpenChannel,\n            messages,\n            hasMore,\n            lastMessageTimestamp,\n          }\n        });\n        setTimeout(() => {\n          callback();\n        });\n      }).catch((error) => {\n        logger.error('OpenChannel | useScrollCallback: Fetching messages failed', error);\n        messagesDispatcher({\n          type: messageActionTypes.GET_PREV_MESSAGES_FAIL,\n          payload: {\n            currentOpenChannel,\n            messages: [],\n            hasMore: false,\n            lastMessageTimestamp: 0,\n          }\n        });\n      });\n    }\n  }, [currentOpenChannel, lastMessageTimestamp, fetchMore, sdk]);\n}\n\nexport default useScrollCallback;\n","import { useCallback } from 'react';\nimport { Logger } from '../../../..';\n\ninterface DynamicParams {\n  conversationScrollRef: React.RefObject<HTMLDivElement>;\n}\ninterface StaticParams {\n  logger: Logger;\n}\n\nfunction useCheckScrollBottom(\n  { conversationScrollRef }: DynamicParams,\n  { logger }: StaticParams,\n): () => boolean {\n  return useCallback(() => {\n    let isBottom = true;\n    if (conversationScrollRef && conversationScrollRef?.current) {\n      try {\n        const conversationScroll = conversationScrollRef.current;\n        isBottom = conversationScroll.scrollHeight <= conversationScroll.scrollTop + conversationScroll.clientHeight;\n      } catch(error) {\n        logger.error('OpenChannel | useCheckScrollBottom', error);\n      }\n    }\n    return isBottom;\n  }, [conversationScrollRef])\n}\n\nexport default useCheckScrollBottom;\n","import type { UserMessageCreateParams } from '@sendbird/chat/message';\nimport type { OpenChannel, SendbirdOpenChat } from '@sendbird/chat/openChannel';\n\nimport React, { useCallback } from 'react';\nimport type { Logger } from '../../../../lib/SendbirdState';\nimport * as messageActionTypes from '../dux/actionTypes';\nimport * as utils from '../utils';\n\ninterface DynamicParams {\n  currentOpenChannel: OpenChannel;\n  onBeforeSendUserMessage: (text: string) => UserMessageCreateParams;\n  checkScrollBottom: () => boolean;\n  messageInputRef: React.RefObject<HTMLInputElement>;\n}\ninterface StaticParams {\n  sdk: SendbirdOpenChat;\n  logger: Logger;\n  messagesDispatcher: (props: { type: string, payload: any }) => void;\n  scrollRef: React.RefObject<HTMLElement>;\n}\n\nfunction useSendMessageCallback(\n  { currentOpenChannel, onBeforeSendUserMessage, checkScrollBottom, messageInputRef }: DynamicParams,\n  { sdk, logger, messagesDispatcher, scrollRef }: StaticParams,\n): () => void {\n  return useCallback(() => {\n    if (sdk) {\n      const text = messageInputRef.current.innerText;\n      const createParamsDefault = (txt: string | number): UserMessageCreateParams => {\n        const message = (txt as string)?.trim() || txt as string;\n        const params: UserMessageCreateParams = {\n          message: message,\n        };\n        return params;\n      }\n      const createCustomParams = onBeforeSendUserMessage && typeof onBeforeSendUserMessage === 'function';\n      if (createCustomParams) {\n        logger.info('OpenChannel | useSendMessageCallback: Creating params using onBeforeSendUserMessage', onBeforeSendUserMessage);\n      }\n      const params = onBeforeSendUserMessage ? onBeforeSendUserMessage(text) : createParamsDefault(text);\n      logger.info('OpenChannel | useSendMessageCallback: Sending message has started', params);\n\n      const isBottom = checkScrollBottom();\n      let pendingMsg = null;\n      currentOpenChannel.sendUserMessage(params)\n        .onPending((pendingMessage) => {\n          messagesDispatcher({\n            type: messageActionTypes.SENDING_MESSAGE_START,\n            payload: {\n              message: pendingMessage,\n              channel: currentOpenChannel,\n            }\n          });\n          pendingMsg = pendingMessage;\n        })\n        .onSucceeded((message) => {\n          logger.info('OpenChannel | useSendMessageCallback: Sending message succeeded', message);\n          messagesDispatcher({\n            type: messageActionTypes.SENDING_MESSAGE_SUCCEEDED,\n            payload: message,\n          });\n          if (isBottom) {\n            setTimeout(() => {\n              utils.scrollIntoLast(0, scrollRef);\n            });\n          }\n        })\n        .onFailed((error) => {\n          logger.warning('OpenChannel | useSendMessageCallback: Sending message failed', error);\n          messagesDispatcher({\n            type: messageActionTypes.SENDING_MESSAGE_FAILED,\n            payload: pendingMsg,\n          });\n          // https://sendbird.com/docs/chat/v3/javascript/guides/error-codes#2-server-error-codes\n          // TODO: Do we need to handle the error cases?\n          // @ts-ignore\n          if (error?.code === 900041) {\n            messagesDispatcher({\n              type: messageActionTypes.ON_USER_MUTED,\n              payload: {\n                channel: currentOpenChannel,\n                user: sdk.currentUser,\n              },\n            });\n          }\n        });\n    }\n  }, [currentOpenChannel, onBeforeSendUserMessage, checkScrollBottom, messageInputRef]);\n}\n\nexport default useSendMessageCallback;\n","import { useCallback } from 'react';\nimport type { OpenChannel, SendbirdOpenChat } from '@sendbird/chat/openChannel';\nimport type { FileMessageCreateParams } from '@sendbird/chat/message';\n\nimport type { Logger } from '../../../../lib/SendbirdState';\nimport * as messageActionTypes from '../dux/actionTypes';\nimport * as utils from '../utils';\n\ninterface DynamicParams {\n  currentOpenChannel: OpenChannel;\n  onBeforeSendFileMessage: (file: File) => FileMessageCreateParams;\n  checkScrollBottom: () => boolean;\n  imageCompression?: {\n    compressionRate?: number,\n    resizingWidth?: number | string,\n    resizingHeight?: number | string,\n  };\n}\ninterface StaticParams {\n  sdk: SendbirdOpenChat;\n  logger: Logger;\n  messagesDispatcher: (props: { type: string, payload: any }) => void;\n}\n\ntype CallbackReturn = (file: File) => void;\n\nfunction useFileUploadCallback({\n  currentOpenChannel,\n  checkScrollBottom,\n  imageCompression = {},\n  onBeforeSendFileMessage,\n  }: DynamicParams,\n  { sdk, logger, messagesDispatcher, scrollRef }: StaticParams,\n): CallbackReturn {\n  return useCallback((file) => {\n    if (sdk) {\n      const {\n        compressionRate,\n        resizingWidth,\n        resizingHeight,\n      } = imageCompression;\n      const createCustomParams = onBeforeSendFileMessage && typeof onBeforeSendFileMessage === 'function';\n\n      const compressibleFileType = (file.type === 'image/jpg' || file.type === 'image/png' || file.type === 'image/jpeg');\n      const compressibleRatio = (compressionRate > 0) && (compressionRate < 1);\n      // pxToNumber returns null if values are invalid\n      const compressibleDiamensions = utils.pxToNumber(resizingWidth)\n        || utils.pxToNumber(resizingHeight);\n\n      const canCompressImage = compressibleFileType && (compressibleRatio || compressibleDiamensions);\n\n      const createParamsDefault = (file_): FileMessageCreateParams => {\n        const params: FileMessageCreateParams = {};\n        params.file = file_;\n        return params;\n      };\n\n      if (canCompressImage) { // Using image compression\n        try {\n          const image: HTMLImageElement = document.createElement('img');\n          image.src = URL.createObjectURL(file);\n          image.onload = () => {\n            URL.revokeObjectURL(image.src);\n            const canvas = document.createElement('canvas');\n            const imageWidth = image.naturalWidth || image.width;\n            const imageHeight = image.naturalHeight || image.height;\n            let targetWidth = utils.pxToNumber(resizingWidth) || imageWidth;\n            let targetHeight = utils.pxToNumber(resizingHeight) || imageHeight;\n\n            // In canvas.toBlob(callback, mimeType, qualityArgument)\n            // qualityArgument doesnt work\n            // so in case compressibleDiamensions are not present, we use ratio\n            if (file.type === 'image/png' && !compressibleDiamensions) {\n              targetWidth *= compressionRate;\n              targetHeight *= compressionRate;\n            }\n\n            canvas.width = targetWidth;\n            canvas.height = targetHeight;\n            const context = canvas.getContext('2d');\n            context.drawImage(image, 0, 0, targetWidth, targetHeight);\n            context.canvas.toBlob(\n              (newImageBlob) => {\n                const compressedFile = new File([newImageBlob], file.name, { type: file.type });\n                if (createCustomParams) {\n                  logger.info('OpenChannel | useFileUploadCallback: Creating params using onBeforeSendFileMessage', onBeforeSendFileMessage);\n                }\n                const params = onBeforeSendFileMessage ? onBeforeSendFileMessage(compressedFile) : createParamsDefault(compressedFile);\n                logger.info('OpenChannel | useFileUploadCallback: Uploading file message start', params);\n\n                const isBottom = checkScrollBottom();\n                currentOpenChannel.sendFileMessage(params)\n                  .onPending((pendingMessage) => {\n                    messagesDispatcher({\n                      type: messageActionTypes.SENDING_MESSAGE_START,\n                      payload: {\n                        message: {\n                          ...pendingMessage,\n                          url: URL.createObjectURL(file),\n                          // pending thumbnail message seems to be failed\n                          requestState: 'pending',\n                        },\n                        channel: currentOpenChannel,\n                      }\n                    });\n                  })\n                  .onSucceeded((message) => {\n                    logger.info('OpenChannel | useFileUploadCallback: Sending message succeeded', message);\n                    messagesDispatcher({\n                      type: messageActionTypes.SENDING_MESSAGE_SUCCEEDED,\n                      payload: message,\n                    });\n                    if (isBottom) {\n                      setTimeout(() => {\n                        utils.scrollIntoLast(0, scrollRef);\n                      });\n                    }\n                  })\n                  .onFailed((error, message) => {\n                    logger.error('OpenChannel | useFileUploadCallback: Sending file message failed', { message, error });\n                    // @ts-ignore\n                    message.localUrl = URL.createObjectURL(file);\n                    // @ts-ignore\n                    message.file = file;\n                    messagesDispatcher({\n                      type: messageActionTypes.SENDING_MESSAGE_FAILED,\n                      payload: message,\n                    });\n                  });\n              },\n              file.type,\n              compressionRate,\n            );\n          }\n        } catch (error) {\n          logger.warning('OpenChannel | useFileUploadCallback: Sending file message with image compression failed', error);\n        }\n      } else { // Not using image compression\n        if (createCustomParams) {\n          logger.info('OpenChannel | useFileUploadCallback: Creating params using onBeforeSendFileMessage', onBeforeSendFileMessage);\n        }\n        const params = onBeforeSendFileMessage ? onBeforeSendFileMessage(file) : createParamsDefault(file);\n        logger.info('OpenChannel | useFileUploadCallback: Uploading file message start', params);\n\n        const isBottom = checkScrollBottom();\n        currentOpenChannel.sendFileMessage(params)\n          .onPending((pendingMessage) => {\n            messagesDispatcher({\n              type: messageActionTypes.SENDING_MESSAGE_START,\n              payload: {\n                message: {\n                  ...pendingMessage,\n                  url: URL.createObjectURL(file),\n                  // pending thumbnail message seems to be failed\n                  requestState: 'pending',\n                },\n                channel: currentOpenChannel,\n              }\n            });\n          })\n          .onSucceeded((message) => {\n            logger.info('OpenChannel | useFileUploadCallback: Sending message succeeded', message);\n            messagesDispatcher({\n              type: messageActionTypes.SENDING_MESSAGE_SUCCEEDED,\n              payload: message,\n            });\n            if (isBottom) {\n              setTimeout(() => {\n                utils.scrollIntoLast(0, scrollRef);\n              });\n            }\n          })\n          .onFailed((error, message) => {\n            logger.error('OpenChannel | useFileUploadCallback: Sending file message failed', { message, error });\n            // @ts-ignore\n            message.localUrl = URL.createObjectURL(file);\n            // @ts-ignore\n            message.file = file;\n            messagesDispatcher({\n              type: messageActionTypes.SENDING_MESSAGE_FAILED,\n              payload: message,\n            });\n          });\n      }\n    }\n  }, [currentOpenChannel, onBeforeSendFileMessage, checkScrollBottom, imageCompression]);\n}\n\nexport default useFileUploadCallback;\n","import type { UserMessageUpdateParams } from '@sendbird/chat/message';\n\nimport type { Logger } from '../../../../lib/SendbirdState';\nimport type { OpenChannel } from '@sendbird/chat/openChannel';\nimport { useCallback } from 'react';\nimport * as messageActionTypes from '../dux/actionTypes';\n\ninterface DynamicParams {\n  currentOpenChannel: OpenChannel;\n  onBeforeSendUserMessage?: (text) => UserMessageUpdateParams;\n}\ninterface StaticParams {\n  logger: Logger;\n  messagesDispatcher: (props: { type: string, payload :any }) => void;\n}\ntype CallbackReturn = (messageId, text, callback) => void;\n\nfunction useUpdateMessageCallback(\n  { currentOpenChannel, onBeforeSendUserMessage }: DynamicParams,\n  { logger, messagesDispatcher }: StaticParams,\n): CallbackReturn {\n  return useCallback((messageId, text, callback) => {\n    const createParamsDefault = (txt) => {\n      const params = {\n        message: txt,\n      };\n      return params;\n    };\n\n    if (onBeforeSendUserMessage && typeof onBeforeSendUserMessage === 'function') {\n      logger.info('OpenChannel | useUpdateMessageCallback: Creating params using onBeforeUpdateUserMessage');\n    }\n    const params = onBeforeSendUserMessage ? onBeforeSendUserMessage(text) : createParamsDefault(text);\n    currentOpenChannel.updateUserMessage(messageId, params)\n      .then((message) => {\n        if (callback) {\n          callback();\n        }\n        logger.info('OpenChannel | useUpdateMessageCallback: Updating message succeeded', { message, params });\n        messagesDispatcher({\n          type: messageActionTypes.ON_MESSAGE_UPDATED,\n          payload: {\n            channel: currentOpenChannel,\n            message,\n          },\n        });\n      });\n  }, [currentOpenChannel, onBeforeSendUserMessage]);\n}\n\nexport default useUpdateMessageCallback;\n","import type { FileMessage, UserMessage } from '@sendbird/chat/message';\nimport type { OpenChannel } from '@sendbird/chat/openChannel';\nimport { useCallback } from 'react';\nimport { Logger } from '../../../..';\nimport * as messageActionTypes from '../dux/actionTypes';\n\ninterface DynamicParams {\n  currentOpenChannel: OpenChannel;\n}\n\ntype MessagesDispatcherType = {\n  type: string, payload: any,\n};\n\ninterface StaticParams {\n  logger: Logger;\n  messagesDispatcher: (dispatcher: MessagesDispatcherType) => void;\n}\n\ntype CallbackReturn = (\n  message: UserMessage | FileMessage,\n  callback?: () => void,\n) => void;\n\nfunction useDeleteMessageCallback(\n  { currentOpenChannel }: DynamicParams,\n  { logger, messagesDispatcher }: StaticParams,\n): CallbackReturn {\n  return useCallback((message, callback) => {\n    logger.info('OpenChannel | useDeleteMessageCallback: Deleting message', message);\n    const { sendingStatus } = message;\n    logger.info('OpenChannel | useDeleteMessageCallback: Deleting message requestState', sendingStatus);\n\n    if (sendingStatus === 'failed' || sendingStatus === 'pending') {\n      logger.info('OpenChannel | useDeleteMessageCallback: Deleted message from local', message);\n      messagesDispatcher({\n        type: messageActionTypes.ON_MESSAGE_DELETED_BY_REQ_ID,\n        payload: message.reqId,\n      });\n      if (callback) {\n        callback();\n      }\n    } else {\n      if (!(message.messageType ==='file' || message.messageType === 'user')) {\n        return;\n      }\n      const messageToDelete = message as UserMessage;\n      currentOpenChannel.deleteMessage(messageToDelete).then(() => {\n        logger.info('OpenChannel | useDeleteMessageCallback: Deleting message on server', sendingStatus);\n        if (callback) {\n          callback();\n        }\n        logger.info('OpenChannel | useDeleteMessageCallback: Deleting message succeeded', message);\n        messagesDispatcher({\n          type: messageActionTypes.ON_MESSAGE_DELETED,\n          payload: {\n            channel: currentOpenChannel,\n            messageId: message.messageId,\n          },\n        });\n      }).catch((error) => {\n        logger.warning('OpenChannel | useDeleteMessageCallback: Deleting message failed', error);\n      });\n    }\n  }, [currentOpenChannel]);\n}\n\nexport default useDeleteMessageCallback;\n","import type { FileMessage, UserMessage } from '@sendbird/chat/message';\nimport type { OpenChannel } from '@sendbird/chat/openChannel';\nimport { useCallback } from 'react';\nimport { Logger } from '../../../..';\nimport * as messageActionTypes from '../dux/actionTypes';\n\ninterface DynamicParams {\n  currentOpenChannel: OpenChannel;\n}\n\ntype MessagesDispatcherType = { type: string, payload: any };\n\ninterface StaticParams {\n  logger: Logger;\n  messagesDispatcher: (dispatcher: MessagesDispatcherType) => void;\n}\ntype CallbackReturn = (failedMessage: UserMessage | FileMessage) => void;\n\nfunction useResendMessageCallback(\n  { currentOpenChannel }: DynamicParams,\n  { logger, messagesDispatcher }: StaticParams,\n): CallbackReturn {\n  return useCallback((failedMessage) => {\n    logger.info('OpenChannel | useResendMessageCallback: Resending message has started', failedMessage);\n    // eslint-disable-next-line no-param-reassign\n    const { messageType, file } = failedMessage as FileMessage;\n    if (failedMessage && typeof failedMessage.isResendable === 'function' && failedMessage.isResendable) {\n      // eslint-disable-next-line no-param-reassign\n      failedMessage.requestState = 'pending';\n      messagesDispatcher({\n        type: messageActionTypes.RESENDING_MESSAGE_START,\n        payload: {\n          channel: currentOpenChannel,\n          message: failedMessage,\n        },\n      });\n\n      // userMessage\n      if (messageType === 'user' && failedMessage.messageType === 'user') {\n        currentOpenChannel.resendUserMessage(failedMessage).then((message) => {\n          logger.info('OpenChannel | useResendMessageCallback: Reseding message succeeded', message);\n          messagesDispatcher({\n            type: messageActionTypes.SENDING_MESSAGE_SUCCEEDED,\n            payload: message,\n          });\n        }).catch((error) => {\n          logger.warning('OpenChannel | useResendMessageCallback: Resending message failed', error);\n          // eslint-disable-next-line no-param-reassign\n          failedMessage.requestState = 'failed';\n          messagesDispatcher({\n            type: messageActionTypes.SENDING_MESSAGE_FAILED,\n            payload: failedMessage,\n          });\n        });\n      }\n\n      // fileMessage\n      if (messageType === 'file' && failedMessage.messageType === 'file') {\n        currentOpenChannel.resendFileMessage(failedMessage, file).then((message) => {\n          logger.info('OpenChannel | useResendMessageCallback: Resending file message succeeded', message);\n          messagesDispatcher({\n            type: messageActionTypes.SENDING_MESSAGE_SUCCEEDED,\n            payload: message,\n          });\n        }).catch((error) => {\n          logger.warning('OpenChannel | useResendMessageCallback: Resending file message failed', error);\n          // eslint-disable-next-line no-param-reassign\n          failedMessage.requestState = 'failed';\n          messagesDispatcher({\n            type: messageActionTypes.SENDING_MESSAGE_FAILED,\n            payload: failedMessage,\n          });\n        });\n      }\n    } else {\n      // to alert user on console\n      // eslint-disable-next-line no-console\n      console.error('OpenChannel | useResendMessageCallback: Message is not resendable');\n      logger.warning('OpenChannel | useResendMessageCallback: Message is not resendable', failedMessage);\n    }\n  }, [currentOpenChannel]);\n}\n\nexport default useResendMessageCallback;\n","import { useEffect, useState } from 'react';\nimport { Logger } from '../../../..';\nimport * as messageActionTypes from '../dux/actionTypes';\n\ninterface DynamicParams {\n  messagesLength: number;\n  messageLimit: number;\n}\n\n\ntype MessagesDispatcherType = {\n  type: string,\n  payload: { messageLimit: number }\n};\n\ninterface StaticParams {\n  messagesDispatcher: (dispatcher: MessagesDispatcherType) => void;\n  logger: Logger;\n}\n\nconst THROTTLE_TIMER = 5000;\n\n// to trim message list so that we wont keep thousands of messages in memory\n// We are throttling here; not debouncing\n// it will be called once very 5 sec if messagesLength, messageLimit changes\n// we check if messagesLength > messageLimit before dispatching action\nfunction useTrimMessageList(\n  { messagesLength, messageLimit }: DynamicParams,\n  { messagesDispatcher, logger }: StaticParams,\n): void {\n  const [inProgress, setInProgress] = useState(false);\n  useEffect(() => {\n    if (inProgress) {\n      return;\n    }\n    if (typeof messagesLength === 'number' && messagesLength > messageLimit) {\n      logger.info('Trimming MessageList');\n      messagesDispatcher({\n        type: messageActionTypes.TRIM_MESSAGE_LIST,\n        payload: { messageLimit },\n      });\n    }\n    setInProgress(true);\n    setTimeout(() => { setInProgress(false); }, THROTTLE_TIMER);\n  }, [messagesLength, messageLimit]);\n}\n\nexport default useTrimMessageList;\n","import React, {\n  useRef,\n  useEffect,\n  useReducer,\n  useMemo,\n} from 'react';\nimport type { FileMessageCreateParams, UserMessageCreateParams } from '@sendbird/chat/message';\nimport type { SendbirdOpenChat } from '@sendbird/chat/openChannel';\n\nimport * as utils from './utils';\nimport { UserProfileProvider } from '../../../lib/UserProfileContext';\nimport { RenderUserProfileProps } from '../../../types';\nimport messagesReducer from './dux/reducers';\nimport messagesInitialState, {\n  State as MessageStoreState,\n} from './dux/initialState';\nimport * as messageActionTypes from './dux/actionTypes';\nimport { scrollIntoLast } from './utils';\nimport * as topics from '../../../lib/pubSub/topics';\n\n// hooks\nimport useSetChannel from './hooks/useSetChannel';\nimport useHandleChannelEvents from './hooks/useHandleChannelEvents';\nimport useInitialMessagesFetch from './hooks/useInitialMessagesFetch';\nimport useScrollCallback from './hooks/useScrollCallback';\nimport useCheckScrollBottom from './hooks/useCheckScrollBottom';\nimport useSendMessageCallback from './hooks/useSendMessageCallback';\nimport useFileUploadCallback from './hooks/useFileUploadCallback';\nimport useUpdateMessageCallback from './hooks/useUpdateMessageCallback';\nimport useDeleteMessageCallback from './hooks/useDeleteMessageCallback';\nimport useResendMessageCallback from './hooks/useResendMessageCallback';\nimport useTrimMessageList from './hooks/useTrimMessageList';\nimport useSendbirdStateContext from '../../../hooks/useSendbirdStateContext';\n\ntype OpenChannelQueries = {\n  // https://sendbird.github.io/core-sdk-javascript/module-model_params_messageListParams-MessageListParams.html\n  messageListParams?: {\n    replyType?: string,\n    messageType?: string,\n    prevResultSize?: number,\n    nextResultSize?: number,\n    reverse?: boolean,\n    isInclusive?: boolean,\n    includeMetaArray?: boolean,\n    // UIKit doesn't support emoji reaction in OpenChannel\n    // includeReactions?: boolean,\n    // UIKit doesn't support message threading in OpenChannel\n    // includeThreadInfo?: boolean,\n    includePollDetails?: boolean,\n    includeParentMessageInfo?: boolean,\n    showSubchannelMessagesOnly?: boolean,\n    customTypes?: Array<string>,\n    senderUserIds?: Array<string>,\n  },\n};\n\nexport interface OpenChannelProviderProps {\n  channelUrl: string;\n  children?: React.ReactElement;\n  isMessageGroupingEnabled?: boolean;\n  queries?: OpenChannelQueries;\n  messageLimit?: number;\n  onBeforeSendUserMessage?(text: string): UserMessageCreateParams;\n  onBeforeSendFileMessage?(file_: File): FileMessageCreateParams;\n  onChatHeaderActionClick?(): void;\n  onBackClick?(): void;\n  disableUserProfile?: boolean;\n  renderUserProfile?: (props: RenderUserProfileProps) => React.ReactElement;\n}\n\n\ninterface OpenChannelInterface extends OpenChannelProviderProps, MessageStoreState {\n  // derived/utils\n  messageInputRef: React.RefObject<HTMLInputElement>;\n  conversationScrollRef: React.RefObject<HTMLDivElement>;\n  disabled: boolean;\n  amIBanned: boolean;\n  amIMuted: boolean;\n  amIOperator: boolean;\n  fetchMore: boolean;\n  checkScrollBottom: () => boolean;\n  onScroll: (callback: () => void) => void;\n  handleSendMessage: any;\n  handleFileUpload: any;\n  updateMessage: any;\n  deleteMessage: any;\n  resendMessage: any;\n}\n\nconst OpenChannelContext = React.createContext<OpenChannelInterface | null>(undefined);\n\nconst OpenChannelProvider: React.FC<OpenChannelProviderProps> = (props: OpenChannelProviderProps) => {\n  const {\n    channelUrl,\n    children,\n    isMessageGroupingEnabled = true,\n    queries,\n    onBeforeSendUserMessage,\n    messageLimit,\n    onBeforeSendFileMessage,\n    onChatHeaderActionClick,\n    onBackClick,\n  } = props;\n\n  // We didn't decide to support fetching participant list\n  const fetchingParticipants = false;\n  const globalStore = useSendbirdStateContext();\n\n  const sdk = globalStore?.stores?.sdkStore?.sdk as SendbirdOpenChat;\n  const sdkInit = globalStore?.stores?.sdkStore?.initialized;\n  const user = globalStore?.stores?.userStore?.user;\n  const config = globalStore?.config;\n  const {\n    userId,\n    isOnline,\n    logger,\n    pubSub,\n    imageCompression,\n  } = config;\n\n  // hook variables\n  const [messagesStore, messagesDispatcher] = useReducer(messagesReducer, messagesInitialState);\n  const {\n    allMessages,\n    loading,\n    initialized,\n    currentOpenChannel,\n    isInvalid,\n    hasMore,\n    lastMessageTimestamp,\n    operators,\n    bannedParticipantIds,\n    mutedParticipantIds,\n  } = messagesStore;\n  // ref\n  const messageInputRef = useRef(null); // useSendMessageCallback\n  const conversationScrollRef = useRef(null); // useScrollAfterSendMessageCallback\n\n  // const\n  const userFilledMessageListParams = queries?.messageListParams;\n  const disabled = !initialized\n    || !isOnline\n    || utils.isDisabledBecauseFrozen(currentOpenChannel, userId)\n    || utils.isDisabledBecauseMuted(mutedParticipantIds, userId);\n\n  // useMemo\n  const amIBanned = useMemo(() => {\n    return bannedParticipantIds.indexOf(user.userId) >= 0;\n  }, [channelUrl, bannedParticipantIds, user]);\n  const amIMuted = useMemo(() => {\n    return mutedParticipantIds.indexOf(user.userId) >= 0;\n  }, [channelUrl, mutedParticipantIds, user]);\n  const amIOperator = useMemo(() => {\n    return operators.map(operator => operator.userId).indexOf(user.userId) >= 0;\n  }, [channelUrl, operators, user]);\n\n  // use hooks\n  useSetChannel(\n    { channelUrl, sdkInit, fetchingParticipants, userId, currentOpenChannel },\n    { sdk, logger, messagesDispatcher },\n  );\n\n  const checkScrollBottom = useCheckScrollBottom(\n    { conversationScrollRef },\n    { logger },\n  );\n  useHandleChannelEvents(\n    { currentOpenChannel, checkScrollBottom },\n    { sdk, logger, messagesDispatcher, scrollRef: conversationScrollRef },\n  );\n  useInitialMessagesFetch(\n    { currentOpenChannel, userFilledMessageListParams },\n    { logger, messagesDispatcher, scrollRef: conversationScrollRef },\n  );\n\n  const fetchMore: boolean = utils.shouldFetchMore(allMessages?.length, messageLimit);\n  // donot fetch more for streaming\n  const onScroll = useScrollCallback(\n    { currentOpenChannel, lastMessageTimestamp, fetchMore },\n    { sdk, logger, messagesDispatcher, hasMore, userFilledMessageListParams },\n  );\n  const handleSendMessage = useSendMessageCallback(\n    { currentOpenChannel, onBeforeSendUserMessage, checkScrollBottom, messageInputRef },\n    { sdk, logger, messagesDispatcher, scrollRef: conversationScrollRef },\n  );\n  const handleFileUpload = useFileUploadCallback(\n    { currentOpenChannel, onBeforeSendFileMessage, checkScrollBottom, imageCompression },\n    { sdk, logger, messagesDispatcher, scrollRef: conversationScrollRef },\n  );\n  const updateMessage = useUpdateMessageCallback(\n    { currentOpenChannel, onBeforeSendUserMessage },\n    { logger, messagesDispatcher },\n  );\n  const deleteMessage = useDeleteMessageCallback(\n    { currentOpenChannel },\n    { logger, messagesDispatcher },\n  );\n  const resendMessage = useResendMessageCallback(\n    { currentOpenChannel },\n    { logger, messagesDispatcher },\n  );\n\n  useTrimMessageList(\n    { messagesLength: allMessages?.length, messageLimit },\n    { messagesDispatcher, logger }\n  );\n\n  // handle API calls from withSendbird\n  useEffect(() => {\n    const subscriber = new Map();\n    if (!pubSub || !pubSub.subscribe) {\n      return;\n    }\n    subscriber.set(topics.SEND_USER_MESSAGE, pubSub.subscribe(topics.SEND_USER_MESSAGE, (msg) => {\n      const { channel, message } = msg;\n      scrollIntoLast(0, conversationScrollRef);\n      if (channel && (channelUrl === channel?.url)) {\n        messagesDispatcher({\n          type: messageActionTypes.SENDING_MESSAGE_SUCCEEDED,\n          payload: message,\n        });\n      }\n    }));\n    subscriber.set(topics.SEND_MESSAGE_START, pubSub.subscribe(topics.SEND_MESSAGE_START, (msg) => {\n      const { channel, message } = msg;\n      if (channel && (channelUrl === channel?.url)) {\n        messagesDispatcher({\n          type: messageActionTypes.SENDING_MESSAGE_START,\n          payload: { message, channel },\n        });\n      }\n    }));\n    subscriber.set(topics.SEND_FILE_MESSAGE, pubSub.subscribe(topics.SEND_FILE_MESSAGE, (msg) => {\n      const { channel, message } = msg;\n      scrollIntoLast(0, conversationScrollRef);\n      if (channel && (channelUrl === channel?.url)) {\n        messagesDispatcher({\n          type: messageActionTypes.SENDING_MESSAGE_SUCCEEDED,\n          payload: { message, channel },\n        });\n      }\n    }));\n    subscriber.set(topics.UPDATE_USER_MESSAGE, pubSub.subscribe(topics.UPDATE_USER_MESSAGE, (msg) => {\n      const { channel, message, fromSelector } = msg;\n      if (fromSelector && channel && (channelUrl === channel?.url)) {\n        messagesDispatcher({\n          type: messageActionTypes.ON_MESSAGE_UPDATED,\n          payload: { channel, message },\n        });\n      }\n    }));\n    subscriber.set(topics.DELETE_MESSAGE, pubSub.subscribe(topics.DELETE_MESSAGE, (msg) => {\n      const { channel, messageId } = msg;\n      if (channel && (channelUrl === channel?.url)) {\n        messagesDispatcher({\n          type: messageActionTypes.ON_MESSAGE_DELETED,\n          payload: messageId,\n        });\n      }\n    }));\n\n    return () => {\n      if (subscriber) {\n        subscriber.forEach((s) => {\n          try {\n            s.remove();\n          } catch {\n            //\n          }\n        });\n      }\n    };\n  }, [channelUrl, sdkInit]);\n\n  return (\n    <OpenChannelContext.Provider value={{\n      // props\n      channelUrl,\n      children,\n      isMessageGroupingEnabled,\n      queries,\n      onBeforeSendUserMessage,\n      messageLimit,\n      onBeforeSendFileMessage,\n      onChatHeaderActionClick,\n      onBackClick,\n      // store\n      allMessages,\n      loading,\n      initialized,\n      currentOpenChannel,\n      isInvalid,\n      hasMore,\n      lastMessageTimestamp,\n      operators,\n      bannedParticipantIds,\n      mutedParticipantIds,\n      // derived/utils\n      messageInputRef,\n      conversationScrollRef,\n      disabled,\n      amIBanned,\n      amIMuted,\n      amIOperator,\n      checkScrollBottom,\n      fetchMore,\n      onScroll,\n      handleSendMessage,\n      handleFileUpload,\n      updateMessage,\n      deleteMessage,\n      resendMessage,\n    }}>\n      <UserProfileProvider\n        isOpenChannel\n        renderUserProfile={props?.renderUserProfile}\n        disableUserProfile={props?.disableUserProfile}\n      >\n        {children}\n      </UserProfileProvider>\n    </OpenChannelContext.Provider>\n  );\n}\n\nexport type UseOpenChannelType = () => OpenChannelInterface;\nconst useOpenChannelContext: UseOpenChannelType = () => React.useContext(OpenChannelContext);\n\nexport {\n  OpenChannelProvider,\n  useOpenChannelContext,\n};\n"],"names":["getMessageCreatedAt","message","format","createdAt","shouldFetchMore","messageLength","maxMessages","scrollIntoLast","initialTry","scrollRef","MAX_TRIES","currentTry","scrollDOM","current","document","querySelector","scrollTop","scrollHeight","error","setTimeout","isSameGroup","comparingMessage","messageType","sender","_a","userId","_b","message_","comparingMessage_","sendingStatus","_c","_d","compareMessagesForGrouping","prevMessage","currMessage","nextMessage","kFormatter","num","Math","abs","toFixed","concat","isOperator","openChannel","operators","map","operator","indexOf","isDisabledBecauseFrozen","isFrozen","isDisabledBecauseMuted","mutedParticipantIds","fetchWithListQuery","listQuery","logger","eachQueryNextCallback","fetchList","query","hasNext","next","then","users","catch","warning","info","pxToNumber","px","parsed","Number","parseFloat","isNaN","SET_CURRENT_CHANNEL","SET_CHANNEL_INVALID","RESET_MESSAGES","EXIT_CURRENT_CHANNEL","GET_PREV_MESSAGES_START","GET_PREV_MESSAGES_SUCESS","GET_PREV_MESSAGES_FAIL","SENDING_MESSAGE_FAILED","SENDING_MESSAGE_SUCCEEDED","SENDING_MESSAGE_START","RESENDING_MESSAGE_START","FETCH_PARTICIPANT_LIST","FETCH_BANNED_USER_LIST","FETCH_MUTED_USER_LIST","TRIM_MESSAGE_LIST","ON_MESSAGE_RECEIVED","ON_MESSAGE_UPDATED","ON_MESSAGE_DELETED","ON_MESSAGE_DELETED_BY_REQ_ID","ON_OPERATOR_UPDATED","ON_USER_ENTERED","ON_USER_EXITED","ON_USER_MUTED","ON_USER_UNMUTED","ON_USER_BANNED","ON_USER_UNBANNED","ON_CHANNEL_FROZEN","ON_CHANNEL_UNFROZEN","ON_CHANNEL_CHANGED","ON_CHANNEL_DELETED","ON_META_DATA_CREATED","ON_META_DATA_UPDATED","ON_META_DATA_DELETED","ON_META_COUNTERS_CREATED","ON_META_COUNTERS_UPDATED","ON_META_COUNTERS_DELETED","ON_MENTION_RECEIVED","reducer","state","action","type","actionTypes","__assign","allMessages","payload","url","currentOpenChannel","gottenChannel","isInvalid","participants","bannedParticipantIds","loading","isFailed","_e","_f","messages","hasMore","lastMessageTimestamp","actionChannelUrl","receivedMessages_1","_hasMore","_lastMessageTimestamp","stateChannel","stateChannelUrl","filteredAllMessages","filter","find","messageId","compareIds","initialized","__spreadArray","_g","message_1","channel","some","m","reqId","sentMessage_1","newMessages","sentMessage_2","messageLimit","length","sliceAt","slice","eventedChannel","resentMessage_1","fetchedParticipantList","fetchedBannedUserList","every","user","fetchedMutedUserList","receivedMessage","updatedMessage_1","currentChannel","isIdentical","deletedMessageId_1","updatedOperators","enteredUser","exitedUser_1","participant","mutedUser","unmutedUser_1","bannedUser","currentUser","unbannedUser_1","frozenChannel","frozen","unfrozenChannel","changedChannel","deletedChannelUrl","initialState","useSetChannel","channelUrl","sdkInit","fetchingParticipants","sdk","messagesDispatcher","useEffect","exit","call","messageActionTypes","getChannel","enter","bannedParticipantListQuery","createBannedUserListQuery","mutedParticipantListQuery","createMutedUserListQuery","utils","getMyMutedInfo","mutedInfo","isMuted","participantListQuery","createParticipantListQuery","limit","participantCount","useHandleChannelEvents","checkScrollBottom","messageReceiverId","uuidv4","addOpenChannelHandler","channelHandlerParams","onMessageReceived","scrollToEnd","onMessageUpdated","onMessageDeleted","onOperatorUpdated","onUserEntered","onUserExited","onUserMuted","onUserUnmuted","onUserBanned","onUserUnbanned","onChannelFrozen","onChannelUnfrozen","onChannelChanged","onMetaDataCreated","metaData","onMetaDataUpdated","onMetaDataDeleted","metaDataKeys","onMetaCounterCreated","metaCounter","onMetaCounterUpdated","onMetaCounterDeleted","metaCounterKeys","onMentionReceived","onChannelDeleted","channelType","ChannelType","OPEN","ChannelHandler","OpenChannelHandler","removeOpenChannelHandler","useInitialMessagesFetch","userFilledMessageListParams","getMessagesByTimestamp","messageListParams_1","nextResultSize","prevResultSize","isInclusive","includeReactions","Object","keys","forEach","key","messageListParams","Date","getTime","useScrollCallback","fetchMore","useCallback","callback","useCheckScrollBottom","conversationScrollRef","isBottom","conversationScroll","clientHeight","useSendMessageCallback","onBeforeSendUserMessage","messageInputRef","text","innerText","createParamsDefault","txt","trim","params","createCustomParams","isBottom_1","pendingMsg_1","sendUserMessage","onPending","pendingMessage","onSucceeded","onFailed","code","useFileUploadCallback","imageCompression","onBeforeSendFileMessage","file","compressionRate_1","compressionRate","resizingWidth_1","resizingWidth","resizingHeight_1","createCustomParams_1","compressibleFileType","compressibleRatio","compressibleDiamensions_1","canCompressImage","createParamsDefault_1","file_","image_1","createElement","src","URL","createObjectURL","onload","revokeObjectURL","canvas","imageWidth","naturalWidth","width","imageHeight","naturalHeight","height","targetWidth","targetHeight","context","getContext","drawImage","toBlob","newImageBlob","compressedFile","File","name","sendFileMessage","requestState","localUrl","useUpdateMessageCallback","updateUserMessage","useDeleteMessageCallback","messageToDelete","deleteMessage","useResendMessageCallback","failedMessage","isResendable","resendUserMessage","resendFileMessage","console","THROTTLE_TIMER","useTrimMessageList","messagesLength","useState","inProgress","setInProgress","OpenChannelContext","React","createContext","undefined","OpenChannelProvider","props","children","isMessageGroupingEnabled","queries","onChatHeaderActionClick","onBackClick","globalStore","useSendbirdStateContext","stores","sdkStore","userStore","config","isOnline","pubSub","_h","useReducer","messagesReducer","messagesInitialState","messagesStore","useRef","disabled","amIBanned","useMemo","amIMuted","amIOperator","onScroll","handleSendMessage","handleFileUpload","updateMessage","resendMessage","subscriber","Map","subscribe","set","topics","msg","fromSelector","s","remove","UserProfileProvider","renderUserProfile","disableUserProfile","useOpenChannelContext","useContext"],"mappings":"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"}