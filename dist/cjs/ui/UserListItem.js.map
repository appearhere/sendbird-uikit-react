{"version":3,"file":"UserListItem.js","sources":["../../../src/ui/UserListItem/index.tsx"],"sourcesContent":["import React, { ChangeEvent, MutableRefObject, ReactElement, useContext } from 'react';\nimport { User } from '@sendbird/chat';\nimport { Member } from '@sendbird/chat/groupChannel';\nimport './index.scss';\n\nimport { UserProfileContext } from '../../lib/UserProfileContext';\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport Avatar from '../Avatar/index';\nimport MutedAvatarOverlay from '../Avatar/MutedAvatarOverlay';\nimport Checkbox from '../Checkbox';\nimport UserProfile from '../UserProfile';\nimport ContextMenu, { MenuItems } from '../ContextMenu';\nimport Label, { LabelTypography, LabelColors } from '../Label';\n\nexport interface UserListItemProps {\n  user: User;\n  className?: string;\n  checked?: boolean;\n  checkBox?: boolean;\n  isOperator?: boolean;\n  disabled?: boolean;\n  disableMessaging?: boolean;\n  currentUser?: string;\n  action?({ actionRef, parentRef }: {\n    actionRef: MutableRefObject<any>,\n    parentRef?: MutableRefObject<any>,\n  }): ReactElement;\n  onChange?(e: ChangeEvent<HTMLInputElement>): void;\n}\n\nexport default function UserListItem({\n  user,\n  className,\n  checked,\n  checkBox,\n  isOperator,\n  disabled,\n  disableMessaging,\n  currentUser,\n  action,\n  onChange,\n}: UserListItemProps): ReactElement {\n  const uniqueKey = user.userId;\n  const actionRef = React.useRef(null);\n  const parentRef = React.useRef(null);\n  const avatarRef = React.useRef(null);\n  const {\n    disableUserProfile,\n    renderUserProfile,\n  } = useContext<UserProfileContext>(UserProfileContext);\n  const { stringSet } = useContext(LocalizationContext);\n  return (\n    <div\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        'sendbird-user-list-item',\n      ].join(' ')}\n      ref={parentRef}\n    >\n      {\n        (user as Member)?.isMuted && (\n          <MutedAvatarOverlay height={40} width={40} />\n        )\n      }\n      <ContextMenu\n        menuTrigger={(toggleDropdown) => (\n          <Avatar\n            className=\"sendbird-user-list-item__avatar\"\n            ref={avatarRef}\n            src={user.profileUrl}\n            width=\"40px\"\n            height=\"40px\"\n            onClick={() => {\n              if (!disableUserProfile) {\n                toggleDropdown();\n              }\n            }}\n          />\n        )}\n        menuItems={(closeDropdown) => (\n          <MenuItems\n            openLeft\n            parentRef={avatarRef}\n            // for catching location(x, y) of MenuItems\n            parentContainRef={avatarRef}\n            // for toggling more options(menus & reactions)\n            closeDropdown={closeDropdown}\n            style={{ paddingTop: '0px', paddingBottom: '0px' }}\n          >\n            {\n              renderUserProfile\n                ? renderUserProfile({\n                  user,\n                  currentUserId: currentUser,\n                  close: closeDropdown,\n                })\n                : (\n                  <UserProfile\n                    disableMessaging={disableMessaging}\n                    user={user}\n                    currentUserId={currentUser}\n                    onSuccess={closeDropdown}\n                  />\n                )\n            }\n          </MenuItems>\n        )}\n      />\n      <Label\n        className=\"sendbird-user-list-item__title\"\n        type={LabelTypography.SUBTITLE_1}\n        color={LabelColors.ONBACKGROUND_1}\n      >\n        {user.nickname || stringSet.NO_NAME}\n        {\n          (currentUser === user.userId) && (\n            ' (You)'\n          )\n        }\n      </Label>\n      { // if there is now nickname, display userId\n        !user.nickname && (\n          <Label\n            className=\"sendbird-user-list-item__subtitle\"\n            type={LabelTypography.CAPTION_3}\n            color={LabelColors.ONBACKGROUND_2}\n          >\n            {user.userId}\n          </Label>\n        )\n      }\n      {\n        checkBox && (\n          <label\n            className=\"sendbird-user-list-item__checkbox\"\n            htmlFor={uniqueKey}\n          >\n            <Checkbox\n              id={uniqueKey}\n              checked={checked}\n              disabled={disabled}\n              onChange={(event) => onChange(event)}\n            />\n          </label>\n        )\n      }\n      {\n        isOperator && (\n          <Label\n            className={[\n              \"sendbird-user-list-item__operator\",\n              checkBox ? \"checkbox\" : \"\",\n            ].join(' ')}\n            type={LabelTypography.SUBTITLE_2}\n            color={LabelColors.ONBACKGROUND_2}\n          >\n            Operator\n          </Label>\n        )\n      }\n      {\n        action && (\n          <div\n            className=\"sendbird-user-list-item__action\"\n            ref={actionRef}\n          >\n            { action({ actionRef, parentRef })}\n          </div>\n        )\n      }\n    </div>\n  );\n}\n"],"names":["UserListItem","_a","user","className","checked","checkBox","isOperator","disabled","disableMessaging","currentUser","action","onChange","uniqueKey","userId","actionRef","React","useRef","parentRef","avatarRef","_b","useContext","UserProfileContext","disableUserProfile","renderUserProfile","stringSet","LocalizationContext","__spreadArray","Array","isArray","join","isMuted","MutedAvatarOverlay","ContextMenu","toggleDropdown","Avatar","profileUrl","closeDropdown","MenuItems","paddingTop","paddingBottom","currentUserId","close","UserProfile","Label","LabelTypography","SUBTITLE_1","LabelColors","ONBACKGROUND_1","nickname","NO_NAME","CAPTION_3","ONBACKGROUND_2","Checkbox","event","SUBTITLE_2"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BwB,SAAAA,YAAA,CAAaC,EAAb,EAWJ;MAVlBC,IAAI,GAAAD,EAAA,CAAAC;MACJC,SAAS,GAAAF,EAAA,CAAAE;MACTC,OAAO,GAAAH,EAAA,CAAAG;MACPC,QAAQ,GAAAJ,EAAA,CAAAI;MACRC,UAAU,GAAAL,EAAA,CAAAK;MACVC,QAAQ,GAAAN,EAAA,CAAAM;MACRC,gBAAgB,GAAAP,EAAA,CAAAO;MAChBC,WAAW,GAAAR,EAAA,CAAAQ;MACXC,MAAM,GAAAT,EAAA,CAAAS;MACNC,QAAQ,GAAAV,EAAA,CAAAU;AAER,EAAA,IAAMC,SAAS,GAAGV,IAAI,CAACW,MAAvB,CAAA;AACA,EAAA,IAAMC,SAAS,GAAGC,yBAAK,CAACC,MAAN,CAAa,IAAb,CAAlB,CAAA;AACA,EAAA,IAAMC,SAAS,GAAGF,yBAAK,CAACC,MAAN,CAAa,IAAb,CAAlB,CAAA;AACA,EAAA,IAAME,SAAS,GAAGH,yBAAK,CAACC,MAAN,CAAa,IAAb,CAAlB,CAAA;;AACM,EAAA,IAAAG,EAAA,GAGFC,gBAAU,CAAqBC,qCAArB,CAHR;AAAA,MACJC,kBAAkB,GAAAH,EAAA,CAAAG,kBADd;AAAA,MAEJC,iBAAiB,GAAAJ,EAAA,CAAAI,iBAFb,CAAA;;AAIE,EAAA,IAAAC,SAAS,GAAKJ,gBAAU,CAACK,uCAAD,CAAV,UAAd,CAAA;EACR,oBACEV,yBAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAEW,uBAAA,CAAAA,uBAAA,CAAA,EAAA,EACLC,KAAK,CAACC,OAAN,CAAczB,SAAd,CAAA,GAA2BA,SAA3B,GAAuC,CAACA,SAAD,CADlC,EAC8C,IAD9C,CAAA,EAC8C,CACvD,yBADuD,CAD9C,OAAA,CAAA,CAGT0B,IAHS,CAGJ,GAHI,CADb;AAKE,IAAA,GAAG,EAAEZ,SAAAA;AALP,GAAA,EAQI,CAACf,IAAe,KAAA,IAAf,IAAAA,IAAI,KAAA,KAAA,CAAJ,GAAI,KAAA,CAAJ,GAAAA,IAAI,CAAa4B,OAAlB,kBACEf,wCAACgB,qBAAD,EAAA;AAAoB,IAAA,MAAM,EAAE,EAA5B;AAAgC,IAAA,KAAK,EAAE,EAAA;GAT7C,CAAA,eAYEhB,wCAACiB,yBAAD,EAAA;IACE,WAAW,EAAE,UAACC,cAAD,EAAoB;AAAA,MAAA,oBAC/BlB,wCAACmB,oBAAD,EAAA;AACE,QAAA,SAAS,EAAC,iCADZ;AAEE,QAAA,GAAG,EAAEhB,SAFP;QAGE,GAAG,EAAEhB,IAAI,CAACiC,UAHZ;AAIE,QAAA,KAAK,EAAC,MAJR;AAKE,QAAA,MAAM,EAAC,MALT;AAME,QAAA,OAAO,EAAE,YAAA;UACP,IAAI,CAACb,kBAAL,EAAyB;YACvBW,cAAc,EAAA,CAAA;AACf,WAAA;AACF,SAAA;OAX4B,CAAA,CAAA;KADnC;IAeE,SAAS,EAAE,UAACG,aAAD;AAAmB,MAAA,oBAC5BrB,wCAACsB,wBAAD,EAAA;AACE,QAAA,QAAQ,EADV,IAAA;QAEE,SAAS,EAAEnB,SAFb;AAAA;QAIE,gBAAgB,EAAEA,SAJpB;AAAA;AAME,QAAA,aAAa,EAAEkB,aANjB;AAOE,QAAA,KAAK,EAAE;AAAEE,UAAAA,UAAU,EAAE,KAAd;AAAqBC,UAAAA,aAAa,EAAE,KAAA;AAApC,SAAA;OAGLhB,EAAAA,iBAAiB,GACbA,iBAAiB,CAAC;AAClBrB,QAAAA,IAAI,EAAAA,IADc;AAElBsC,QAAAA,aAAa,EAAE/B,WAFG;AAGlBgC,QAAAA,KAAK,EAAEL,aAAAA;OAHU,CADJ,gBAObrB,yBAAA,CAAA,aAAA,CAAC2B,cAAD,EAAA;AACE,QAAA,gBAAgB,EAAElC,gBADpB;AAEE,QAAA,IAAI,EAAEN,IAFR;AAGE,QAAA,aAAa,EAAEO,WAHjB;AAIE,QAAA,SAAS,EAAE2B,aAAAA;AAJb,OAAA,CAjBR,CAD4B,CAAA;AA2B7B,KAAA;GAtDL,CAAA,eAwDErB,wCAAC4B,cAAD,EAAA;AACE,IAAA,SAAS,EAAC,gCADZ;IAEE,IAAI,EAAEC,wBAAe,CAACC,UAFxB;IAGE,KAAK,EAAEC,oBAAW,CAACC,cAAAA;AAHrB,GAAA,EAKG7C,IAAI,CAAC8C,QAAL,IAAiBxB,SAAS,CAACyB,OAL9B,EAOKxC,WAAW,KAAKP,IAAI,CAACW,MAAtB,IACE,QARN,CAxDF;AAqEI,EAAA,CAACX,IAAI,CAAC8C,QAAN,iBACEjC,wCAAC4B,cAAD,EAAA;AACE,IAAA,SAAS,EAAC,mCADZ;IAEE,IAAI,EAAEC,wBAAe,CAACM,SAFxB;IAGE,KAAK,EAAEJ,oBAAW,CAACK,cAAAA;AAHrB,GAAA,EAKGjD,IAAI,CAACW,MALR,CAtEN,EAgFIR,QAAQ,iBACNU,yBAAA,CAAA,aAAA,CAAA,OAAA,EAAA;AACE,IAAA,SAAS,EAAC,mCADZ;AAEE,IAAA,OAAO,EAAEH,SAAAA;AAFX,GAAA,eAIEG,wCAACqC,WAAD,EAAA;AACE,IAAA,EAAE,EAAExC,SADN;AAEE,IAAA,OAAO,EAAER,OAFX;AAGE,IAAA,QAAQ,EAAEG,QAHZ;IAIE,QAAQ,EAAE,UAAC8C,KAAD,EAAM;MAAK,OAAA1C,QAAQ,CAAC0C,KAAD,CAAR,CAAA;AAAe,KAAA;AAJtC,GAAA,CAJF,CAjFN,EA+FI/C,UAAU,iBACRS,wCAAC4B,cAAD,EAAA;AACE,IAAA,SAAS,EAAE,CACT,mCADS,EAETtC,QAAQ,GAAG,UAAH,GAAgB,EAFf,CAAA,CAGTwB,IAHS,CAGJ,GAHI,CADb;IAKE,IAAI,EAAEe,wBAAe,CAACU,UALxB;IAME,KAAK,EAAER,oBAAW,CAACK,cAAAA;GAtG3B,EAAA,UAAA,CAAA,EA6GIzC,MAAM,iBACJK,yBAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAC,iCADZ;AAEE,IAAA,GAAG,EAAED,SAAAA;AAFP,GAAA,EAIIJ,MAAM,CAAC;AAAEI,IAAAA,SAAS,EAAAA,SAAX;AAAaG,IAAAA,SAAS,EAAAA,SAAAA;GAAvB,CAJV,CA9GN,CADF,CAAA;AAyHD;;;;"}