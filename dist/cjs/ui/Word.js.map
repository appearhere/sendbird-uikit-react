{"version":3,"file":"Word.js","sources":["../../../src/ui/Word/index.tsx"],"sourcesContent":["import './index.scss';\nimport React from 'react';\nimport type { UserMessage } from '@sendbird/chat/message';\n\nimport { LabelTypography } from '../Label';\nimport LinkLabel from '../LinkLabel';\nimport uuidv4 from '../../utils/uuid';\nimport { convertWordToStringObj, StringObjType, StringObj } from '../../utils';\nimport MentionLabel from '../MentionLabel';\n\ninterface WordProps {\n  word: string;\n  message: UserMessage;\n  isByMe?: boolean;\n  mentionTemplate?: string;\n  renderString?: (stringObj: StringObj) => JSX.Element;\n}\n\n// Word and StringObj will include types: normal, mention, url\nexport default function Word(props: WordProps): JSX.Element {\n  const {\n    word,\n    message,\n    isByMe = false,\n    mentionTemplate = '@',\n    renderString = null,\n  } = props;\n  if (word === '') {\n    return null;\n  }\n  return (\n    <span className=\"sendbird-word\">\n      {\n        convertWordToStringObj(word, message?.mentionedUsers).map((stringObj) => {\n          const type = stringObj?.type || '';\n          const value = stringObj?.value || '';\n          const userId = stringObj?.userId || '';\n          if (renderString && typeof renderString === 'function') {\n            return renderString(stringObj);\n          }\n          if (type === StringObjType.mention) {\n            return (\n              <MentionLabel\n                mentionTemplate={mentionTemplate}\n                mentionedUserId={userId}\n                mentionedUserNickname={value}\n                key={uuidv4()}\n                isByMe={isByMe}\n              />\n            );\n          } else if (type === StringObjType.url) {\n            const urlRegex = new RegExp(\"([a-zA-Z0-9]+://)?([a-zA-Z0-9_]+:[a-zA-Z0-9_]+@)?([a-zA-Z0-9.-]+\\\\.[A-Za-z]{2,4})(:[0-9]+)?(/.*)?\");\n            const targetUrl = urlRegex.exec(value)?.[0];\n            const stringUrl = { front: '', url: '', back: '' };\n            if (targetUrl) {\n              const targetUrlIndex = value.indexOf(targetUrl);\n              if (targetUrlIndex > 0) {\n                stringUrl.front = value.slice(0, targetUrlIndex);\n              }\n              stringUrl.url = value.slice(targetUrlIndex, targetUrlIndex + targetUrl.length);\n              if (targetUrlIndex + targetUrl.length < value.length) {\n                stringUrl.back = value.slice(targetUrlIndex + targetUrl.length);\n              }\n            }\n            if (targetUrl) {\n              return [\n                stringUrl.front ? stringUrl.front : '',\n                stringUrl.url ? (\n                  <LinkLabel\n                    className=\"sendbird-word__url\"\n                    key={uuidv4()}\n                    src={stringUrl.url}\n                    type={LabelTypography.BODY_1}\n                  >\n                    {stringUrl.url}\n                  </LinkLabel>\n                ) : null,\n                stringUrl.back ? stringUrl.back : '',\n              ];\n            }\n            return (\n              <LinkLabel\n                className=\"sendbird-word__url\"\n                key={uuidv4()}\n                src={word}\n                type={LabelTypography.BODY_1}\n              >\n                {value}\n              </LinkLabel>\n            );\n          } else {\n            return value\n          }\n        })\n      }\n    </span>\n  );\n}\n"],"names":["Word","props","word","message","_a","isByMe","_b","mentionTemplate","_c","renderString","React","convertWordToStringObj","mentionedUsers","map","stringObj","type","value","userId","StringObjType","mention","MentionLabel","uuidv4","url","urlRegex","RegExp","targetUrl","exec","stringUrl","front","back","targetUrlIndex","indexOf","slice","length","LinkLabel","LabelTypography","BODY_1"],"mappings":"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"}