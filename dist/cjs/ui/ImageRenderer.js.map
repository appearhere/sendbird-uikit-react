{"version":3,"file":"ImageRenderer.js","sources":["../../../src/ui/ImageRenderer/index.tsx"],"sourcesContent":["import React, { useState, useMemo, ReactElement } from 'react';\n\nimport './index.scss';\n\n/*\n  ImageRenderer displays image with url or source\n  it checks if the source exist with img tag first\n  if it exists onLoad is called, if not onError is called\n  and those properties switch img tag to real purposing element\n*/\n\nexport interface ImageRendererProps {\n  className?: string | Array<string>;\n  url: string;\n  alt?: string;\n  width?: string | number;\n  height?: string | number;\n  circle?: boolean;\n  fixedSize?: boolean;\n  placeHolder?: ((props: { style: { [key: string]: string | number } }) => ReactElement) | ReactElement;\n  defaultComponent?: (() => ReactElement) | ReactElement;\n  onLoad?: () => void;\n  onError?: () => void;\n}\n\nconst ImageRenderer = ({\n  className = '',\n  url,\n  alt = '',\n  width = null,\n  height = null,\n  circle = false,\n  fixedSize = false,\n  placeHolder = null,\n  defaultComponent = null,\n  onLoad = () => {/* noop */},\n  onError = () => {/* noop */},\n}: ImageRendererProps): ReactElement => {\n  const [showDefaultComponent, setShowDefaultComponent] = useState(false);\n  const [showPlaceHolder, setShowPlaceHolder] = useState(true);\n\n  const DefaultComponent = useMemo(() => {\n    return typeof defaultComponent === 'function'\n      ? defaultComponent()\n      : defaultComponent;\n  }, [defaultComponent]);\n\n  const PlaceHolder = useMemo(() => {\n    return (placeHolder && typeof placeHolder === 'function')\n      ? placeHolder({\n        style: {\n          width: '100%',\n          minWidth: width,\n          maxWidth: fixedSize ? width : '400px',\n          height,\n          position: 'absolute',\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n        }\n      })\n      : null;\n  }, [placeHolder]);\n\n  const HiddenImageLoader = useMemo(() => {\n    setShowDefaultComponent(false);\n    // reset the state when url is changed\n    return (\n      <img\n        className=\"sendbird-image-renderer__hidden-image-loader\"\n        src={url}\n        alt={alt}\n        onLoad={() => {\n          setShowPlaceHolder(false);\n          onLoad();\n        }}\n        onError={() => {\n          setShowDefaultComponent(true);\n          onError();\n        }}\n      />\n    );\n  }, [url]);\n\n  return (\n    <div\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        'sendbird-image-renderer',\n      ].join(' ')}\n      style={{\n        width: '100%',\n        minWidth: width,\n        maxWidth: fixedSize ? width : '400px',\n        height,\n      }}\n    >\n      {showPlaceHolder && PlaceHolder}\n      {\n        showDefaultComponent\n          ? DefaultComponent\n          : (\n            <div\n              className=\"sendbird-image-renderer__image\"\n              style={{\n                width: '100%',\n                minWidth: width,\n                maxWidth: fixedSize ? width : '400px',\n                height,\n                position: 'absolute',\n                backgroundRepeat: 'no-repeat',\n                backgroundPosition: 'center',\n                backgroundSize: 'cover',\n                backgroundImage: `url(${url})`,\n                borderRadius: circle ? '50%' : null,\n              }}\n            />\n          )\n      }\n      {HiddenImageLoader}\n    </div>\n  );\n};\n\nexport default ImageRenderer;\n"],"names":["ImageRenderer","_a","_b","className","url","_c","alt","_d","width","_e","height","_f","circle","_g","fixedSize","_h","placeHolder","_j","defaultComponent","_k","onLoad","_l","onError","_m","useState","showDefaultComponent","setShowDefaultComponent","_o","showPlaceHolder","setShowPlaceHolder","DefaultComponent","useMemo","PlaceHolder","style","minWidth","maxWidth","position","display","justifyContent","alignItems","HiddenImageLoader","React","__spreadArray","Array","isArray","join","backgroundRepeat","backgroundPosition","backgroundSize","backgroundImage","concat","borderRadius"],"mappings":"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"}