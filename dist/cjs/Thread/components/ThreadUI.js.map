{"version":3,"file":"ThreadUI.js","sources":["../../../../src/smart-components/Thread/components/ThreadUI/useMemorizedHeader.tsx","../../../../src/smart-components/Thread/components/ThreadUI/useMemorizedParentMessageInfo.tsx","../../../../src/smart-components/Thread/components/ThreadUI/useMemorizedThreadList.tsx","../../../../src/smart-components/Thread/components/ThreadUI/index.tsx"],"sourcesContent":["import React, { ReactElement, useMemo } from 'react';\n\nexport interface UseMemorizedHeaderProps {\n  renderHeader?: () => React.ReactElement;\n}\n\nconst useMemorizedHeader = ({ renderHeader }: UseMemorizedHeaderProps): ReactElement => useMemo(() => {\n  if (typeof renderHeader === 'function') {\n    return renderHeader();\n  }\n  return null;\n}, [renderHeader]);\n\nexport default useMemorizedHeader;\n","import React, { ReactElement, useMemo } from 'react';\n\nimport { ParentMessageStateTypes } from '../../types';\nimport PlaceHolder, { PlaceHolderTypes } from '../../../../ui/PlaceHolder';\nimport { FileMessage, UserMessage } from '@sendbird/chat/message';\n\nexport interface UseMemorizedParentMessageInfoProps {\n  parentMessage: UserMessage | FileMessage;\n  parentMessageState: ParentMessageStateTypes;\n  renderParentMessageInfo?: () => React.ReactElement;\n  renderParentMessageInfoPlaceholder?: (type: ParentMessageStateTypes) => React.ReactElement;\n}\n\nconst useMemorizedParentMessageInfo = ({\n  parentMessage,\n  parentMessageState,\n  renderParentMessageInfo,\n  renderParentMessageInfoPlaceholder,\n}: UseMemorizedParentMessageInfoProps): ReactElement => useMemo(() => {\n  if (parentMessageState === ParentMessageStateTypes.NIL\n    || parentMessageState === ParentMessageStateTypes.LOADING\n    || parentMessageState === ParentMessageStateTypes.INVALID\n  ) {\n    if (typeof renderParentMessageInfoPlaceholder === 'function') {\n      return renderParentMessageInfoPlaceholder(parentMessageState);\n    }\n    switch (parentMessageState) {\n      case ParentMessageStateTypes.NIL: {\n        return (\n          <PlaceHolder\n            className=\"sendbird-thread-ui__parent-message-info placeholder-nil\"\n            type={PlaceHolderTypes.NO_RESULTS}\n            iconSize=\"64px\"\n          />\n        );\n      }\n      case ParentMessageStateTypes.LOADING: {\n        return (\n          <PlaceHolder\n            className=\"sendbird-thread-ui__parent-message-info placeholder-loading\"\n            type={PlaceHolderTypes.LOADING}\n            iconSize=\"64px\"\n          />\n        );\n      }\n      case ParentMessageStateTypes.INVALID: {\n        return (\n          <PlaceHolder\n            className=\"sendbird-thread-ui__parent-message-info placeholder-invalid\"\n            type={PlaceHolderTypes.WRONG}\n            iconSize=\"64px\"\n          />\n        );\n      }\n      default: {\n        return null;\n      }\n    }\n  } else if (parentMessageState === ParentMessageStateTypes.INITIALIZED) {\n    if (typeof renderParentMessageInfo === 'function') {\n      return renderParentMessageInfo();\n    }\n  }\n  return null;\n}, [\n  parentMessage,\n  parentMessageState,\n  renderParentMessageInfo,\n  renderParentMessageInfoPlaceholder,\n]);\n\nexport default useMemorizedParentMessageInfo;\n","import React, { ReactElement, useMemo } from 'react';\nimport PlaceHolder, { PlaceHolderTypes } from '../../../../ui/PlaceHolder';\n\nimport { ThreadListStateTypes } from '../../types';\n\nexport interface UseMemorizedThreadListProps {\n  threadListState: ThreadListStateTypes;\n  renderThreadListPlaceHolder?: (tyep: ThreadListStateTypes) => React.ReactElement;\n}\n\nconst useMemorizedThreadList = ({\n  threadListState,\n  renderThreadListPlaceHolder,\n}: UseMemorizedThreadListProps): ReactElement => useMemo(() => {\n  if (threadListState === ThreadListStateTypes.NIL\n    || threadListState === ThreadListStateTypes.LOADING\n    || threadListState === ThreadListStateTypes.INVALID\n  ) {\n    if (typeof renderThreadListPlaceHolder === 'function') {\n      return renderThreadListPlaceHolder(threadListState);\n    }\n    switch (threadListState) {\n      case ThreadListStateTypes.LOADING: {\n        return (\n          <PlaceHolder\n            className=\"sendbird-thread-ui__thread-list placeholder-loading\"\n            type={PlaceHolderTypes.LOADING}\n            iconSize=\"64px\"\n          />\n        );\n      }\n      case ThreadListStateTypes.INVALID: {\n        return (\n          <PlaceHolder\n            className=\"sendbird-thread-ui__thread-list placeholder-invalid\"\n            type={PlaceHolderTypes.WRONG}\n            iconSize=\"64px\"\n          />\n        );\n      }\n      case ThreadListStateTypes.NIL: {\n        return <></>;\n      }\n      default: {\n        return null;\n      }\n    }\n  }\n  return null;\n}, [\n  threadListState,\n  renderThreadListPlaceHolder,\n]);\n\nexport default useMemorizedThreadList;\n","import React, { useRef, useState } from 'react';\nimport { FileMessage, UserMessage } from '@sendbird/chat/message';\n\nimport './index.scss';\n\nimport useSendbirdStateContext from '../../../../hooks/useSendbirdStateContext';\nimport { useLocalization } from '../../../../lib/LocalizationContext';\nimport { getChannelTitle } from '../../../Channel/components/ChannelHeader/utils';\nimport { useThreadContext } from '../../context/ThreadProvider';\nimport { ParentMessageStateTypes, ThreadListStateTypes } from '../../types';\nimport ParentMessageInfo from '../ParentMessageInfo';\nimport ThreadHeader from '../ThreadHeader';\nimport ThreadList from '../ThreadList';\nimport ThreadMessageInput from '../ThreadMessageInput';\nimport useMemorizedHeader from './useMemorizedHeader';\nimport useMemorizedParentMessageInfo from './useMemorizedParentMessageInfo';\nimport useMemorizedThreadList from './useMemorizedThreadList';\nimport Label, { LabelTypography, LabelColors } from '../../../../ui/Label';\nimport { isAboutSame } from '../../context/utils';\n\nexport interface ThreadUIProps {\n  renderHeader?: () => React.ReactElement;\n  renderParentMessageInfo?: () => React.ReactElement;\n  renderMessage?: (props: {\n    message: UserMessage | FileMessage,\n    chainTop: boolean,\n    chainBottom: boolean,\n    hasSeparator: boolean,\n  }) => React.ReactElement;\n  renderMessageInput?: () => React.ReactElement;\n  renderCustomSeparator?: () => React.ReactElement;\n  renderParentMessageInfoPlaceholder?: (type: ParentMessageStateTypes) => React.ReactElement;\n  renderThreadListPlaceHolder?: (type: ThreadListStateTypes) => React.ReactElement;\n}\n\nconst ThreadUI: React.FC<ThreadUIProps> = ({\n  renderHeader,\n  renderParentMessageInfo,\n  renderMessage,\n  renderMessageInput,\n  renderCustomSeparator,\n  renderParentMessageInfoPlaceholder,\n  renderThreadListPlaceHolder,\n}: ThreadUIProps): React.ReactElement => {\n  const {\n    stores,\n  } = useSendbirdStateContext();\n  const currentUserId = stores?.sdkStore?.sdk?.currentUser?.userId;\n  const {\n    stringSet,\n  } = useLocalization();\n  const {\n    currentChannel,\n    allThreadMessages,\n    parentMessage,\n    parentMessageState,\n    threadListState,\n    hasMorePrev,\n    hasMoreNext,\n    fetchPrevThreads,\n    fetchNextThreads,\n    onHeaderActionClick,\n    onMoveToParentMessage,\n  } = useThreadContext();\n  const replyCount = allThreadMessages.length;\n\n  // Memoized custom components\n  const MemorizedHeader = useMemorizedHeader({ renderHeader });\n  const MemorizedParentMessageInfo = useMemorizedParentMessageInfo({\n    parentMessage,\n    parentMessageState,\n    renderParentMessageInfo,\n    renderParentMessageInfoPlaceholder, // nil, loading, invalid\n  });\n  const MemorizedThreadList = useMemorizedThreadList({\n    threadListState,\n    renderThreadListPlaceHolder,\n  });\n\n  // scroll\n  const [scrollBottom, setScrollBottom] = useState(0);\n  const scrollRef = useRef(null);\n  const onScroll = (e) => {\n    const element = e.target;\n    const {\n      scrollTop,\n      clientHeight,\n      scrollHeight,\n    } = element;\n\n    const threadItemNodes = scrollRef.current.querySelectorAll('.sendbird-thread-list-item');\n    const firstNode = threadItemNodes?.[0];\n    if (isAboutSame(scrollTop, 0, 10) && hasMorePrev) {\n      fetchPrevThreads((messages) => {\n        if (messages) {\n          try {\n            firstNode?.scrollIntoView?.({ block: 'start', inline: 'nearest' });\n          } catch (error) {\n            //\n          }\n        }\n      });\n    }\n\n    if (isAboutSame(clientHeight + scrollTop, scrollHeight, 10) && hasMoreNext) {\n      const scrollTop_ = scrollTop;\n      fetchNextThreads((messages) => {\n        if (messages) {\n          try {\n            element.scrollTop = scrollTop_;\n            scrollRef.current.scrollTop = scrollTop_;\n          } catch (error) {\n            //\n          }\n        }\n      });\n    }\n\n    // save the lastest scroll bottom value\n    if (scrollRef?.current) {\n      const current = scrollRef?.current;\n      setScrollBottom(current.scrollHeight - current.scrollTop - current.offsetHeight)\n    }\n  };\n\n  return (\n    <div className='sendbird-thread-ui'>\n      {\n        MemorizedHeader || (\n          <ThreadHeader\n            className=\"sendbird-thread-ui__header\"\n            channelName={getChannelTitle(currentChannel, currentUserId, stringSet)}\n            onActionIconClick={onHeaderActionClick}\n            onChannelNameClick={() => onMoveToParentMessage({ message: parentMessage, channel: currentChannel })}\n          />\n        )\n      }\n      <div\n        className=\"sendbird-thread-ui--scroll\"\n        ref={scrollRef}\n        onScroll={onScroll}\n      >\n        {\n          MemorizedParentMessageInfo || (\n            <ParentMessageInfo\n              className=\"sendbird-thread-ui__parent-message-info\"\n            />\n          )\n        }\n        {\n          replyCount > 0 && (\n            <div className=\"sendbird-thread-ui__reply-counts\">\n              <Label\n                type={LabelTypography.BODY_1}\n                color={LabelColors.ONBACKGROUND_3}\n              >\n                {`${replyCount} ${replyCount > 1 ? stringSet.THREAD__THREAD_REPLIES : stringSet.THREAD__THREAD_REPLY}`}\n              </Label>\n            </div>\n          )\n        }\n        {\n          MemorizedThreadList || (\n            <ThreadList\n              className=\"sendbird-thread-ui__thread-list\"\n              allThreadMessages={allThreadMessages}\n              renderMessage={renderMessage}\n              renderCustomSeparator={renderCustomSeparator}\n              scrollRef={scrollRef}\n              scrollBottom={scrollBottom}\n            />\n          )\n        }\n        {/* MessageInput */}\n        {\n          renderMessageInput?.() || (\n            <ThreadMessageInput\n              className=\"sendbird-thread-ui__message-input\"\n            />\n          )\n        }\n      </div>\n    </div>\n  );\n};\n\nexport default ThreadUI;\n"],"names":["useMemorizedHeader","_a","renderHeader","useMemo","useMemorizedParentMessageInfo","parentMessage","parentMessageState","renderParentMessageInfo","renderParentMessageInfoPlaceholder","ParentMessageStateTypes","NIL","LOADING","INVALID","React","PlaceHolder","PlaceHolderTypes","NO_RESULTS","WRONG","INITIALIZED","useMemorizedThreadList","threadListState","renderThreadListPlaceHolder","ThreadListStateTypes","ThreadUI","renderMessage","renderMessageInput","renderCustomSeparator","stores","useSendbirdStateContext","currentUserId","_d","_b","sdkStore","sdk","currentUser","userId","stringSet","useLocalization","_e","useThreadContext","currentChannel","allThreadMessages","hasMorePrev","hasMoreNext","fetchPrevThreads","fetchNextThreads","onHeaderActionClick","onMoveToParentMessage","replyCount","length","MemorizedHeader","MemorizedParentMessageInfo","MemorizedThreadList","_f","useState","scrollBottom","setScrollBottom","scrollRef","useRef","onScroll","e","element","target","scrollTop","clientHeight","scrollHeight","threadItemNodes","current","querySelectorAll","firstNode","isAboutSame","messages","scrollIntoView","call","block","inline","error","scrollTop_1","offsetHeight","ThreadHeader","getChannelTitle","message","channel","ParentMessageInfo","Label","LabelTypography","BODY_1","LabelColors","ONBACKGROUND_3","concat","THREAD__THREAD_REPLIES","THREAD__THREAD_REPLY","ThreadList","ThreadMessageInput"],"mappings":"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"}