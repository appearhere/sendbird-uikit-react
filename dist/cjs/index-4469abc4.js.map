{"version":3,"file":"index-4469abc4.js","sources":["../../src/utils/openChannelUtils.ts","../../src/ui/OpenChannelMobileMenu/index.tsx"],"sourcesContent":["import type { User } from '@sendbird/chat';\nimport type { FileMessage, UserMessage } from '@sendbird/chat/message';\n\nconst OpenChannelMessageStatusTypes = {\n  NONE: 'none',\n  PENDING: 'pending',\n  FAILED: 'failed',\n  CANCELED: 'canceled',\n  SUCCEEDED: 'succeeded'\n};\n\nexport const getSenderFromMessage = (message: UserMessage | FileMessage): User => {\n  // @ts-ignore\n  return message.sender || message._sender;\n};\n\nexport const checkIsSent = (status: string): boolean => (status === OpenChannelMessageStatusTypes.SUCCEEDED);\nexport const checkIsPending = (status: string): boolean => (status === OpenChannelMessageStatusTypes.PENDING);\nexport const checkIsFailed = (status: string): boolean => (status === OpenChannelMessageStatusTypes.FAILED);\n\nexport const checkIsByMe = (message: UserMessage | FileMessage, userId: string): boolean => (getSenderFromMessage(message).userId === userId);\n\ninterface isFineCopyParams {\n  message: UserMessage;\n  status: string;\n  userId: string;\n}\nexport const isFineCopy = ({ message }: isFineCopyParams): boolean => {\n  return (message?.messageType === 'user' && message?.message?.length > 0);\n};\n\ninterface isFineResendParams {\n  message: UserMessage | FileMessage;\n  status: string;\n  userId: string;\n}\nexport const isFineResend = ({ message, status, userId }: isFineResendParams): boolean => {\n  return checkIsByMe(message, userId)\n    && checkIsFailed(status)\n    // @ts-ignore\n    && message?.isResendable();\n};\n\ninterface isFineEditParams {\n  message: UserMessage | FileMessage;\n  status: string;\n  userId: string;\n}\nexport const isFineEdit = ({ message, status, userId }: isFineEditParams): boolean => {\n  return checkIsByMe(message, userId) && checkIsSent(status) && message?.isUserMessage?.();\n};\n\ninterface isFineDeleteParams {\n  message: UserMessage | FileMessage;\n  status: string;\n  userId: string;\n}\nexport const isFineDelete = ({ message, userId }: isFineDeleteParams): boolean => {\n  return checkIsByMe(message, userId);\n};\n\ninterface IsFineDownloadParams {\n  message: FileMessage | UserMessage;\n  status: string;\n}\n\nexport const isFineDownload = ({ message, status }: IsFineDownloadParams): boolean => {\n  if (message?.isFileMessage?.() && checkIsSent(status)) {\n    return true;\n  }\n  return false;\n};\n\ninterface showMenuTriggerParams {\n  message: UserMessage | FileMessage;\n  status: string;\n  userId: string;\n}\nexport const showMenuTrigger = (props: showMenuTriggerParams): boolean => {\n  const { message, status, userId } = props;\n  // @ts-ignore\n  if (message.messageType === 'user') {\n    return (\n      isFineDelete({ message, status, userId })\n      || isFineEdit({ message, status, userId })\n      // @ts-ignore\n      || isFineCopy({ message, status, userId })\n      || isFineResend({ message, status, userId })\n    );\n  } else {\n    return (\n      isFineDelete({ message, status, userId })\n      || isFineResend({ message, status, userId })\n    );\n  }\n};\n","import './open-channel-mobile-menu.scss';\n\nimport React from 'react';\nimport type { FileMessage, UserMessage } from '@sendbird/chat/message';\nimport ContextMenu, { MenuItems, MenuItem } from '../ContextMenu';\nimport {\n  isFineDelete,\n  isFineResend,\n  isFineCopy,\n  isFineEdit,\n  isFineDownload,\n} from '../../utils/openChannelUtils';\nimport useSendbirdStateContext from '../../hooks/useSendbirdStateContext';\nimport { useLocalization } from '../../lib/LocalizationContext';\n\ntype Props = {\n  message: UserMessage | FileMessage;\n  parentRef: React.RefObject<HTMLDivElement>;\n  resendMessage?(): void;\n  showRemove?(): void;\n  copyToClipboard?(): void;\n  showEdit?(): void;\n  hideMenu(): void;\n};\n\nconst OpenChannelMobileMenu: React.FC<Props> = (props: Props) => {\n  const {\n    message,\n    parentRef,\n    resendMessage,\n    showEdit,\n    showRemove,\n    copyToClipboard,\n    hideMenu,\n  } = props;\n  const userMessage = message as UserMessage;\n  const status = message?.sendingStatus;\n  const { stringSet } = useLocalization();\n  const userId = useSendbirdStateContext()?.config?.userId;\n  const fileMessage = message as FileMessage;\n  return (\n    <ContextMenu\n      isOpen\n      menuItems={() => (\n        <MenuItems\n          className=\"sendbird-openchannel__mobile-menu\"\n          parentRef={parentRef}\n          parentContainRef={parentRef}\n          closeDropdown={hideMenu}\n        >\n          {\n            isFineCopy({ message: userMessage, userId, status }) && (\n              <MenuItem\n                className=\"sendbird-openchannel-og-message__top__context-menu__copy\"\n                onClick={() => {\n                  copyToClipboard();\n                }}\n              >\n                <>{stringSet.CONTEXT_MENU_DROPDOWN__COPY}</>\n              </MenuItem>\n            )\n          }\n          {\n            isFineEdit({ message, userId, status }) && (\n              <MenuItem\n                className=\"sendbird-openchannel-og-message__top__context-menu__edit\"\n                onClick={() => {\n                  showEdit();\n                }}\n              >\n                <>{stringSet.CONTEXT_MENU_DROPDOWN__EDIT}</>\n              </MenuItem>\n            )\n          }\n          {\n            isFineResend({ message, userId, status }) && (\n              <MenuItem\n                onClick={() => {\n                  resendMessage();\n                }}\n              >\n                <>{stringSet.CONTEXT_MENU_DROPDOWN__RESEND}</>\n              </MenuItem>\n            )\n          }\n          {\n            isFineDelete({ message, userId, status }) && (\n              <MenuItem\n                onClick={() => {\n                  showRemove();\n                }}\n              >\n                <>{stringSet.CONTEXT_MENU_DROPDOWN__DELETE}</>\n              </MenuItem>\n            )\n          }\n          {\n            isFineDownload({ message, status }) && (\n                <MenuItem\n                  onClick={() => {\n                    hideMenu();\n                  }}\n                >\n                  <a\n                    className=\"sendbird-openchannel__mobile-menu-hyperlink\"\n                    rel=\"noopener noreferrer\"\n                    href={fileMessage?.url}\n                    target=\"_blank\"\n                  >\n                    {stringSet.CONTEXT_MENU_DROPDOWN__SAVE}\n                  </a>\n                </MenuItem>\n            )\n          }\n        </MenuItems>\n      )\n    }/>\n  )\n}\n\nexport default OpenChannelMobileMenu;\n"],"names":["OpenChannelMessageStatusTypes","NONE","PENDING","FAILED","CANCELED","SUCCEEDED","getSenderFromMessage","message","sender","_sender","checkIsSent","status","checkIsPending","checkIsFailed","checkIsByMe","userId","isFineCopy","_a","messageType","_b","length","isFineResend","isResendable","isFineEdit","isUserMessage","call","isFineDelete","isFineDownload","isFileMessage","showMenuTrigger","props","OpenChannelMobileMenu","parentRef","resendMessage","showEdit","showRemove","copyToClipboard","hideMenu","userMessage","sendingStatus","stringSet","useLocalization","useSendbirdStateContext","config","fileMessage","React","ContextMenu","MenuItems","MenuItem","CONTEXT_MENU_DROPDOWN__COPY","CONTEXT_MENU_DROPDOWN__EDIT","CONTEXT_MENU_DROPDOWN__RESEND","CONTEXT_MENU_DROPDOWN__DELETE","url","CONTEXT_MENU_DROPDOWN__SAVE"],"mappings":";;;;;;;;;;;AAGA,IAAMA,6BAA6B,GAAG;AACpCC,EAAAA,IAAI,EAAE,MAD8B;AAEpCC,EAAAA,OAAO,EAAE,SAF2B;AAGpCC,EAAAA,MAAM,EAAE,QAH4B;AAIpCC,EAAAA,QAAQ,EAAE,UAJ0B;AAKpCC,EAAAA,SAAS,EAAE,WAAA;AALyB,CAAtC,CAAA;AAQaC,IAAAA,oBAAoB,GAAG,UAACC,OAAD,EAAmC;AACrE;AACA,EAAA,OAAOA,OAAO,CAACC,MAAR,IAAkBD,OAAO,CAACE,OAAjC,CAAA;AACD,EAHM;AAKMC,IAAAA,WAAW,GAAG,UAACC,MAAD,EAA6B;AAAA,EAAA,OAACA,MAAM,KAAKX,6BAA6B,CAACK,SAA1C,CAAA;AAAoD,EAArG;AACMO,IAAAA,cAAc,GAAG,UAACD,MAAD,EAA6B;AAAA,EAAA,OAACA,MAAM,KAAKX,6BAA6B,CAACE,OAA1C,CAAA;AAAkD,EAAtG;AACMW,IAAAA,aAAa,GAAG,UAACF,MAAD,EAA6B;AAAA,EAAA,OAACA,MAAM,KAAKX,6BAA6B,CAACG,MAA1C,CAAA;AAAiD,EAApG;AAEA,IAAMW,WAAW,GAAG,UAACP,OAAD,EAAqCQ,MAArC,EAAmD;AAAc,EAAA,OAACT,oBAAoB,CAACC,OAAD,CAApB,CAA8BQ,MAA9B,KAAyCA,MAA1C,CAAA;AAAiD,CAAtI,CAAA;AAOMC,IAAAA,UAAU,GAAG,UAACC,EAAD,EAA8B;;;AAA3B,EAAA,IAAAV,OAAO,GAAAU,EAAA,CAAAV,OAAP,CAAA;EAC3B,OAAQ,CAAAA,OAAO,KAAP,IAAA,IAAAA,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,OAAO,CAAEW,WAAT,MAAyB,MAAzB,IAAmC,CAAA,MAAAX,OAAO,KAAA,IAAP,IAAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAAA,OAAO,CAAEA,OAAT,MAAgB,IAAhB,IAAgBY,EAAA,KAAA,KAAA,CAAhB,GAAgB,KAAA,CAAhB,GAAgBA,EAAA,CAAEC,MAAlB,IAA2B,CAAtE,CAAA;AACD,EAFM;AASMC,IAAAA,YAAY,GAAG,UAACJ,EAAD,EAAgD;AAA7C,EAAA,IAAAV,OAAO,aAAP;AAAA,MAASI,MAAM,GAAAM,EAAA,CAAAN,MAAf;AAAA,MAAiBI,MAAM,GAAAE,EAAA,CAAAF,MAAvB,CAAA;EAC7B,OAAOD,WAAW,CAACP,OAAD,EAAUQ,MAAV,CAAX,IACFF,aAAa,CAACF,MAAD,CADX;AAAA,MAGFJ,OAAO,KAAA,IAAP,IAAAA,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,OAAO,CAAEe,YAAT,EAHE,CAAP,CAAA;AAID,EALM;AAYMC,IAAAA,UAAU,GAAG,UAACN,EAAD,EAA8C;;;AAA3C,EAAA,IAAAV,OAAO,aAAP;AAAA,MAASI,MAAM,GAAAM,EAAA,CAAAN,MAAf;AAAA,MAAiBI,MAAM,GAAAE,EAAA,CAAAF,MAAvB,CAAA;EAC3B,OAAOD,WAAW,CAACP,OAAD,EAAUQ,MAAV,CAAX,IAAgCL,WAAW,CAACC,MAAD,CAA3C,KAAuD,CAAAQ,EAAA,GAAAZ,OAAO,SAAP,IAAAA,OAAO,KAAA,KAAA,CAAP,GAAO,KAAA,CAAP,GAAAA,OAAO,CAAEiB,aAAT,MAA0B,IAA1B,IAA0BL,EAAA,KAAA,KAAA,CAA1B,GAA0B,KAAA,CAA1B,GAA0BA,EAAA,CAAAM,IAAA,CAAAlB,OAAA,CAAjF,CAAP,CAAA;AACD,EAFM;AASMmB,IAAAA,YAAY,GAAG,UAACT,EAAD,EAAwC;MAArCV,OAAO,GAAAU,EAAA,CAAAV;MAAEQ,MAAM,GAAAE,EAAA,CAAAF;AAC5C,EAAA,OAAOD,WAAW,CAACP,OAAD,EAAUQ,MAAV,CAAlB,CAAA;AACD,EAFM;AASA,IAAMY,cAAc,GAAG,UAACV,EAAD,EAA0C;;;MAAvCV,OAAO,GAAAU,EAAA,CAAAV;MAAEI,MAAM,GAAAM,EAAA,CAAAN;;AAC9C,EAAA,IAAI,CAAA,CAAAQ,EAAA,GAAAZ,OAAO,KAAA,IAAP,IAAAA,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,OAAO,CAAEqB,aAAT,UAAA,iBAAA,SAAA,mBAAA,KAA8BlB,WAAW,CAACC,MAAD,CAA7C,EAAuD;AACrD,IAAA,OAAO,IAAP,CAAA;AACD,GAAA;;AACD,EAAA,OAAO,KAAP,CAAA;AACD,CALM,CAAA;AAYMkB,IAAAA,eAAe,GAAG,UAACC,KAAD,EAA6B;AAClD,EAAA,IAAAvB,OAAO,GAAqBuB,KAAK,CAAAvB,OAAjC;AAAA,MAASI,MAAM,GAAamB,KAAK,CAAAnB,MAAjC;AAAA,MAAiBI,MAAM,GAAKe,KAAK,OAAjC,CADkD;;AAG1D,EAAA,IAAIvB,OAAO,CAACW,WAAR,KAAwB,MAA5B,EAAoC;AAClC,IAAA,OACEQ,YAAY,CAAC;AAAEnB,MAAAA,OAAO,EAAAA,OAAT;AAAWI,MAAAA,MAAM,EAAAA,MAAjB;AAAmBI,MAAAA,MAAM,EAAAA,MAAAA;KAA1B,CAAZ,IACGQ,UAAU,CAAC;AAAEhB,MAAAA,OAAO,EAAAA,OAAT;AAAWI,MAAAA,MAAM,EAAAA,MAAjB;AAAmBI,MAAAA,MAAM,EAAAA,MAAAA;AAAzB,KAAD,CADb;AAAA,OAGGC,UAAU,CAAC;AAAET,MAAAA,OAAO,EAAAA,OAAT;AAAWI,MAAAA,MAAM,EAAAA,MAAjB;AAAmBI,MAAAA,MAAM,EAAAA,MAAAA;KAA1B,CAHb,IAIGM,YAAY,CAAC;AAAEd,MAAAA,OAAO,EAAAA,OAAT;AAAWI,MAAAA,MAAM,EAAAA,MAAjB;AAAmBI,MAAAA,MAAM,EAAAA,MAAAA;AAAzB,KAAD,CALjB,CAAA;AAOD,GARD,MAQO;AACL,IAAA,OACEW,YAAY,CAAC;AAAEnB,MAAAA,OAAO,EAAAA,OAAT;AAAWI,MAAAA,MAAM,EAAAA,MAAjB;AAAmBI,MAAAA,MAAM,EAAAA,MAAAA;KAA1B,CAAZ,IACGM,YAAY,CAAC;AAAEd,MAAAA,OAAO,EAAAA,OAAT;AAAWI,MAAAA,MAAM,EAAAA,MAAjB;AAAmBI,MAAAA,MAAM,EAAAA,MAAAA;AAAzB,KAAD,CAFjB,CAAA;AAID,GAAA;AACF;;ACtED,IAAMgB,qBAAqB,GAAoB,UAACD,KAAD,EAAa;;;AAExD,EAAA,IAAAvB,OAAO,GAOLuB,KAAK,CAAAvB,OAPP;AAAA,MACAyB,SAAS,GAMPF,KAAK,CAAAE,SAPP;AAAA,MAEAC,aAAa,GAKXH,KAAK,CAAAG,aAPP;AAAA,MAGAC,QAAQ,GAINJ,KAAK,CAAAI,QAPP;AAAA,MAIAC,UAAU,GAGRL,KAAK,WAPP;AAAA,MAKAM,eAAe,GAEbN,KAAK,gBAPP;AAAA,MAMAO,QAAQ,GACNP,KAAK,SAPP,CAAA;EAQF,IAAMQ,WAAW,GAAG/B,OAApB,CAAA;AACA,EAAA,IAAMI,MAAM,GAAGJ,OAAO,KAAA,IAAP,IAAAA,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,OAAO,CAAEgC,aAAxB,CAAA;AACQ,EAAA,IAAAC,SAAS,GAAKC,mCAAe,EAAA,UAA7B,CAAA;AACR,EAAA,IAAM1B,MAAM,GAAG,CAAAI,EAAA,GAAA,CAAAF,EAAA,GAAAyB,uBAAuB,EAAvB,MAA2B,IAA3B,IAA2BzB,EAAA,KAAA,KAAA,CAA3B,GAA2B,KAAA,CAA3B,GAA2BA,EAAA,CAAA0B,MAA3B,MAAmC,IAAnC,IAAmCxB,EAAA,KAAA,KAAA,CAAnC,GAAmC,KAAA,CAAnC,GAAmCA,EAAA,CAAAJ,MAAlD,CAAA;EACA,IAAM6B,WAAW,GAAGrC,OAApB,CAAA;AACA,EAAA,oBACEsC,wCAACC,yBAAD,EAAA;AACE,IAAA,MAAM,EADR,IAAA;AAEE,IAAA,SAAS,EAAE,YAAA;AAAM,MAAA,oBACfD,wCAACE,wBAAD,EAAA;AACE,QAAA,SAAS,EAAC,mCADZ;AAEE,QAAA,SAAS,EAAEf,SAFb;AAGE,QAAA,gBAAgB,EAAEA,SAHpB;AAIE,QAAA,aAAa,EAAEK,QAAAA;AAJjB,OAAA,EAOIrB,UAAU,CAAC;AAAET,QAAAA,OAAO,EAAE+B,WAAX;AAAwBvB,QAAAA,MAAM,EAAAA,MAA9B;AAAgCJ,QAAAA,MAAM,EAAAA,MAAAA;OAAvC,CAAV,iBACEkC,yBAAA,CAAA,aAAA,CAACG,uBAAD,EAAA;AACE,QAAA,SAAS,EAAC,0DADZ;AAEE,QAAA,OAAO,EAAE,YAAA;UACPZ,eAAe,EAAA,CAAA;AAChB,SAAA;OAED,eAAAS,yBAAA,CAAA,aAAA,CAAAA,yBAAA,CAAA,QAAA,EAAA,IAAA,EAAGL,SAAS,CAACS,2BAAb,CANF,CARN,EAmBI1B,UAAU,CAAC;AAAEhB,QAAAA,OAAO,EAAAA,OAAT;AAAWQ,QAAAA,MAAM,EAAAA,MAAjB;AAAmBJ,QAAAA,MAAM,EAAAA,MAAAA;OAA1B,CAAV,iBACEkC,yBAAA,CAAA,aAAA,CAACG,uBAAD,EAAA;AACE,QAAA,SAAS,EAAC,0DADZ;AAEE,QAAA,OAAO,EAAE,YAAA;UACPd,QAAQ,EAAA,CAAA;AACT,SAAA;OAED,eAAAW,yBAAA,CAAA,aAAA,CAAAA,yBAAA,CAAA,QAAA,EAAA,IAAA,EAAGL,SAAS,CAACU,2BAAb,CANF,CApBN,EA+BI7B,YAAY,CAAC;AAAEd,QAAAA,OAAO,SAAT;AAAWQ,QAAAA,MAAM,QAAjB;AAAmBJ,QAAAA,MAAM;OAA1B,CAAZ,iBACEkC,yBAAA,CAAA,aAAA,CAACG,uBAAD,EAAA;AACE,QAAA,OAAO,EAAE,YAAA;UACPf,aAAa,EAAA,CAAA;AACd,SAAA;OAED,eAAAY,yBAAA,CAAA,aAAA,CAAAA,yBAAA,CAAA,QAAA,EAAA,IAAA,EAAGL,SAAS,CAACW,6BAAb,CALF,CAhCN,EA0CIzB,YAAY,CAAC;AAAEnB,QAAAA,OAAO,SAAT;AAAWQ,QAAAA,MAAM,QAAjB;AAAmBJ,QAAAA,MAAM;OAA1B,CAAZ,iBACEkC,yBAAA,CAAA,aAAA,CAACG,uBAAD,EAAA;AACE,QAAA,OAAO,EAAE,YAAA;UACPb,UAAU,EAAA,CAAA;AACX,SAAA;OAED,eAAAU,yBAAA,CAAA,aAAA,CAAAA,yBAAA,CAAA,QAAA,EAAA,IAAA,EAAGL,SAAS,CAACY,6BAAb,CALF,CA3CN,EAqDIzB,cAAc,CAAC;AAAEpB,QAAAA,OAAO,EAAAA,OAAT;AAAWI,QAAAA,MAAM,EAAAA,MAAAA;OAAlB,CAAd,iBACIkC,yBAAA,CAAA,aAAA,CAACG,uBAAD,EAAA;AACE,QAAA,OAAO,EAAE,YAAA;UACPX,QAAQ,EAAA,CAAA;AACT,SAAA;OAED,eAAAQ,yBAAA,CAAA,aAAA,CAAA,GAAA,EAAA;AACE,QAAA,SAAS,EAAC,6CADZ;AAEE,QAAA,GAAG,EAAC,qBAFN;AAGE,QAAA,IAAI,EAAED,WAAW,KAAA,IAAX,IAAAA,WAAW,KAAA,KAAA,CAAX,GAAW,KAAA,CAAX,GAAAA,WAAW,CAAES,GAHrB;AAIE,QAAA,MAAM,EAAC,QAAA;AAJT,OAAA,EAMGb,SAAS,CAACc,2BANb,CALF,CAtDR,CADe,CAAA;AAwEhB,KAAA;GA3EL,CAAA,CAAA;AA8ED;;;;;;;;;;;;;"}