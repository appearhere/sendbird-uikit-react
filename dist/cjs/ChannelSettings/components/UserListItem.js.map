{"version":3,"file":"UserListItem.js","sources":["../../../../src/smart-components/ChannelSettings/components/UserListItem/index.tsx"],"sourcesContent":["import React, { ReactElement, useRef, useContext } from 'react';\nimport { User } from '@sendbird/chat';\n\nimport { LocalizationContext } from '../../../../lib/LocalizationContext';\nimport { UserProfileContext } from '../../../../lib/UserProfileContext';\nimport Avatar from '../../../../ui/Avatar/index';\nimport MutedAvatarOverlay from '../../../../ui/Avatar/MutedAvatarOverlay';\nimport Label, { LabelTypography, LabelColors } from '../../../../ui/Label';\nimport UserProfile from '../../../../ui/UserProfile';\nimport ContextMenu, { MenuItems } from '../../../../ui/ContextMenu';\n\nimport './user-list-item.scss';\n\nconst COMPONENT_NAME = 'sendbird-user-list-item--small';\n\ninterface ActionProps {\n  actionRef: React.RefObject<HTMLInputElement>;\n  parentRef: React.RefObject<HTMLInputElement>;\n}\n\ntype CustomUser = User & {\n  isMuted: boolean;\n  role: string;\n};\n\ninterface Props {\n  user: CustomUser;\n  currentUser?: string;\n  className?: string;\n  action?(props: ActionProps): ReactElement;\n}\n\nconst UserListItem = ({\n  user,\n  className,\n  currentUser,\n  action,\n}: Props): ReactElement => {\n  const actionRef = useRef(null);\n  const parentRef = useRef(null);\n  const avatarRef = useRef(null);\n  const { stringSet } = useContext(LocalizationContext);\n  const {\n    disableUserProfile,\n    renderUserProfile,\n  } = useContext<UserProfileContext>(UserProfileContext);\n  const injectingClassNames = Array.isArray(className) ? className : [className];\n  return (\n    <div\n      ref={parentRef}\n      className={[\n        COMPONENT_NAME, ...injectingClassNames,\n      ].join(' ')}\n    >\n      <ContextMenu\n        menuTrigger={(toggleDropdown) => (\n          <Avatar\n            onClick={() => {\n              if (!disableUserProfile) {\n                toggleDropdown();\n              }\n            }}\n            ref={avatarRef}\n            className={`${COMPONENT_NAME}__avatar`}\n            src={user.profileUrl}\n            width={24}\n            height={24}\n          />\n        )}\n        menuItems={(closeDropdown) => (\n          <MenuItems\n            openLeft\n            parentRef={avatarRef}\n            // for catching location(x, y) of MenuItems\n            parentContainRef={avatarRef}\n            // for toggling more options(menus & reactions)\n            closeDropdown={closeDropdown}\n            style={{ paddingTop: '0px', paddingBottom: '0px' }}\n          >\n            {\n              renderUserProfile\n                ? renderUserProfile({\n                  user,\n                  currentUserId: currentUser,\n                  close: closeDropdown,\n                })\n                : (\n                  <UserProfile\n                    user={user}\n                    currentUserId={currentUser}\n                    onSuccess={closeDropdown}\n                  />\n                )\n            }\n          </MenuItems>\n        )}\n      />\n      {\n        user.isMuted && (\n          <MutedAvatarOverlay />\n        )\n      }\n      <Label\n        className={`${COMPONENT_NAME}__title`}\n        type={LabelTypography.SUBTITLE_1}\n        color={LabelColors.ONBACKGROUND_1}\n      >\n        {user.nickname || stringSet.NO_NAME}\n        {\n          (currentUser === user.userId) && (\n            stringSet.CHANNEL_SETTING__MEMBERS__YOU\n          )\n        }\n      </Label>\n      { // if there is now nickname, display userId\n        !user.nickname && (\n          <Label\n            className={`${COMPONENT_NAME}__subtitle`}\n            type={LabelTypography.CAPTION_3}\n            color={LabelColors.ONBACKGROUND_2}\n          >\n            {user.userId}\n          </Label>\n        )\n      }\n      {\n        user.role === 'operator' && (\n          <Label\n            className={`${COMPONENT_NAME}__operator`}\n            type={LabelTypography.SUBTITLE_2}\n            color={LabelColors.ONBACKGROUND_2}\n          >\n            {stringSet.CHANNEL_SETTING__MEMBERS__OPERATOR}\n          </Label>\n        )\n      }\n      {\n        action && (\n          <div ref={actionRef} className={`${COMPONENT_NAME}__action`}>\n            {action({ actionRef, parentRef })}\n          </div>\n        )\n      }\n    </div>\n  );\n}\n\nexport default UserListItem;\n"],"names":["COMPONENT_NAME","UserListItem","_a","user","className","currentUser","action","actionRef","useRef","parentRef","avatarRef","stringSet","useContext","LocalizationContext","_b","UserProfileContext","disableUserProfile","renderUserProfile","injectingClassNames","Array","isArray","React","__spreadArray","join","ContextMenu","toggleDropdown","Avatar","concat","profileUrl","closeDropdown","MenuItems","paddingTop","paddingBottom","currentUserId","close","UserProfile","isMuted","MutedAvatarOverlay","Label","LabelTypography","SUBTITLE_1","LabelColors","ONBACKGROUND_1","nickname","NO_NAME","userId","CHANNEL_SETTING__MEMBERS__YOU","CAPTION_3","ONBACKGROUND_2","role","SUBTITLE_2","CHANNEL_SETTING__MEMBERS__OPERATOR"],"mappings":"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"}