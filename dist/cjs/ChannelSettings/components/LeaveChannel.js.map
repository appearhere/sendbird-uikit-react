{"version":3,"file":"LeaveChannel.js","sources":["../../../../src/smart-components/ChannelSettings/components/LeaveChannel/index.tsx"],"sourcesContent":["import './leave-channel.scss';\n\nimport React from 'react';\nimport type { GroupChannel } from '@sendbird/chat/groupChannel';\n\nimport useSendbirdStateContext from '../../../../hooks/useSendbirdStateContext';\nimport { useChannelSettingsContext } from '../../context/ChannelSettingsProvider';\nimport { noop } from '../../../../utils/utils';\n\nimport Modal from '../../../../ui/Modal';\nimport { useLocalization } from '../../../../lib/LocalizationContext';\nimport { useMediaQueryContext } from '../../../../lib/MediaQueryContext';\nimport TextButton from '../../../../ui/TextButton';\nimport Label, {\n  LabelTypography,\n  LabelColors,\n} from '../../../../ui/Label';\n\nexport type LeaveChannelProps = {\n  onSubmit: () => void;\n  onCancel: () => void;\n}\n\nconst LeaveChannel: React.FC<LeaveChannelProps> = (props: LeaveChannelProps) => {\n  const {\n    onSubmit = noop,\n    onCancel = noop,\n  } = props;\n\n  const { channel, onLeaveChannel } = useChannelSettingsContext();\n  const { stringSet } = useLocalization();\n  const state = useSendbirdStateContext();\n  const logger = state?.config?.logger;\n  const isOnline = state?.config?.isOnline;\n  const { isMobile } = useMediaQueryContext();\n  const getChannelName = (channel: GroupChannel) => {\n    if (channel?.name && channel?.name !== 'Group Channel') {\n      return channel.name;\n    }\n    if (channel?.name === 'Group Channel' || !channel?.name) {\n      return (channel?.members || []).map((member) => member.nickname || stringSet.NO_NAME).join(', ');\n    }\n\n    return stringSet.NO_TITLE;\n  };\n  if (isMobile) {\n    return (\n      <Modal\n        className=\"sendbird-channel-settings__leave--mobile\"\n        titleText={getChannelName(channel)}\n        hideFooter\n        isCloseOnClickOutside\n        onCancel={onCancel}\n      >\n        <TextButton\n          onClick={() => {\n            logger.info('ChannelSettings: Leaving channel', channel);\n            channel?.leave()\n              .then(() => {\n                logger.info('ChannelSettings: Leaving channel successful!', channel);\n                onLeaveChannel();\n              });\n          }}\n          className=\"sendbird-channel-settings__leave-label--mobile\"\n        >\n          <Label\n            type={LabelTypography.SUBTITLE_1}\n            color={LabelColors.ONBACKGROUND_1}\n          >\n            {stringSet.CHANNEL_PREVIEW_MOBILE_LEAVE}\n          </Label>\n        </TextButton>\n      </Modal>\n    );\n  }\n  return (\n    <Modal\n      isFullScreenOnMobile\n      disabled={!isOnline}\n      onCancel={onCancel}\n      onSubmit={() => {\n        logger.info('ChannelSettings: Leaving channel', channel);\n        channel?.leave()\n          .then(() => {\n            logger.info('ChannelSettings: Leaving channel successful!', channel);\n            // is for backward compactability\n            if (onLeaveChannel) {\n              onLeaveChannel();\n            } else {\n              onSubmit();\n            }\n          });\n      }}\n      submitText={stringSet.MODAL__LEAVE_CHANNEL__FOOTER}\n      titleText={stringSet.MODAL__LEAVE_CHANNEL__TITLE}\n    />\n  );\n};\n\nexport default LeaveChannel;\n"],"names":["LeaveChannel","props","_c","onSubmit","noop","_d","onCancel","_e","useChannelSettingsContext","channel","onLeaveChannel","stringSet","useLocalization","state","useSendbirdStateContext","logger","_a","config","isOnline","_b","isMobile","useMediaQueryContext","getChannelName","name","members","map","member","nickname","NO_NAME","join","NO_TITLE","React","Modal","TextButton","info","leave","then","Label","LabelTypography","SUBTITLE_1","LabelColors","ONBACKGROUND_1","CHANNEL_PREVIEW_MOBILE_LEAVE","MODAL__LEAVE_CHANNEL__FOOTER","MODAL__LEAVE_CHANNEL__TITLE"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuBA,IAAMA,YAAY,GAAgC,UAACC,KAAD,EAAyB;;;AAEvE,EAAA,IAAAC,KAEED,KAAK,CAAAE,QAFP;MAAAA,QAAQ,mBAAGC,aAAIF,EAAf;AAAA,MACAG,EAAA,GACEJ,KAAK,CADQK,QADf;MACAA,QAAQ,GAAGD,EAAA,KAAA,KAAA,CAAA,GAAAD,UAAA,KADX,CAAA;;EAII,IAAAG,EAAA,GAA8BC,iDAAyB,EAAvD;AAAA,MAAEC,OAAO,GAAAF,EAAA,CAAAE,OAAT;AAAA,MAAWC,cAAc,GAAAH,EAAA,CAAAG,cAAzB,CAAA;;AACE,EAAA,IAAAC,SAAS,GAAKC,mCAAe,EAAA,UAA7B,CAAA;EACR,IAAMC,KAAK,GAAGC,uBAAuB,EAArC,CAAA;AACA,EAAA,IAAMC,MAAM,GAAG,CAAAC,EAAA,GAAAH,KAAK,KAAL,IAAA,IAAAA,KAAK,KAAL,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,KAAK,CAAEI,MAAP,MAAe,IAAf,IAAeD,EAAA,KAAA,KAAA,CAAf,GAAe,KAAA,CAAf,GAAeA,EAAA,CAAAD,MAA9B,CAAA;AACA,EAAA,IAAMG,QAAQ,GAAG,CAAAC,EAAA,GAAAN,KAAK,KAAL,IAAA,IAAAA,KAAK,KAAL,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,KAAK,CAAEI,MAAP,MAAe,IAAf,IAAeE,EAAA,KAAA,KAAA,CAAf,GAAe,KAAA,CAAf,GAAeA,EAAA,CAAAD,QAAhC,CAAA;AACQ,EAAA,IAAAE,QAAQ,GAAKC,sCAAoB,EAAA,SAAjC,CAAA;;AACR,EAAA,IAAMC,cAAc,GAAG,UAACb,OAAD,EAAsB;AAC3C,IAAA,IAAI,CAAAA,OAAO,KAAA,IAAP,IAAAA,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,OAAO,CAAEc,IAAT,KAAiB,CAAAd,OAAO,KAAA,IAAP,IAAAA,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,OAAO,CAAEc,IAAT,MAAkB,eAAvC,EAAwD;MACtD,OAAOd,OAAO,CAACc,IAAf,CAAA;AACD,KAAA;;AACD,IAAA,IAAI,CAAAd,OAAO,KAAP,IAAA,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEc,IAAT,MAAkB,eAAlB,IAAqC,EAACd,OAAO,KAAP,IAAA,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEc,IAAV,CAAzC,EAAyD;MACvD,OAAO,CAAC,CAAAd,OAAO,KAAA,IAAP,IAAAA,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,OAAO,CAAEe,OAAT,KAAoB,EAArB,EAAyBC,GAAzB,CAA6B,UAACC,MAAD,EAAY;AAAA,QAAA,OAAAA,MAAM,CAACC,QAAP,IAAmBhB,SAAS,CAACiB,OAA7B,CAAA;AAAoC,OAA7E,CAA+EC,CAAAA,IAA/E,CAAoF,IAApF,CAAP,CAAA;AACD,KAAA;;IAED,OAAOlB,SAAS,CAACmB,QAAjB,CAAA;GARF,CAAA;;AAUA,EAAA,IAAIV,QAAJ,EAAc;AACZ,IAAA,oBACEW,wCAACC,mBAAD,EAAA;AACE,MAAA,SAAS,EAAC,0CADZ;AAEE,MAAA,SAAS,EAAEV,cAAc,CAACb,OAAD,CAF3B;AAGE,MAAA,UAAU,EAHZ,IAAA;AAIE,MAAA,qBAAqB,EAJvB,IAAA;AAKE,MAAA,QAAQ,EAAEH,QAAAA;AALZ,KAAA,eAOEyB,wCAACE,aAAD,EAAA;AACE,MAAA,OAAO,EAAE,YAAA;AACPlB,QAAAA,MAAM,CAACmB,IAAP,CAAY,kCAAZ,EAAgDzB,OAAhD,CAAA,CAAA;AACAA,QAAAA,OAAO,KAAA,IAAP,IAAAA,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,OAAO,CAAE0B,KAAT,EACGC,CAAAA,IADH,CACQ,YAAA;AACJrB,UAAAA,MAAM,CAACmB,IAAP,CAAY,8CAAZ,EAA4DzB,OAA5D,CAAA,CAAA;UACAC,cAAc,EAAA,CAAA;AACf,SAJH,CAAA,CAAA;OAHJ;AASE,MAAA,SAAS,EAAC,gDAAA;AATZ,KAAA,eAWEqB,wCAACM,cAAD,EAAA;MACE,IAAI,EAAEC,wBAAe,CAACC,UADxB;MAEE,KAAK,EAAEC,oBAAW,CAACC,cAAAA;AAFrB,KAAA,EAIG9B,SAAS,CAAC+B,4BAJb,CAXF,CAPF,CADF,CAAA;AA4BD,GAAA;;AACD,EAAA,oBACEX,wCAACC,mBAAD,EAAA;AACE,IAAA,oBAAoB,EADtB,IAAA;IAEE,QAAQ,EAAE,CAACd,QAFb;AAGE,IAAA,QAAQ,EAAEZ,QAHZ;AAIE,IAAA,QAAQ,EAAE,YAAA;AACRS,MAAAA,MAAM,CAACmB,IAAP,CAAY,kCAAZ,EAAgDzB,OAAhD,CAAA,CAAA;AACAA,MAAAA,OAAO,KAAA,IAAP,IAAAA,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,OAAO,CAAE0B,KAAT,EACGC,CAAAA,IADH,CACQ,YAAA;AACJrB,QAAAA,MAAM,CAACmB,IAAP,CAAY,8CAAZ,EAA4DzB,OAA5D,EADI;;AAGJ,QAAA,IAAIC,cAAJ,EAAoB;UAClBA,cAAc,EAAA,CAAA;AACf,SAFD,MAEO;UACLP,QAAQ,EAAA,CAAA;AACT,SAAA;AACF,OATH,CAAA,CAAA;KANJ;IAiBE,UAAU,EAAEQ,SAAS,CAACgC,4BAjBxB;IAkBE,SAAS,EAAEhC,SAAS,CAACiC,2BAAAA;GAnBzB,CAAA,CAAA;AAsBD;;;;"}