{"version":3,"file":"MessageSearch.js","sources":["../../src/smart-components/MessageSearch/index.tsx"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport './index.scss';\n\nimport MessageSearch, { MessageSearchUIProps } from './components/MessageSearchUI';\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport Icon, { IconTypes, IconColors } from '../../ui/Icon';\nimport IconButton from '../../ui/IconButton';\nimport Label, { LabelTypography, LabelColors } from '../../ui/Label';\nimport Loader from '../../ui/Loader';\nimport { MessageSearchProvider, MessageSearchProviderProps } from './context/MessageSearchProvider';\n\nexport interface MessageSearchPannelProps extends\n  MessageSearchUIProps, MessageSearchProviderProps {\n  onResultClick?: (message) => void;\n  onCloseClick?: () => void;\n}\n\nconst COMPONENT_CLASS_NAME = 'sendbird-message-search-pannel';\n\nfunction MessageSearchPannel(props: MessageSearchPannelProps): JSX.Element {\n  const {\n    channelUrl,\n    onResultClick,\n    onCloseClick,\n    messageSearchQuery,\n    renderPlaceHolderError,\n    renderPlaceHolderLoading,\n    renderPlaceHolderNoString,\n    renderPlaceHolderEmptyList,\n    renderSearchItem,\n  } = props;\n\n  const [searchString, setSearchString] = useState('');\n  const [inputString, setInputString] = useState('');\n  const [loading, setLoading] = useState(false);\n  const { stringSet } = useContext(LocalizationContext);\n\n  let timeout = null;\n  useEffect(() => {\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n    timeout = setTimeout(() => {\n      setSearchString(inputString);\n      setLoading(true);\n      timeout = null;\n    }, 500);\n  }, [inputString]);\n\n  const handleOnChangeInputString = (e) => {\n    setInputString(e.target.value);\n  };\n\n  const handleOnResultLoaded = () => {\n    setLoading(false);\n  };\n\n  const handleOnClickResetStringButton = (e) => {\n    e.stopPropagation();\n    setInputString('');\n    setSearchString('');\n  };\n\n  return (\n    <div className={COMPONENT_CLASS_NAME}>\n      <div className={`${COMPONENT_CLASS_NAME}__header`}>\n        <Label\n          className={`${COMPONENT_CLASS_NAME}__header__title`}\n          type={LabelTypography.H_2}\n          color={LabelColors.ONBACKGROUND_1}\n        >\n          {stringSet.SEARCH_IN_CHANNEL}\n        </Label>\n        <IconButton\n          className={`${COMPONENT_CLASS_NAME}__header__close-button`}\n          width=\"32px\"\n          height=\"32px\"\n          onClick={onCloseClick}\n        >\n          <Icon\n            type={IconTypes.CLOSE}\n            fillColor={IconColors.ON_BACKGROUND_1}\n            width=\"22px\"\n            height=\"22px\"\n          />\n        </IconButton>\n      </div>\n      <div className={`${COMPONENT_CLASS_NAME}__input`}>\n        <div className={`${COMPONENT_CLASS_NAME}__input__container`}>\n            <Icon\n              className={`${COMPONENT_CLASS_NAME}__input__container__search-icon`}\n              type={IconTypes.SEARCH}\n              fillColor={IconColors.ON_BACKGROUND_3}\n              width=\"24px\"\n              height=\"24px\"\n            />\n            <input\n              className={`${COMPONENT_CLASS_NAME}__input__container__input-area`}\n              placeholder={stringSet.SEARCH}\n              value={inputString}\n              onChange={handleOnChangeInputString}\n            />\n            {\n              inputString && loading && (\n                <Loader\n                  className={`${COMPONENT_CLASS_NAME}__input__container__spinner`}\n                  width=\"20px\"\n                  height=\"20px\"\n                >\n                  <Icon\n                    type={IconTypes.SPINNER}\n                    fillColor={IconColors.PRIMARY}\n                    width=\"20px\"\n                    height=\"20px\"\n                  />\n                </Loader>\n              )\n            }\n            {\n              !loading && inputString && (\n                <Icon\n                  className={`${COMPONENT_CLASS_NAME}__input__container__reset-input-button`}\n                  type={IconTypes.REMOVE}\n                  fillColor={IconColors.ON_BACKGROUND_3}\n                  width=\"20px\"\n                  height=\"20px\"\n                  onClick={handleOnClickResetStringButton}\n                />\n              )\n            }\n        </div>\n      </div>\n      <div className={`${COMPONENT_CLASS_NAME}__message-search`}>\n        <MessageSearchProvider\n          channelUrl={channelUrl}\n          searchString={searchString}\n          onResultClick={onResultClick}\n          onResultLoaded={handleOnResultLoaded}\n          messageSearchQuery={messageSearchQuery}\n        >\n          <MessageSearch\n            renderPlaceHolderError={renderPlaceHolderError}\n            renderPlaceHolderLoading={renderPlaceHolderLoading}\n            renderPlaceHolderNoString={renderPlaceHolderNoString}\n            renderPlaceHolderEmptyList={renderPlaceHolderEmptyList}\n            renderSearchItem={renderSearchItem}\n          />\n        </MessageSearchProvider>\n      </div>\n    </div>\n  );\n}\n\nexport default MessageSearchPannel;\n"],"names":["COMPONENT_CLASS_NAME","MessageSearchPannel","props","channelUrl","onResultClick","onCloseClick","messageSearchQuery","renderPlaceHolderError","renderPlaceHolderLoading","renderPlaceHolderNoString","renderPlaceHolderEmptyList","renderSearchItem","_a","useState","searchString","setSearchString","_b","inputString","setInputString","_c","loading","setLoading","stringSet","useContext","LocalizationContext","timeout","useEffect","clearTimeout","setTimeout","handleOnChangeInputString","e","target","value","handleOnResultLoaded","handleOnClickResetStringButton","stopPropagation","React","concat","Label","LabelTypography","H_2","LabelColors","ONBACKGROUND_1","SEARCH_IN_CHANNEL","IconButton","Icon","IconTypes","CLOSE","IconColors","ON_BACKGROUND_1","SEARCH","ON_BACKGROUND_3","Loader","SPINNER","PRIMARY","REMOVE","MessageSearchProvider","MessageSearch"],"mappings":"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"}