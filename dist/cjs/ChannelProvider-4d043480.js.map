{"version":3,"file":"ChannelProvider-4d043480.js","sources":["../../src/smart-components/Channel/context/dux/actionTypes.js","../../src/smart-components/Channel/context/utils.js","../../src/smart-components/Channel/context/dux/initialState.js","../../src/smart-components/Channel/context/dux/reducers.js","../../src/smart-components/Channel/context/hooks/useHandleChannelEvents.ts","../../src/smart-components/Channel/context/hooks/useGetChannel.js","../../src/smart-components/Channel/context/hooks/useInitialMessagesFetch.js","../../src/smart-components/Channel/context/hooks/useHandleReconnect.ts","../../src/smart-components/Channel/context/hooks/useScrollCallback.js","../../src/smart-components/Channel/context/hooks/useScrollDownCallback.js","../../src/smart-components/Channel/context/hooks/useDeleteMessageCallback.js","../../src/smart-components/Channel/context/hooks/useUpdateMessageCallback.js","../../src/smart-components/Channel/context/hooks/useResendMessageCallback.js","../../src/smart-components/Channel/context/hooks/useSendMessageCallback.js","../../src/smart-components/Channel/context/hooks/useSendFileMessageCallback.js","../../src/smart-components/Channel/context/hooks/useMemoizedEmojiListItems.jsx","../../src/smart-components/Channel/context/hooks/useToggleReactionCallback.js","../../src/smart-components/Channel/context/hooks/useScrollToMessage.ts","../../src/smart-components/Channel/context/ChannelProvider.tsx"],"sourcesContent":["export const RESET_MESSAGES = 'RESET_MESSAGES';\n\nexport const FETCH_INITIAL_MESSAGES_START = 'FETCH_INITIAL_MESSAGES_START';\nexport const FETCH_INITIAL_MESSAGES_SUCCESS = 'FETCH_INITIAL_MESSAGES_SUCCESS';\nexport const FETCH_INITIAL_MESSAGES_FAILURE = 'FETCH_INITIAL_MESSAGES_FAILURE';\nexport const FETCH_PREV_MESSAGES_SUCCESS = 'FETCH_PREV_MESSAGES_SUCCESS';\nexport const FETCH_PREV_MESSAGES_FAILURE = 'FETCH_PREV_MESSAGES_FAILURE';\nexport const FETCH_NEXT_MESSAGES_SUCCESS = 'FETCH_NEXT_MESSAGES_SUCCESS';\nexport const FETCH_NEXT_MESSAGES_FAILURE = 'FETCH_NEXT_MESSAGES_FAILURE';\n\nexport const SEND_MESSAGEGE_START = 'SEND_MESSAGEGE_START';\nexport const SEND_MESSAGEGE_SUCESS = 'SEND_MESSAGEGE_SUCESS';\nexport const SEND_MESSAGEGE_FAILURE = 'SEND_MESSAGEGE_FAILURE';\n\nexport const RESEND_MESSAGEGE_START = 'RESEND_MESSAGEGE_START';\n\nexport const ON_MESSAGE_RECEIVED = 'ON_MESSAGE_RECEIVED';\nexport const ON_MESSAGE_UPDATED = 'ON_MESSAGE_UPDATED';\nexport const ON_MESSAGE_THREAD_INFO_UPDATED = 'ON_MESSAGE_THREAD_INFO_UPDATED';\nexport const ON_MESSAGE_DELETED = 'ON_MESSAGE_DELETED';\nexport const ON_MESSAGE_DELETED_BY_REQ_ID = 'ON_MESSAGE_DELETED_BY_REQ_ID';\n\nexport const SET_CURRENT_CHANNEL = 'SET_CURRENT_CHANNEL';\nexport const SET_CHANNEL_INVALID = 'SET_CHANNEL_INVALID';\nexport const MARK_AS_READ = 'MARK_AS_READ';\n\nexport const ON_REACTION_UPDATED = 'ON_REACTION_UPDATED';\nexport const SET_EMOJI_CONTAINER = 'SET_EMOJI_CONTAINER';\n\nexport const MESSAGE_LIST_PARAMS_CHANGED = 'MESSAGE_LIST_PARAMS_CHANGED';\n","import format from 'date-fns/format';\nimport * as channelActions from './dux/actionTypes';\nimport * as topics from '../../../lib/pubSub/topics';\n\nimport { getSendingMessageStatus, isReadMessage } from '../../../utils';\nimport { OutgoingMessageStates } from '../../../utils/exports/getOutgoingMessageState';\n\nconst UNDEFINED = 'undefined';\nconst { SUCCEEDED, FAILED, PENDING } = getSendingMessageStatus();\n\nexport const scrollIntoLast = (initialTry = 0, scrollRef) => {\n  const MAX_TRIES = 10;\n  const currentTry = initialTry;\n  if (currentTry > MAX_TRIES) {\n    return;\n  }\n  try {\n    const scrollDOM = scrollRef?.current || document.querySelector('.sendbird-conversation__messages-padding');\n    // eslint-disable-next-line no-multi-assign\n    scrollDOM.scrollTop = scrollDOM.scrollHeight;\n  } catch (error) {\n    setTimeout(() => {\n      scrollIntoLast(currentTry + 1, scrollRef);\n    }, 500 * currentTry);\n  }\n};\n\nexport const pubSubHandleRemover = (subscriber) => {\n  subscriber.forEach((s) => {\n    try {\n      s.remove();\n    } catch {\n      //\n    }\n  });\n};\n\nexport const pubSubHandler = ({\n  channelUrl,\n  pubSub,\n  dispatcher,\n  scrollRef,\n}) => {\n  const subscriber = new Map();\n  if (!pubSub || !pubSub.subscribe) return subscriber;\n  subscriber.set(topics.SEND_USER_MESSAGE, pubSub.subscribe(topics.SEND_USER_MESSAGE, (msg) => {\n    const { channel, message } = msg;\n    scrollIntoLast(0, scrollRef);\n    if (channelUrl === channel?.url) {\n      dispatcher({\n        type: channelActions.SEND_MESSAGEGE_SUCESS,\n        payload: message,\n      });\n    }\n  }));\n  subscriber.set(topics.SEND_MESSAGE_START, pubSub.subscribe(topics.SEND_MESSAGE_START, (msg) => {\n    const { channel, message } = msg;\n    if (channelUrl === channel?.url) {\n      dispatcher({\n        type: channelActions.SEND_MESSAGEGE_START,\n        payload: message,\n      });\n    }\n  }));\n  subscriber.set(topics.SEND_FILE_MESSAGE, pubSub.subscribe(topics.SEND_FILE_MESSAGE, (msg) => {\n    const { channel, message } = msg;\n    scrollIntoLast(0, scrollRef);\n    if (channelUrl === channel?.url) {\n      dispatcher({\n        type: channelActions.SEND_MESSAGEGE_SUCESS,\n        payload: message,\n      });\n    }\n  }));\n  subscriber.set(topics.UPDATE_USER_MESSAGE, pubSub.subscribe(topics.UPDATE_USER_MESSAGE, (msg) => {\n    const { channel, message, fromSelector } = msg;\n    if (fromSelector && (channelUrl === channel?.url)) {\n      dispatcher({\n        type: channelActions.ON_MESSAGE_UPDATED,\n        payload: { channel, message },\n      });\n    }\n  }));\n  subscriber.set(topics.DELETE_MESSAGE, pubSub.subscribe(topics.DELETE_MESSAGE, (msg) => {\n    const { channel, messageId } = msg;\n    if (channelUrl === channel?.url) {\n      dispatcher({\n        type: channelActions.ON_MESSAGE_DELETED,\n        payload: messageId,\n      });\n    }\n  }));\n\n  return subscriber;\n};\n\nexport const getParsedStatus = (message, currentGroupChannel) => {\n  if (message.requestState === FAILED) {\n    return OutgoingMessageStates.FAILED;\n  }\n\n  if (message.requestState === PENDING) {\n    return OutgoingMessageStates.PENDING;\n  }\n\n  if (message.requestState === SUCCEEDED) {\n    if (!currentGroupChannel) {\n      return OutgoingMessageStates.SENT;\n    }\n\n    const unreadMemberCount = currentGroupChannel?.getUnreadMemberCount(message);\n    if (unreadMemberCount === 0) {\n      return OutgoingMessageStates.READ;\n    }\n\n    const isDelivered = currentGroupChannel?.getUndeliveredMemberCount(message) === 0;\n    if (isDelivered) {\n      return OutgoingMessageStates.DELIVERED;\n    }\n\n    return OutgoingMessageStates.SENT;\n  }\n\n  return null;\n};\n\nexport const isOperator = (groupChannel = {}) => {\n  const myRole = groupChannel?.myRole;\n  return myRole === 'operator';\n};\n\nexport const isDisabledBecauseFrozen = (groupChannel = {}) => {\n  const isFrozen = groupChannel?.isFrozen;\n  return isFrozen && !isOperator(groupChannel);\n};\n\nexport const isDisabledBecauseMuted = (groupChannel = {}) => {\n  const myMutedState = groupChannel?.myMutedState;\n  return myMutedState === 'muted';\n};\n\nexport const getEmojiCategoriesFromEmojiContainer = (emojiContainer = {}) => (\n  emojiContainer.emojiCategories ? emojiContainer.emojiCategories : []\n);\n\nexport const getAllEmojisFromEmojiContainer = (emojiContainer = {}) => {\n  const { emojiCategories = [] } = emojiContainer;\n  const allEmojis = [];\n\n  for (let categoryIndex = 0; categoryIndex < emojiCategories.length; categoryIndex += 1) {\n    const { emojis } = emojiCategories[categoryIndex];\n    for (let emojiIndex = 0; emojiIndex < emojis.length; emojiIndex += 1) {\n      allEmojis.push(emojis[emojiIndex]);\n    }\n  }\n  return allEmojis;\n};\n\nexport const getEmojisFromEmojiContainer = (emojiContainer = {}, emojiCategoryId = '') => (\n  emojiContainer.emojiCategories\n    ? emojiContainer.emojiCategories\n      .filter((emojiCategory) => emojiCategory.id === emojiCategoryId)[0].emojis\n    : []\n);\n\nexport const getAllEmojisMapFromEmojiContainer = (emojiContainer = {}) => {\n  const { emojiCategories = [] } = emojiContainer;\n  const allEmojisMap = new Map();\n\n  for (let categoryIndex = 0; categoryIndex < emojiCategories.length; categoryIndex += 1) {\n    const { emojis } = emojiCategories[categoryIndex];\n    for (let emojiIndex = 0; emojiIndex < emojis.length; emojiIndex += 1) {\n      const { key, url } = emojis[emojiIndex];\n      allEmojisMap.set(key, url);\n    }\n  }\n  return allEmojisMap;\n};\n\nexport const getNicknamesMapFromMembers = (members = []) => {\n  const nicknamesMap = new Map();\n  for (let memberIndex = 0; memberIndex < members.length; memberIndex += 1) {\n    const { userId, nickname } = members[memberIndex];\n    nicknamesMap.set(userId, nickname);\n  }\n  return nicknamesMap;\n};\n\nexport const getMessageCreatedAt = (message) => format(message.createdAt, 'p');\n\nexport const isSameGroup = (message, comparingMessage, currentChannel) => {\n  if (!(message\n    && comparingMessage\n    && message.messageType\n    && message.messageType !== 'admin'\n    && comparingMessage.messageType\n    && comparingMessage?.messageType !== 'admin'\n    && message?.sender\n    && comparingMessage?.sender\n    && message?.createdAt\n    && comparingMessage?.createdAt\n    && message?.sender?.userId\n    && comparingMessage?.sender?.userId\n  )) {\n    return false;\n  }\n  return (\n    message?.sendingStatus === comparingMessage?.sendingStatus\n    && message?.sender?.userId === comparingMessage?.sender?.userId\n    && getMessageCreatedAt(message) === getMessageCreatedAt(comparingMessage)\n    && isReadMessage(currentChannel, message) === isReadMessage(currentChannel, comparingMessage)\n  );\n};\n\nexport const compareMessagesForGrouping = (\n  prevMessage,\n  currMessage,\n  nextMessage,\n  currentChannel,\n  replyType,\n) => {\n  if (replyType === 'THREAD' && currMessage?.threadInfo) {\n    return [false, false];\n  }\n  const sendingStatus = currMessage?.sendingStatus || '';\n  const isAcceptable = sendingStatus !== 'pending' && sendingStatus !== 'failed';\n  return [\n    isSameGroup(prevMessage, currMessage, currentChannel) && isAcceptable,\n    isSameGroup(currMessage, nextMessage, currentChannel) && isAcceptable,\n  ];\n};\n\nexport const hasOwnProperty = (property) => (payload) => {\n  // eslint-disable-next-line no-prototype-builtins\n  if (payload && payload.hasOwnProperty && payload.hasOwnProperty(property)) {\n    return true;\n  }\n  return false;\n};\n\nexport const passUnsuccessfullMessages = (allMessages, newMessage) => {\n  const { sendingStatus = UNDEFINED } = newMessage;\n  if (sendingStatus === SUCCEEDED || sendingStatus === PENDING) {\n    const lastIndexOfSucceededMessage = allMessages\n      .map((message) => (\n        message.sendingStatus\n        || ((message.isAdminMessage && message.isAdminMessage()) ? SUCCEEDED : UNDEFINED)\n      ))\n      .lastIndexOf(SUCCEEDED);\n    if (lastIndexOfSucceededMessage + 1 < allMessages.length) {\n      const messages = [...allMessages];\n      messages.splice(lastIndexOfSucceededMessage + 1, 0, newMessage);\n      return messages;\n    }\n  }\n  return [\n    ...allMessages,\n    newMessage,\n  ];\n};\n\nexport const pxToNumber = (px) => {\n  if (typeof px === 'number') {\n    return px;\n  }\n  if (typeof px === 'string') {\n    const parsed = Number.parseFloat(px);\n    if (!Number.isNaN(parsed)) {\n      return parsed;\n    }\n  }\n  return null;\n};\n\nexport const isAboutSame = (a, b, px) => (Math.abs(a - b) <= px);\n\nexport default getParsedStatus;\n","export default {\n  initialized: false,\n  loading: true,\n  allMessages: [],\n  currentGroupChannel: { members: [] },\n  // for scrollup\n  hasMorePrev: false,\n  oldestMessageTimeStamp: 0,\n  // for scroll down\n  // onScrollDownCallback is added for navigation to different timestamps on messageSearch\n  // hasMorePrev, onScrollCallback -> scroll up(default behavior)\n  // hasMoreNext, onScrollDownCallback -> scroll down\n  hasMoreNext: false,\n  latestMessageTimeStamp: 0,\n  emojiContainer: {},\n  unreadSince: null,\n  isInvalid: false,\n  messageListParams: null,\n};\n","import format from 'date-fns/format';\n\nimport * as actionTypes from './actionTypes';\nimport compareIds from '../../../../utils/compareIds';\nimport { PREV_RESULT_SIZE, NEXT_RESULT_SIZE } from '../const';\nimport { passUnsuccessfullMessages } from '../utils';\nimport { filterMessageListParams, getSendingMessageStatus } from '../../../../utils';\n\nconst {\n  SUCCEEDED,\n} = getSendingMessageStatus();\nconst getOldestMessageTimeStamp = (messages = []) => {\n  const oldestMessage = messages[0];\n  return (oldestMessage && oldestMessage.createdAt) || null;\n};\nconst getLatestMessageTimeStamp = (messages = []) => {\n  const latestMessage = messages[messages.length - 1];\n  return (latestMessage && latestMessage.createdAt) || null;\n};\n\nexport default function reducer(state, action) {\n  switch (action.type) {\n    case actionTypes.RESET_MESSAGES:\n      return {\n        ...state,\n        // when user switches channel, if the previous channel `hasMorePrev`\n        // the onScroll gets called twice, setting hasMorePrev false prevents this\n        hasMorePrev: false,\n        hasMoreNext: false,\n        allMessages: [],\n      };\n    case actionTypes.FETCH_INITIAL_MESSAGES_START: {\n      return {\n        ...state,\n        loading: true,\n        allMessages: [\n          ...state.allMessages.filter((m) => (\n            m.sendingStatus !== SUCCEEDED\n          )),\n        ],\n      };\n    }\n    case actionTypes.FETCH_INITIAL_MESSAGES_SUCCESS: {\n      const {\n        currentGroupChannel,\n        messages,\n      } = action.payload;\n      if (!(currentGroupChannel?.url === state.currentGroupChannel?.url)) {\n        return state;\n      }\n      const oldestMessageTimeStamp = getOldestMessageTimeStamp(messages);\n      const latestMessageTimeStamp = getLatestMessageTimeStamp(messages);\n      return {\n        ...state,\n        loading: false,\n        initialized: true,\n        hasMorePrev: true,\n        hasMoreNext: true,\n        oldestMessageTimeStamp,\n        latestMessageTimeStamp,\n        allMessages: [...messages],\n      };\n    }\n    case actionTypes.FETCH_PREV_MESSAGES_SUCCESS: {\n      const {\n        currentGroupChannel,\n        messages,\n      } = action.payload;\n      if (!(currentGroupChannel?.url === state.currentGroupChannel?.url)) {\n        return state;\n      }\n      const hasMorePrev = messages && messages.length === PREV_RESULT_SIZE + 1;\n      const oldestMessageTimeStamp = getOldestMessageTimeStamp(messages);\n\n      // Remove duplicated messages\n      const duplicatedMessageIds = [];\n      const updatedOldMessages = state.allMessages.map((msg) => {\n        const duplicatedMessage = messages.find(({ messageId }) => (\n          compareIds(messageId, msg.messageId)\n        ));\n        if (!duplicatedMessage) {\n          return msg;\n        }\n        duplicatedMessageIds.push(duplicatedMessage.messageId);\n        return (duplicatedMessage.updatedAt > msg.updatedAt) ? duplicatedMessage : msg;\n      });\n      const filteredNewMessages = (duplicatedMessageIds.length > 0)\n        ? messages.filter((msg) => (\n          !duplicatedMessageIds.find((messageId) => compareIds(messageId, msg.messageId))\n        ))\n        : messages;\n\n      return {\n        ...state,\n        hasMorePrev,\n        oldestMessageTimeStamp,\n        allMessages: [\n          ...filteredNewMessages,\n          ...updatedOldMessages,\n        ],\n      };\n    }\n    case actionTypes.FETCH_NEXT_MESSAGES_SUCCESS: {\n      const {\n        currentGroupChannel,\n        messages,\n      } = action.payload;\n      if (!(currentGroupChannel?.url === state.currentGroupChannel?.url)) {\n        return state;\n      }\n      const hasMoreNext = messages && messages.length === NEXT_RESULT_SIZE + 1;\n      const latestMessageTimeStamp = getLatestMessageTimeStamp(messages);\n\n      // Remove duplicated messages\n      const duplicatedMessageIds = [];\n      const updatedOldMessages = state.allMessages.map((msg) => {\n        const duplicatedMessage = messages.find(({ messageId }) => (\n          compareIds(messageId, msg.messageId)\n        ));\n        if (!duplicatedMessage) {\n          return msg;\n        }\n        duplicatedMessageIds.push(duplicatedMessage.messageId);\n        return (duplicatedMessage.updatedAt > msg.updatedAt) ? duplicatedMessage : msg;\n      });\n      const filteredNewMessages = (duplicatedMessageIds.length > 0)\n        ? messages.filter((msg) => (\n          !duplicatedMessageIds.find((messageId) => compareIds(messageId, msg.messageId))\n        ))\n        : messages;\n\n      return {\n        ...state,\n        hasMoreNext,\n        latestMessageTimeStamp,\n        allMessages: [\n          ...updatedOldMessages,\n          ...filteredNewMessages,\n        ],\n      };\n    }\n    case actionTypes.FETCH_INITIAL_MESSAGES_FAILURE:\n    case actionTypes.FETCH_PREV_MESSAGES_FAILURE:\n    case actionTypes.FETCH_NEXT_MESSAGES_FAILURE: {\n      const { currentGroupChannel } = action.payload;\n      if (currentGroupChannel?.url !== state?.currentGroupChannel?.url) {\n        return state;\n      }\n      return {\n        ...state,\n        loading: false,\n        initialized: false,\n        allMessages: [],\n        hasMorePrev: false,\n        hasMoreNext: false,\n        oldestMessageTimeStamp: null,\n        latestMessageTimeStamp: null,\n      };\n    }\n    case actionTypes.SEND_MESSAGEGE_START:\n      return {\n        ...state,\n        allMessages: [\n          ...state.allMessages,\n          { ...action.payload },\n        ],\n      };\n    case actionTypes.SEND_MESSAGEGE_SUCESS: {\n      const message = action.payload;\n      const filteredMessages = state.allMessages.filter((m) => (\n        m?.reqId !== message?.reqId\n      ));\n      const pendingIndex = filteredMessages.findIndex((msg) => (\n        msg?.sendingStatus === 'pending' || msg?.sendingStatus === 'failed'\n      ));\n      return {\n        ...state,\n        allMessages: pendingIndex > -1\n          ? [\n            ...filteredMessages.slice(0, pendingIndex),\n            message,\n            ...filteredMessages.slice(pendingIndex),\n          ]\n          : [\n            ...filteredMessages,\n            message,\n          ],\n      };\n    }\n    case actionTypes.SEND_MESSAGEGE_FAILURE: {\n      // eslint-disable-next-line no-param-reassign\n      action.payload.failed = true;\n      return {\n        ...state,\n        allMessages: state.allMessages.map((m) => (\n          compareIds(m.reqId, action.payload.reqId)\n            ? action.payload\n            : m\n        )),\n      };\n    }\n    case actionTypes.SET_CURRENT_CHANNEL: {\n      return {\n        ...state,\n        currentGroupChannel: action.payload,\n        isInvalid: false,\n      };\n    }\n    case actionTypes.SET_CHANNEL_INVALID: {\n      return {\n        ...state,\n        currentGroupChannel: null,\n        isInvalid: true,\n      };\n    }\n    case actionTypes.ON_MESSAGE_RECEIVED: {\n      const { channel, message } = action.payload;\n      const { members } = channel;\n      const { sender } = message;\n      const { currentGroupChannel = {}, unreadSince } = state;\n      const currentGroupChannelUrl = currentGroupChannel?.url;\n\n      if (!compareIds(channel?.url, currentGroupChannelUrl)) {\n        return state;\n      }\n      // Excluded overlapping messages\n      if (state.allMessages.some((msg) => msg.messageId === message.messageId)) {\n        return state;\n      }\n      // Filter by userFilledQuery\n      if (state.messageListParams && !filterMessageListParams(state.messageListParams, message)) {\n        return state;\n      }\n\n      if (message.isAdminMessage && message.isAdminMessage()) {\n        return {\n          ...state,\n          allMessages: passUnsuccessfullMessages(state.allMessages, message),\n        };\n      }\n\n      // Update members when sender profileUrl, nickname, friendName has been changed\n      const senderMember = members?.find((m) => (m?.userId === sender?.userId));\n      if ((senderMember?.profileUrl !== sender?.profileUrl)\n        || (senderMember?.friendName !== sender?.friendName)\n        || (senderMember?.nickname !== sender?.nickname)) {\n        channel.members = members.map((member) => {\n          if (member.userId === sender.userId) {\n            return sender;\n          }\n          return member;\n        });\n      }\n      return {\n        ...state,\n        currentGroupChannel: channel,\n        unreadSince: state?.unreadSince ? unreadSince : format(new Date(), 'p MMM dd'),\n        allMessages: passUnsuccessfullMessages(state.allMessages, message),\n      };\n    }\n    case actionTypes.ON_MESSAGE_UPDATED: {\n      const { channel, message } = action.payload;\n      const currentGroupChannelUrl = state?.currentGroupChannel?.url || '';\n      if (!compareIds(channel?.url, currentGroupChannelUrl)) {\n        return state; // Ignore event when it is not for the current channel\n      }\n      if (state.messageListParams && !filterMessageListParams(state.messageListParams, message)) {\n        // Delete the message if it doesn't match to the params anymore\n        return {\n          ...state,\n          allMessages: state.allMessages.filter((m) => (\n            !compareIds(m.messageId, message?.messageId)\n          )),\n        };\n      }\n      return {\n        ...state,\n        allMessages: state.allMessages.map((m) => {\n          if (compareIds(m.messageId, message.messageId)) {\n            return message;\n          }\n          if (compareIds(m.parentMessageId, message.messageId)) {\n            m.parentMessage = message;// eslint-disable-line no-param-reassign\n          }\n          return m;\n        }),\n      };\n    }\n    case actionTypes.ON_MESSAGE_THREAD_INFO_UPDATED: {\n      const { channel, event } = action.payload;\n      const { channelUrl, threadInfo, targetMessageId } = event;\n      const currentGroupChannelUrl = state?.currentGroupChannel?.url || '';\n      if (\n        !compareIds(channel?.url, currentGroupChannelUrl)\n        || !compareIds(channel?.url, channelUrl)\n      ) {\n        return state; // Ignore event when it is not for the current channel\n      }\n      return {\n        ...state,\n        allMessages: state.allMessages.map((m) => {\n          if (compareIds(m.messageId, targetMessageId)) {\n            // eslint-disable-next-line no-param-reassign\n            m.threadInfo = threadInfo; // Upsert threadInfo to the target message\n          }\n          return m;\n        }),\n      };\n    }\n    case actionTypes.RESEND_MESSAGEGE_START:\n      return {\n        ...state,\n        allMessages: state.allMessages.map((m) => (\n          compareIds(m.reqId, action.payload.reqId)\n            ? action.payload\n            : m\n        )),\n      };\n    case actionTypes.MARK_AS_READ:\n      if (state.currentGroupChannel?.url !== action.payload?.channel?.url) {\n        return state;\n      }\n      return {\n        ...state,\n        unreadSince: null,\n      };\n    case actionTypes.ON_MESSAGE_DELETED:\n      return {\n        ...state,\n        allMessages: state.allMessages.filter((m) => (\n          !compareIds(m.messageId, action.payload)\n        )),\n      };\n    case actionTypes.ON_MESSAGE_DELETED_BY_REQ_ID:\n      return {\n        ...state,\n        allMessages: state.allMessages.filter((m) => (\n          !compareIds(m.reqId, action.payload)\n        )),\n      };\n    case actionTypes.SET_EMOJI_CONTAINER: {\n      return {\n        ...state,\n        emojiContainer: action.payload,\n      };\n    }\n    case actionTypes.ON_REACTION_UPDATED: {\n      return {\n        ...state,\n        allMessages: state.allMessages.map((m) => {\n          if (compareIds(m.messageId, action.payload.messageId)) {\n            if (m.applyReactionEvent && typeof m.applyReactionEvent === 'function') {\n              m.applyReactionEvent(action.payload);\n            }\n            return m;\n          }\n          return m;\n        }),\n      };\n    }\n    case actionTypes.MESSAGE_LIST_PARAMS_CHANGED: {\n      return {\n        ...state,\n        messageListParams: action.payload,\n      };\n    }\n    default:\n      return state;\n  }\n}\n","import { useEffect } from \"react\";\nimport { GroupChannel, GroupChannelHandler, SendbirdGroupChat } from \"@sendbird/chat/groupChannel\";\nimport { FileMessage, UserMessage } from \"@sendbird/chat/message\";\n\nimport { scrollIntoLast } from '../utils';\n\nimport { CustomUseReducerDispatcher, Logger } from \"../../../../lib/SendbirdState\";\nimport uuidv4 from \"../../../../utils/uuid\";\nimport compareIds from '../../../../utils/compareIds';\nimport * as messageActions from '../dux/actionTypes';\n\n/**\n * Handles ChannelEvents and send values to dispatcher using messagesDispatcher\n * messagesDispatcher: Dispatcher\n * sdk: sdkInstance\n * logger: loggerInstance\n * channelUrl: string\n * sdkInit: bool\n */\ninterface DynamicParams {\n  sdkInit: boolean;\n  hasMoreNext: boolean;\n  currentUserId: string;\n  disableMarkAsRead: boolean;\n  currentGroupChannel: GroupChannel;\n}\ninterface StaticParams {\n  sdk: SendbirdGroupChat;\n  logger: Logger;\n  scrollRef: React.RefObject<HTMLDivElement>;\n  setQuoteMessage: React.Dispatch<React.SetStateAction<UserMessage | FileMessage>>;\n  messagesDispatcher: CustomUseReducerDispatcher;\n}\n\nfunction useHandleChannelEvents({\n  sdkInit,\n  hasMoreNext,\n  currentUserId,\n  disableMarkAsRead,\n  currentGroupChannel,\n}: DynamicParams, {\n  sdk,\n  logger,\n  scrollRef,\n  setQuoteMessage,\n  messagesDispatcher,\n}: StaticParams): void {\n  useEffect(() => {\n    const channelUrl = currentGroupChannel?.url;\n    const channelHandlerId = uuidv4();\n    if (channelUrl && sdkInit) {\n      const channelHandler: GroupChannelHandler = {\n        onMessageReceived: (channel, message) => {\n          // Do not update when hasMoreNext\n          if (compareIds(channel?.url, channelUrl) && !hasMoreNext) {\n            let scrollToEnd = false;\n            try {\n              const { current } = scrollRef;\n              scrollToEnd = current.offsetHeight + current.scrollTop >= current.scrollHeight - 10;\n              // 10 is a buffer\n            } catch (error) {\n              //\n            }\n\n            logger.info('Channel | useHandleChannelEvents: onMessageReceived', message);\n            messagesDispatcher({\n              type: messageActions.ON_MESSAGE_RECEIVED,\n              payload: { channel, message },\n            });\n\n            if (scrollToEnd) {\n              try {\n                setTimeout(() => {\n                  if (!disableMarkAsRead) {\n                    currentGroupChannel?.markAsRead?.();\n                  }\n                  scrollIntoLast(0, scrollRef);\n                });\n              } catch (error) {\n                logger.warning('Channel | onMessageReceived | scroll to end failed');\n              }\n            }\n          }\n        },\n        onUnreadMemberStatusUpdated: (channel) => {\n          logger.info('Channel | useHandleChannelEvents: onUnreadMemberStatusUpdated', channel);\n          if (compareIds(channel?.url, channelUrl)) {\n            messagesDispatcher({\n              type: messageActions.SET_CURRENT_CHANNEL,\n              payload: channel,\n            });\n          }\n        },\n        // before(onDeliveryReceiptUpdated)\n        onUndeliveredMemberStatusUpdated: (channel) => {\n          if (compareIds(channel?.url, channelUrl)) {\n            logger.info('Channel | useHandleChannelEvents: onDeliveryReceiptUpdated', channel);\n            messagesDispatcher({\n              type: messageActions.SET_CURRENT_CHANNEL,\n              payload: channel,\n            });\n          }\n        },\n        onMessageUpdated: (channel, message) => {\n          logger.info('Channel | useHandleChannelEvents: onMessageUpdated', message);\n          messagesDispatcher({\n            type: messageActions.ON_MESSAGE_UPDATED,\n            payload: { channel, message },\n          });\n        },\n        onThreadInfoUpdated: (channel, threadInfoUpdateEvent) => {\n          logger.info('Channel | useHandleChannelEvents: onThreadInfoUpdated', { channel, threadInfoUpdateEvent });\n          messagesDispatcher({\n            type: messageActions.ON_MESSAGE_THREAD_INFO_UPDATED,\n            payload: { channel, event: threadInfoUpdateEvent },\n          });\n        },\n        onMessageDeleted: (channel, messageId) => {\n          logger.info('Channel | useHandleChannelEvents: onMessageDeleted', { channel, messageId });\n          setQuoteMessage(null);\n          messagesDispatcher({\n            type: messageActions.ON_MESSAGE_DELETED,\n            payload: messageId,\n          });\n        },\n        onReactionUpdated: (channel, reactionEvent) => {\n          logger.info('Channel | useHandleChannelEvents: onReactionUpdated', { channel, reactionEvent });\n          messagesDispatcher({\n            type: messageActions.ON_REACTION_UPDATED,\n            payload: reactionEvent,\n          });\n        },\n        onChannelChanged: (channel) => {\n          if (compareIds(channel?.url, channelUrl)) {\n            logger.info('Channel | useHandleChannelEvents: onChannelChanged', channel);\n            messagesDispatcher({\n              type: messageActions.SET_CURRENT_CHANNEL,\n              payload: channel,\n            });\n          }\n        },\n        onChannelFrozen: (channel) => {\n          if (compareIds(channel?.url, channelUrl)) {\n            logger.info('Channel | useHandleChannelEvents: onChannelFrozen', channel);\n            messagesDispatcher({\n              type: messageActions.SET_CURRENT_CHANNEL,\n              payload: channel,\n            });\n          }\n        },\n        onChannelUnfrozen: (channel) => {\n          if (compareIds(channel?.url, channelUrl)) {\n            logger.info('Channel | useHandleChannelEvents: onChannelUnFrozen', channel);\n            messagesDispatcher({\n              type: messageActions.SET_CURRENT_CHANNEL,\n              payload: channel,\n            });\n          }\n        },\n        onUserMuted: (channel, user) => {\n          if (compareIds(channel?.url, channelUrl)) {\n            logger.info('Channel | useHandleChannelEvents: onUserMuted', { channel, user });\n            messagesDispatcher({\n              type: messageActions.SET_CURRENT_CHANNEL,\n              payload: channel,\n            });\n          }\n        },\n        onUserUnmuted: (channel, user) => {\n          if (compareIds(channel?.url, channelUrl)) {\n            logger.info('Channel | useHandleChannelEvents: onUserUnmuted', { channel, user });\n            messagesDispatcher({\n              type: messageActions.SET_CURRENT_CHANNEL,\n              payload: channel,\n            });\n          }\n        },\n        onUserBanned: (channel, user) => {\n          if (compareIds(channel?.url, channelUrl) && user?.userId === sdk?.currentUser?.userId) {\n            logger.info('Channel | useHandleChannelEvents: onUserBanned', { channel, user });\n            messagesDispatcher({\n              type: messageActions.SET_CURRENT_CHANNEL,\n              payload: null,\n            });\n          }\n        },\n        onOperatorUpdated: (channel, users) => {\n          if (compareIds(channel?.url, channelUrl)) {\n            logger.info('Channel | useHandleChannelEvents: onOperatorUpdated', { channel, users });\n            messagesDispatcher({\n              type: messageActions.SET_CURRENT_CHANNEL,\n              payload: channel,\n            });\n          }\n        },\n        onUserLeft: (channel, user) => {\n          if (compareIds(channel?.url, channelUrl)) {\n            logger.info('Channel | useHandleChannelEvents: onUserLeft', { channel, user });\n            if (user?.userId === currentUserId) {\n              messagesDispatcher({\n                type: messageActions.SET_CURRENT_CHANNEL,\n                payload: null,\n              });\n            }\n          }\n        },\n      };\n      logger.info('Channel | useHandleChannelEvents: Setup event handler', { channelHandlerId, channelHandler });\n      // Add this group channel handler to the Sendbird chat instance\n      sdk.groupChannel?.addGroupChannelHandler(channelHandlerId, new GroupChannelHandler(channelHandler));\n    }\n    return () => {\n      if (sdk?.groupChannel?.removeGroupChannelHandler) {\n        logger.info('Channel | useHandleChannelEvents: Removing message reciver handler', channelHandlerId);\n        sdk.groupChannel.removeGroupChannelHandler(channelHandlerId);\n      } else if (sdk?.groupChannel) {\n        logger.error('Channel | useHandleChannelEvents: Not found the removeGroupChannelHandler');\n      }\n    }\n  }, [currentGroupChannel?.url, sdkInit]);\n}\n\nexport default useHandleChannelEvents;\n","import { useEffect } from 'react';\n\nimport * as messageActionTypes from '../dux/actionTypes';\n\nfunction useSetChannel({ channelUrl, sdkInit, disableMarkAsRead }, {\n  messagesDispatcher,\n  sdk,\n  logger,\n}) {\n  useEffect(() => {\n    if (channelUrl && sdkInit && sdk && sdk.groupChannel) {\n      logger.info('Channel | useSetChannel fetching channel', channelUrl);\n      sdk.groupChannel.getChannel(channelUrl)\n        .then((groupChannel) => {\n          logger.info('Channel | useSetChannel fetched channel', groupChannel);\n          messagesDispatcher({\n            type: messageActionTypes.SET_CURRENT_CHANNEL,\n            payload: groupChannel,\n          });\n\n          logger.info('Channel: Mark as read', groupChannel);\n          if (!disableMarkAsRead) {\n            // this order is important - this mark as read should update the event handler up above\n            try {\n              groupChannel.markAsRead();\n            } catch {\n              //\n            }\n          }\n        })\n        .catch((e) => {\n          logger.warning('Channel | useSetChannel fetch channel failed', { channelUrl, e });\n          messagesDispatcher({\n            type: messageActionTypes.SET_CHANNEL_INVALID,\n          });\n        });\n      sdk.getAllEmoji().then((emojiContainer_) => {\n        logger.info('Channel: Getting emojis success', emojiContainer_);\n        messagesDispatcher({\n          type: messageActionTypes.SET_EMOJI_CONTAINER,\n          payload: emojiContainer_,\n        });\n      }).catch((err) => {\n        logger.error('Channel: Getting emojis failed', err);\n      });\n      sdk.getAllEmoji();\n    }\n  }, [channelUrl, sdkInit]);\n}\n\nexport default useSetChannel;\n","import { useEffect } from 'react';\nimport { ReplyType } from '@sendbird/chat/message';\n\nimport * as utils from '../utils';\nimport * as messageActionTypes from '../dux/actionTypes';\nimport { PREV_RESULT_SIZE, NEXT_RESULT_SIZE } from '../const';\n\nfunction useInitialMessagesFetch({\n  currentGroupChannel,\n  userFilledMessageListQuery,\n  initialTimeStamp,\n  replyType,\n}, {\n  logger,\n  scrollRef,\n  messagesDispatcher,\n}) {\n  const channelUrl = currentGroupChannel?.url;\n  useEffect(() => {\n    logger.info('Channel useInitialMessagesFetch: Setup started', currentGroupChannel);\n    messagesDispatcher({\n      type: messageActionTypes.RESET_MESSAGES,\n      payload: null,\n    });\n\n    if (currentGroupChannel && currentGroupChannel?.getMessagesByTimestamp) {\n      const messageListParams = {};\n      messageListParams.prevResultSize = PREV_RESULT_SIZE;\n      if (initialTimeStamp) {\n        messageListParams.nextResultSize = NEXT_RESULT_SIZE;\n      }\n      messageListParams.isInclusive = true;\n      messageListParams.includeReactions = true;\n      if (replyType && (replyType === 'QUOTE_REPLY' || replyType === 'THREAD')) {\n        messageListParams.includeThreadInfo = true;\n        messageListParams.includeParentMessageInfo = true;\n        messageListParams.replyType = ReplyType.ONLY_REPLY_TO_CHANNEL;\n      }\n      if (userFilledMessageListQuery) {\n        Object.keys(userFilledMessageListQuery).forEach((key) => {\n          messageListParams[key] = userFilledMessageListQuery[key];\n        });\n      }\n      if ((replyType && (replyType === 'QUOTE_REPLY' || replyType === 'THREAD')) || userFilledMessageListQuery) {\n        logger.info('Channel useInitialMessagesFetch: Setup messageListParams', messageListParams);\n        messagesDispatcher({\n          type: messageActionTypes.MESSAGE_LIST_PARAMS_CHANGED,\n          payload: messageListParams,\n        });\n      }\n\n      logger.info('Channel: Fetching messages', { currentGroupChannel, userFilledMessageListQuery });\n      messagesDispatcher({\n        type: messageActionTypes.FETCH_INITIAL_MESSAGES_START,\n        payload: null,\n      });\n\n      currentGroupChannel.getMessagesByTimestamp(\n        initialTimeStamp || new Date().getTime(),\n        messageListParams,\n      )\n        .then((messages) => {\n          messagesDispatcher({\n            type: messageActionTypes.FETCH_INITIAL_MESSAGES_SUCCESS,\n            payload: {\n              currentGroupChannel,\n              messages,\n            },\n          });\n        })\n        .catch((error) => {\n          logger.error('Channel: Fetching messages failed', error);\n          messagesDispatcher({\n            type: messageActionTypes.FETCH_INITIAL_MESSAGES_FAILURE,\n            payload: { currentGroupChannel },\n          });\n        })\n        .finally(() => {\n          if (!initialTimeStamp) {\n            setTimeout(() => utils.scrollIntoLast(0, scrollRef));\n          }\n        });\n    }\n  }, [channelUrl, userFilledMessageListQuery, initialTimeStamp]);\n  /**\n   * Note - useEffect(() => {}, [currentGroupChannel])\n   * was buggy, that is why we did\n   * const channelUrl = currentGroupChannel && currentGroupChannel.url;\n   * useEffect(() => {}, [channelUrl])\n   * Again, this hook is supposed to execute when currentGroupChannel changes\n   * The 'channelUrl' here is not the same memory reference from Conversation.props\n   */\n}\n\nexport default useInitialMessagesFetch;\n","import { useEffect } from 'react';\n\nimport type { GroupChannel, SendbirdGroupChat } from '@sendbird/chat/groupChannel';\nimport { MessageListParams, ReplyType } from '@sendbird/chat/message';\nimport * as utils from '../utils';\nimport { PREV_RESULT_SIZE } from '../const';\nimport * as messageActionTypes from '../dux/actionTypes';\nimport { Logger } from '../../../../lib/SendbirdState';\nimport { NEXT_RESULT_SIZE } from '../const';\ninterface DynamicParams {\n  isOnline: boolean;\n  replyType?: string;\n  disableMarkAsRead: boolean;\n}\n\ninterface StaticParams {\n  logger: Logger;\n  sdk: SendbirdGroupChat;\n  currentGroupChannel: GroupChannel;\n  scrollRef: React.RefObject<HTMLDivElement>;\n  messagesDispatcher: (props: { type: string, payload: any }) => void;\n  userFilledMessageListQuery?: Record<string, any>;\n}\n\nfunction useHandleReconnect(\n  { isOnline, replyType, disableMarkAsRead }: DynamicParams,\n  {\n    logger,\n    sdk,\n    scrollRef,\n    currentGroupChannel,\n    messagesDispatcher,\n    userFilledMessageListQuery,\n  }: StaticParams,\n): void {\n  useEffect(() => {\n    const wasOffline = !isOnline;\n    return () => {\n      // state changed from offline to online\n      if (wasOffline && currentGroupChannel?.url) {\n        logger.info('Refreshing conversation state');\n        const isReactionEnabled = sdk?.appInfo?.useReaction || false;\n\n        const messageListParams: MessageListParams = {\n          prevResultSize: PREV_RESULT_SIZE,\n          isInclusive: true,\n          includeReactions: isReactionEnabled,\n          nextResultSize: NEXT_RESULT_SIZE,\n        };\n        if (replyType && replyType === 'QUOTE_REPLY') {\n          messageListParams.includeThreadInfo = true;\n          messageListParams.includeParentMessageInfo = true;\n          messageListParams.replyType = ReplyType.ONLY_REPLY_TO_CHANNEL;\n        }\n        if (userFilledMessageListQuery) {\n          Object.keys(userFilledMessageListQuery).forEach((key) => {\n            messageListParams[key] = userFilledMessageListQuery[key];\n          });\n        }\n        logger.info('Channel: Fetching messages', { currentGroupChannel, userFilledMessageListQuery });\n        messagesDispatcher({\n          type: messageActionTypes.FETCH_INITIAL_MESSAGES_START,\n          payload: null,\n        });\n\n        sdk?.groupChannel?.getChannel(currentGroupChannel?.url)\n          .then((groupChannel) => {\n            const lastMessageTime = new Date().getTime();\n\n            groupChannel.getMessagesByTimestamp(\n              lastMessageTime,\n              messageListParams,\n            )\n              .then((messages) => {\n                messagesDispatcher({\n                  type: messageActionTypes.FETCH_INITIAL_MESSAGES_SUCCESS,\n                  payload: {\n                    currentGroupChannel,\n                    messages,\n                  },\n                });\n                setTimeout(() => utils.scrollIntoLast(0, scrollRef));\n              })\n              .catch((error) => {\n                logger.error('Channel: Fetching messages failed', error);\n                messagesDispatcher({\n                  type: messageActionTypes.FETCH_INITIAL_MESSAGES_FAILURE,\n                  payload: { currentGroupChannel },\n                });\n              })\n              if (!disableMarkAsRead) {\n                try {\n                  currentGroupChannel?.markAsRead?.();\n                } catch {\n                  //\n                }\n              }\n          });\n      }\n    };\n  }, [isOnline, replyType]);\n}\n\nexport default useHandleReconnect;\n","import { useCallback } from 'react';\nimport { ReplyType } from '@sendbird/chat/message';\n\nimport * as messageActionTypes from '../dux/actionTypes';\nimport { PREV_RESULT_SIZE } from '../const';\n\nfunction useScrollCallback({\n  currentGroupChannel,\n  oldestMessageTimeStamp,\n  userFilledMessageListQuery,\n  replyType,\n}, {\n  hasMorePrev,\n  logger,\n  messagesDispatcher,\n  sdk,\n}) {\n  return useCallback((cb) => {\n    if (!hasMorePrev) { return; }\n    const { appInfo = {} } = sdk;\n    const isReactionEnabled = appInfo.useReaction || false;\n\n    const messageListParams = {\n      prevResultSize: PREV_RESULT_SIZE,\n      isInclusive: true,\n      includeReactions: isReactionEnabled,\n    };\n    if (replyType === 'QUOTE_REPLY' || replyType === 'THREAD') {\n      messageListParams.includeThreadInfo = true;\n      messageListParams.includeParentMessageInfo = true;\n      messageListParams.replyType = ReplyType.ONLY_REPLY_TO_CHANNEL;\n    }\n    if (userFilledMessageListQuery) {\n      Object.keys(userFilledMessageListQuery).forEach((key) => {\n        messageListParams[key] = userFilledMessageListQuery[key];\n      });\n    }\n    logger.info('Channel: Fetching messages', { currentGroupChannel, userFilledMessageListQuery });\n\n    currentGroupChannel.getMessagesByTimestamp(\n      oldestMessageTimeStamp || new Date().getTime(),\n      messageListParams,\n    )\n      .then((messages) => {\n        messagesDispatcher({\n          type: messageActionTypes.FETCH_PREV_MESSAGES_SUCCESS,\n          payload: { currentGroupChannel, messages },\n        });\n        cb([messages, null]);\n      })\n      .catch((error) => {\n        logger.error('Channel: Fetching messages failed', error);\n        messagesDispatcher({\n          type: messageActionTypes.FETCH_PREV_MESSAGES_FAILURE,\n          payload: { currentGroupChannel },\n        });\n        cb([null, error]);\n      });\n  }, [currentGroupChannel, oldestMessageTimeStamp, replyType]);\n}\n\nexport default useScrollCallback;\n","import { useCallback } from 'react';\nimport { ReplyType } from '@sendbird/chat/message';\n\nimport * as messageActionTypes from '../dux/actionTypes';\nimport { NEXT_RESULT_SIZE } from '../const';\n\nfunction useScrollDownCallback({\n  currentGroupChannel,\n  latestMessageTimeStamp,\n  userFilledMessageListQuery,\n  hasMoreNext,\n  replyType,\n}, {\n  logger,\n  messagesDispatcher,\n  sdk,\n}) {\n  return useCallback((cb) => {\n    if (!hasMoreNext) { return; }\n    const { appInfo = {} } = sdk;\n    const isReactionEnabled = appInfo.useReaction || false;\n    const messageListParams = {\n      nextResultSize: NEXT_RESULT_SIZE,\n      isInclusive: true,\n      includeReactions: isReactionEnabled,\n    };\n    if (replyType && (replyType === 'QUOTE_REPLY' || replyType === 'THREAD')) {\n      messageListParams.includeThreadInfo = true;\n      messageListParams.includeParentMessageInfo = true;\n      messageListParams.replyType = ReplyType.ONLY_REPLY_TO_CHANNEL;\n    }\n    if (userFilledMessageListQuery) {\n      Object.keys(userFilledMessageListQuery).forEach((key) => {\n        messageListParams[key] = userFilledMessageListQuery[key];\n      });\n    }\n    logger.info('Channel: Fetching later messages', { currentGroupChannel, userFilledMessageListQuery });\n\n    currentGroupChannel.getMessagesByTimestamp(\n      latestMessageTimeStamp || new Date().getTime(),\n      messageListParams,\n    )\n      .then((messages) => {\n        messagesDispatcher({\n          type: messageActionTypes.FETCH_NEXT_MESSAGES_SUCCESS,\n          payload: { currentGroupChannel, messages },\n        });\n        cb([messages, null]);\n      })\n      .catch((error) => {\n        logger.error('Channel: Fetching later messages failed', error);\n        messagesDispatcher({\n          type: messageActionTypes.FETCH_NEXT_MESSAGES_FAILURE,\n          payload: { currentGroupChannel },\n        });\n        cb([null, error]);\n      });\n  }, [currentGroupChannel, latestMessageTimeStamp, hasMoreNext, replyType]);\n}\n\nexport default useScrollDownCallback;\n","import { useCallback } from 'react';\n\nimport * as messageActionTypes from '../dux/actionTypes';\n\nfunction useDeleteMessageCallback({ currentGroupChannel, messagesDispatcher }, { logger }) {\n  return useCallback((message) => {\n    logger.info('Channel | useDeleteMessageCallback: Deleting message', message);\n    const { requestState } = message;\n    return new Promise((resolve, reject) => {\n      logger.info('Channel | useDeleteMessageCallback: Deleting message requestState:', requestState);\n      // Message is only on local\n      if (requestState === 'failed' || requestState === 'pending') {\n        logger.info('Channel | useDeleteMessageCallback: Deleted message from local:', message);\n        messagesDispatcher({\n          type: messageActionTypes.ON_MESSAGE_DELETED_BY_REQ_ID,\n          payload: message.reqId,\n        });\n        resolve(message);\n      }\n\n      logger.info('Channel | useDeleteMessageCallback: Deleting message from remote:', requestState);\n      currentGroupChannel.deleteMessage(message)\n        .then(() => {\n          logger.info('Channel | useDeleteMessageCallback: Deleting message success!', message);\n          messagesDispatcher({\n            type: messageActionTypes.ON_MESSAGE_DELETED,\n            payload: message.messageId,\n          });\n          resolve(message);\n        })\n        .catch((err) => {\n          logger.warning('Channel | useDeleteMessageCallback: Deleting message failed!', err);\n          reject(err);\n        });\n    });\n  }, [currentGroupChannel, messagesDispatcher]);\n}\n\nexport default useDeleteMessageCallback;\n","import { useCallback } from 'react';\n\nimport * as messageActionTypes from '../dux/actionTypes';\nimport * as topics from '../../../../lib/pubSub/topics';\n\nfunction useUpdateMessageCallback({\n  currentGroupChannel,\n  messagesDispatcher,\n  onBeforeUpdateUserMessage,\n  isMentionEnabled,\n}, {\n  logger,\n  pubSub,\n}) {\n  return useCallback((props, callback) => {\n    const {\n      messageId,\n      message,\n      mentionedUsers,\n      mentionTemplate,\n    } = props;\n    const createParamsDefault = () => {\n      const params = {};\n      params.message = message;\n      if (isMentionEnabled && mentionedUsers?.length > 0) {\n        params.mentionedUsers = mentionedUsers;\n      }\n      if (isMentionEnabled && mentionTemplate) {\n        params.mentionedMessageTemplate = mentionTemplate;\n      } else {\n        params.mentionedMessageTemplate = message;\n      }\n      return params;\n    };\n\n    const createCustomPrams = onBeforeUpdateUserMessage\n      && typeof onBeforeUpdateUserMessage === 'function';\n\n    if (createCustomPrams) {\n      logger.info('Channel: creating params using onBeforeUpdateUserMessage', onBeforeUpdateUserMessage);\n    }\n\n    const params = onBeforeUpdateUserMessage\n      ? onBeforeUpdateUserMessage(message)\n      : createParamsDefault(message);\n\n    logger.info('Channel: Updating message!', params);\n    currentGroupChannel.updateUserMessage(messageId, params).then((msg, err) => {\n      if (callback) {\n        callback(err, msg);\n      }\n\n      logger.info('Channel: Updating message success!', msg);\n      messagesDispatcher({\n        type: messageActionTypes.ON_MESSAGE_UPDATED,\n        payload: {\n          channel: currentGroupChannel,\n          message: msg,\n        },\n      });\n      pubSub.publish(\n        topics.UPDATE_USER_MESSAGE,\n        {\n          message: msg,\n          channel: currentGroupChannel,\n        },\n      );\n    });\n  }, [currentGroupChannel?.url, messagesDispatcher, onBeforeUpdateUserMessage]);\n}\n\nexport default useUpdateMessageCallback;\n","import { useCallback } from 'react';\n\nimport * as messageActionTypes from '../dux/actionTypes';\n\nfunction useResendMessageCallback({\n  currentGroupChannel,\n  messagesDispatcher,\n}, {\n  logger,\n}) {\n  return useCallback((failedMessage) => {\n    logger.info('Channel: Resending message has started', failedMessage);\n    const { messageType, file } = failedMessage;\n    if (failedMessage?.isResendable) {\n      // Move the logic setting sendingStatus to pending into the reducer\n      // eslint-disable-next-line no-param-reassign\n      failedMessage.requestState = 'pending';\n      // eslint-disable-next-line no-param-reassign\n      failedMessage.sendingStatus = 'pending';\n      messagesDispatcher({\n        type: messageActionTypes.RESEND_MESSAGEGE_START,\n        payload: failedMessage,\n      });\n\n      // userMessage\n      if (messageType === 'user') {\n        currentGroupChannel.resendUserMessage(failedMessage)\n          .then((message) => {\n            logger.info('Channel: Resending message success!', message);\n            messagesDispatcher({\n              type: messageActionTypes.SEND_MESSAGEGE_SUCESS,\n              payload: message,\n            });\n          })\n          .catch((e) => {\n            logger.warning('Channel: Resending message failed!', e);\n            // eslint-disable-next-line no-param-reassign\n            failedMessage.requestState = 'failed';\n            // eslint-disable-next-line no-param-reassign\n            failedMessage.sendingStatus = 'failed';\n            messagesDispatcher({\n              type: messageActionTypes.SEND_MESSAGEGE_FAILURE,\n              payload: failedMessage,\n            });\n          });\n\n        // eslint-disable-next-line no-param-reassign\n        failedMessage.requestState = 'pending';\n        // eslint-disable-next-line no-param-reassign\n        failedMessage.sendingStatus = 'pending';\n        messagesDispatcher({\n          type: messageActionTypes.RESEND_MESSAGEGE_START,\n          payload: failedMessage,\n        });\n        return;\n      }\n\n      if (messageType === 'file') {\n        currentGroupChannel\n          .resendFileMessage(failedMessage, file)\n          .then((message) => {\n            logger.info('Channel: Resending file message success!', message);\n            messagesDispatcher({\n              type: messageActionTypes.SEND_MESSAGEGE_SUCESS,\n              payload: message,\n            });\n          })\n          .catch((e) => {\n            logger.warning('Channel: Resending file message failed!', e);\n            // eslint-disable-next-line no-param-reassign\n            failedMessage.requestState = 'failed';\n            // eslint-disable-next-line no-param-reassign\n            failedMessage.sendingStatus = 'failed';\n            messagesDispatcher({\n              type: messageActionTypes.SEND_MESSAGEGE_FAILURE,\n              payload: failedMessage,\n            });\n          });\n\n        // eslint-disable-next-line no-param-reassign\n        failedMessage.requestState = 'pending';\n        // eslint-disable-next-line no-param-reassign\n        failedMessage.sendingStatus = 'pending';\n        messagesDispatcher({\n          type: messageActionTypes.RESEND_MESSAGEGE_START,\n          payload: failedMessage,\n        });\n      }\n    } else {\n      // to alert user on console\n      // eslint-disable-next-line no-console\n      console.error('Message is not resendable');\n      logger.warning('Message is not resendable', failedMessage);\n    }\n  }, [currentGroupChannel, messagesDispatcher]);\n}\n\nexport default useResendMessageCallback;\n","import { useRef, useCallback } from 'react';\n\nimport * as messageActionTypes from '../dux/actionTypes';\nimport * as utils from '../utils';\nimport * as topics from '../../../../lib/pubSub/topics';\n\nexport default function useSendMessageCallback({\n  isMentionEnabled,\n  currentGroupChannel,\n  onBeforeSendUserMessage,\n}, {\n  logger,\n  pubSub,\n  scrollRef,\n  messagesDispatcher,\n}) {\n  const messageInputRef = useRef(null);\n\n  const sendMessage = useCallback(\n    (props) => {\n      const {\n        quoteMessage = null,\n        message,\n        mentionTemplate,\n        // mentionedUserIds,\n        mentionedUsers,\n      } = props;\n      const createParamsDefault = () => {\n        const params = {};\n        params.message = message?.trim() || message;\n        // if (isMentionEnabled && mentionedUserIds?.length > 0) {\n        if (isMentionEnabled && mentionedUsers?.length > 0) {\n          // params.mentionedUserIds = mentionedUserIds;\n          params.mentionedUsers = mentionedUsers;\n        }\n        // if (isMentionEnabled && mentionTemplate && mentionedUserIds?.length > 0) {\n        if (isMentionEnabled && mentionTemplate && mentionedUsers?.length > 0) {\n          params.mentionedMessageTemplate = mentionTemplate?.trim() || mentionTemplate;\n        }\n        if (quoteMessage) {\n          params.isReplyToChannel = true;\n          params.parentMessageId = quoteMessage.messageId;\n        }\n        return params;\n      };\n\n      const createCustomPrams = onBeforeSendUserMessage\n        && typeof onBeforeSendUserMessage === 'function';\n\n      if (createCustomPrams) {\n        logger.info('Channel: creating params using onBeforeSendUserMessage', onBeforeSendUserMessage);\n      }\n\n      const params = onBeforeSendUserMessage\n        ? onBeforeSendUserMessage(message, quoteMessage)\n        : createParamsDefault();\n\n      logger.info('Channel: Sending message has started', params);\n      currentGroupChannel.sendUserMessage(params)\n        .onPending((pendingMsg) => {\n          pubSub.publish(topics.SEND_MESSAGE_START, {\n            /* pubSub is used instead of messagesDispatcher\n              to avoid redundantly calling `messageActionTypes.SEND_MESSAGEGE_START` */\n            message: pendingMsg,\n            channel: currentGroupChannel,\n          });\n          setTimeout(() => utils.scrollIntoLast(0, scrollRef));\n        })\n        .onFailed((err, msg) => {\n          logger.warning('Channel: Sending message failed!', { message: msg, error: err });\n          messagesDispatcher({\n            type: messageActionTypes.SEND_MESSAGEGE_FAILURE,\n            payload: msg,\n          });\n        })\n        .onSucceeded((msg) => {\n          logger.info('Channel: Sending message success!', msg);\n          messagesDispatcher({\n            type: messageActionTypes.SEND_MESSAGEGE_SUCESS,\n            payload: msg,\n          });\n        });\n    },\n    [currentGroupChannel, onBeforeSendUserMessage],\n  );\n\n  return [messageInputRef, sendMessage];\n}\n","import { useCallback } from 'react';\n\nimport * as messageActionTypes from '../dux/actionTypes';\nimport * as utils from '../utils';\nimport * as topics from '../../../../lib/pubSub/topics';\n\nexport default function useSendFileMessageCallback({\n  currentGroupChannel,\n  onBeforeSendFileMessage,\n  imageCompression = {},\n}, {\n  logger,\n  pubSub,\n  scrollRef,\n  messagesDispatcher,\n}) {\n  const sendMessage = useCallback((file, quoteMessage = null) => {\n    const {\n      compressionRate,\n      resizingWidth,\n      resizingHeight,\n    } = imageCompression;\n    const createCustomParams = onBeforeSendFileMessage && typeof onBeforeSendFileMessage === 'function';\n\n    const compressibleFileType = (file.type === 'image/jpg' || file.type === 'image/png' || file.type === 'image/jpeg');\n    const compressibleRatio = (compressionRate > 0) && (compressionRate < 1);\n    // pxToNumber returns null if values are invalid\n    const compressibleDiamensions = utils.pxToNumber(resizingWidth)\n      || utils.pxToNumber(resizingHeight);\n\n    const canCompressImage = compressibleFileType && (compressibleRatio || compressibleDiamensions);\n\n    const createParamsDefault = (file_) => {\n      const params = {};\n      params.file = file_;\n      if (quoteMessage) {\n        params.isReplyToChannel = true;\n        params.parentMessageId = quoteMessage.messageId;\n      }\n      return params;\n    };\n\n    if (canCompressImage) { // Using image compression\n      try {\n        const image = document.createElement('img');\n        image.src = URL.createObjectURL(file);\n        image.onload = () => {\n          URL.revokeObjectURL(image.src);\n          const canvas = document.createElement('canvas');\n          const imageWdith = image.naturalWidth || image.width;\n          const imageHeight = image.naturalHeight || image.height;\n\n          let targetWidth = utils.pxToNumber(resizingWidth) || imageWdith;\n          let targetHeight = utils.pxToNumber(resizingHeight) || imageHeight;\n\n          // In canvas.toBlob(callback, mimeType, qualityArgument)\n          // qualityArgument doesnt work\n          // so in case compressibleDiamensions are not present, we use ratio\n          if (file.type === 'image/png' && !compressibleDiamensions) {\n            targetWidth *= compressionRate;\n            targetHeight *= compressionRate;\n          }\n\n          canvas.width = targetWidth;\n          canvas.height = targetHeight;\n          const context = canvas.getContext('2d');\n          context.drawImage(image, 0, 0, targetWidth, targetHeight);\n          context.canvas.toBlob(\n            (newImageBlob) => {\n              const compressedFile = new File([newImageBlob], file.name, { type: file.type });\n              if (createCustomParams) {\n                logger.info('Channel: Creating params using onBeforeSendFileMessage', onBeforeSendFileMessage);\n              }\n              const params = createCustomParams\n                ? onBeforeSendFileMessage(compressedFile, quoteMessage)\n                : createParamsDefault(compressedFile);\n              logger.info('Channel: Uploading file message start!', params);\n              currentGroupChannel.sendFileMessage(params)\n                .onPending((pendingMessage) => {\n                  pubSub.publish(topics.SEND_MESSAGE_START, {\n                    /* pubSub is used instead of messagesDispatcher\n                      to avoid redundantly calling `messageActionTypes.SEND_MESSAGEGE_START` */\n                    message: {\n                      ...pendingMessage,\n                      url: URL.createObjectURL(compressedFile),\n                      // pending thumbnail message seems to be failed\n                      requestState: 'pending',\n                    },\n                    channel: currentGroupChannel,\n                  });\n                  setTimeout(() => utils.scrollIntoLast(0, scrollRef), 1000);\n                })\n                .onFailed((err, failedMessage) => {\n                  logger.error('Channel: Sending file message failed!', { failedMessage, err });\n                  // eslint-disable-next-line no-param-reassign\n                  failedMessage.localUrl = URL.createObjectURL(compressedFile);\n                  // eslint-disable-next-line no-param-reassign\n                  failedMessage.file = compressedFile;\n                  messagesDispatcher({\n                    type: messageActionTypes.SEND_MESSAGEGE_FAILURE,\n                    payload: failedMessage,\n                  });\n                })\n                .onSucceeded((succeededMessage) => {\n                  logger.info('Channel: Sending file message success!', succeededMessage);\n                  messagesDispatcher({\n                    type: messageActionTypes.SEND_MESSAGEGE_SUCESS,\n                    payload: succeededMessage,\n                  });\n                });\n            },\n            file.type,\n            compressionRate,\n          );\n        };\n      } catch (error) {\n        logger.error('Channel: Sending file message failed!', error);\n      }\n    } else { // Not using image compression\n      if (createCustomParams) {\n        logger.info('Channel: creating params using onBeforeSendFileMessage', onBeforeSendFileMessage);\n      }\n      const params = onBeforeSendFileMessage\n        ? onBeforeSendFileMessage(file, quoteMessage)\n        : createParamsDefault(file);\n      logger.info('Channel: Uploading file message start!', params);\n\n      currentGroupChannel.sendFileMessage(params)\n        .onPending((pendingMsg) => {\n          pubSub.publish(topics.SEND_MESSAGE_START, {\n            /* pubSub is used instead of messagesDispatcher\n              to avoid redundantly calling `messageActionTypes.SEND_MESSAGEGE_START` */\n            message: {\n              ...pendingMsg,\n              url: URL.createObjectURL(file),\n              // pending thumbnail message seems to be failed\n              requestState: 'pending',\n            },\n            channel: currentGroupChannel,\n          });\n          setTimeout(() => utils.scrollIntoLast(0, scrollRef), 1000);\n        })\n        .onFailed((error, message) => {\n          logger.error('Channel: Sending file message failed!', { message, error });\n          // eslint-disable-next-line no-param-reassign\n          message.localUrl = URL.createObjectURL(file);\n          // eslint-disable-next-line no-param-reassign\n          message.file = file;\n          messagesDispatcher({\n            type: messageActionTypes.SEND_MESSAGEGE_FAILURE,\n            payload: message,\n          });\n        })\n        .onSucceeded((message) => {\n          logger.info('Channel: Sending message success!', message);\n          messagesDispatcher({\n            type: messageActionTypes.SEND_MESSAGEGE_SUCESS,\n            payload: message,\n          });\n        });\n    }\n  }, [currentGroupChannel, onBeforeSendFileMessage, imageCompression]);\n  return [sendMessage];\n}\n","import React, { useMemo } from 'react';\n\nimport { EmojiListItems } from '../../../../ui/ContextMenu';\nimport ReactionButton from '../../../../ui/ReactionButton';\nimport ImageRenderer from '../../../../ui/ImageRenderer';\nimport Icon, { IconTypes } from '../../../../ui/Icon';\n\nexport default function useMemoizedEmojiListItems({\n  emojiContainer, toggleReaction,\n}, {\n  isReactionEnabled,\n  logger,\n  userId,\n  emojiAllList,\n}) {\n  /* eslint-disable react/prop-types */\n  return useMemo(() => ({\n    parentRef,\n    parentContainRef,\n    message,\n    closeDropdown,\n    spaceFromTrigger = {},\n  }) => {\n    if (!isReactionEnabled || !(parentRef || parentContainRef || message || closeDropdown)) {\n      logger.warning('Channel: Invalid Params in memoizedEmojiListItems');\n      return null;\n    }\n\n    return (\n      <EmojiListItems\n        parentRef={parentRef}\n        parentContainRef={parentContainRef}\n        closeDropdown={closeDropdown}\n        spaceFromTrigger={spaceFromTrigger}\n      >\n        {\n          emojiAllList.map((emoji) => {\n            const reactedReaction = message.reactions\n              .filter((reaction) => reaction.key === emoji.key)[0];\n            const isReacted = reactedReaction\n              ? !(reactedReaction.userIds.indexOf(userId) < 0)\n              : false;\n            return (\n              <ReactionButton\n                key={emoji.key}\n                width=\"36px\"\n                height=\"36px\"\n                selected={isReacted}\n                onClick={() => {\n                  closeDropdown();\n                  toggleReaction(message, emoji.key, isReacted);\n                }}\n              >\n                <ImageRenderer\n                  url={emoji.url}\n                  width=\"28px\"\n                  height=\"28px\"\n                  defaultComponent={\n                    <Icon width=\"28px\" height=\"28px\" type={IconTypes.QUESTION} />\n                  }\n                />\n              </ReactionButton>\n            );\n          })\n        }\n      </EmojiListItems>\n    );\n  }, [emojiContainer, toggleReaction]);\n}\n","import { useCallback } from 'react';\n\nexport default function useToggleReactionCallback({ currentGroupChannel }, { logger }) {\n  return useCallback((message, key, isReacted) => {\n    if (isReacted) {\n      currentGroupChannel.deleteReaction(message, key)\n        .then((res) => {\n          logger.info('Delete reaction success', res);\n        })\n        .catch((err) => {\n          logger.warning('Delete reaction failed', err);\n        });\n      return;\n    }\n    currentGroupChannel.addReaction(message, key)\n      .then((res) => {\n        logger.info('Add reaction success', res);\n      })\n      .catch((err) => {\n        logger.warning('Add reaction failed', err);\n      });\n  }, [currentGroupChannel]);\n}\n","import type { BaseMessage } from '@sendbird/chat/message';\nimport { useCallback } from 'react';\n\nimport { Logger } from '../../../../index';\n\ninterface DynamicParams {\n  setInitialTimeStamp: React.Dispatch<React.SetStateAction<number>>;\n  setAnimatedMessageId: React.Dispatch<React.SetStateAction<number>>;\n  allMessages: BaseMessage[];\n}\n\ninterface StaticParams {\n  logger: Logger;\n}\n\nfunction useScrollToMessage({\n  setInitialTimeStamp,\n  setAnimatedMessageId,\n  allMessages,\n}: DynamicParams,\n  { logger }: StaticParams,\n): (createdAt: number, messageId: number) => void {\n  return useCallback(\n    (createdAt: number, messageId: number) => {\n      const isPresent = allMessages.find((m) => (\n        m.messageId === messageId\n      ));\n      setAnimatedMessageId(null);\n      setTimeout(() => {\n        if (isPresent) {\n          logger.info('Channel: scroll to message - message is present');\n          setAnimatedMessageId(messageId);\n        } else {\n          logger.info('Channel: scroll to message - fetching older messages');\n          setInitialTimeStamp(null);\n          setInitialTimeStamp(createdAt);\n          setAnimatedMessageId(messageId);\n        }\n      });\n    }, [\n    setInitialTimeStamp,\n    setAnimatedMessageId,\n    allMessages,\n  ],\n  );\n}\n\nexport default useScrollToMessage;\n","import React, {\n  useEffect,\n  useState,\n  useReducer,\n  useRef,\n  useMemo,\n} from 'react';\n\nimport type { GroupChannel, SendbirdGroupChat } from '@sendbird/chat/groupChannel';\nimport type {\n  FileMessage,\n  FileMessageCreateParams,\n  UserMessage,\n  UserMessageCreateParams,\n  UserMessageUpdateParams,\n} from '@sendbird/chat/message';\nimport type { SendbirdError, User } from '@sendbird/chat';\n\nimport { ReplyType, RenderUserProfileProps } from '../../../types';\nimport { UserProfileProvider } from '../../../lib/UserProfileContext';\nimport useSendbirdStateContext from '../../../hooks/useSendbirdStateContext';\nimport { CoreMessageType } from '../../../utils';\n\nimport * as utils from './utils';\n\nimport messagesInitialState from './dux/initialState';\nimport messagesReducer from './dux/reducers';\nimport * as messageActionTypes from './dux/actionTypes';\n\nimport useHandleChannelEvents from './hooks/useHandleChannelEvents';\nimport useGetChannel from './hooks/useGetChannel';\nimport useInitialMessagesFetch from './hooks/useInitialMessagesFetch';\nimport useHandleReconnect from './hooks/useHandleReconnect';\nimport useScrollCallback from './hooks/useScrollCallback';\nimport useScrollDownCallback from './hooks/useScrollDownCallback';\nimport useDeleteMessageCallback from './hooks/useDeleteMessageCallback';\nimport useUpdateMessageCallback from './hooks/useUpdateMessageCallback';\nimport useResendMessageCallback from './hooks/useResendMessageCallback';\nimport useSendMessageCallback from './hooks/useSendMessageCallback';\nimport useSendFileMessageCallback from './hooks/useSendFileMessageCallback';\nimport useMemoizedEmojiListItems from './hooks/useMemoizedEmojiListItems';\nimport useToggleReactionCallback from './hooks/useToggleReactionCallback';\nimport useScrollToMessage from './hooks/useScrollToMessage';\nimport { CustomUseReducerDispatcher } from '../../../lib/SendbirdState';\n\nexport type MessageListParams = {\n  // https://sendbird.github.io/core-sdk-javascript/module-model_params_messageListParams-MessageListParams.html\n  replyType?: string,\n  messageType?: string,\n  prevResultSize?: number,\n  nextResultSize?: number,\n  reverse?: boolean,\n  isInclusive?: boolean,\n  includeMetaArray?: boolean,\n  includeReactions?: boolean,\n  includeThreadInfo?: boolean,\n  includePollDetails?: boolean,\n  includeParentMessageInfo?: boolean,\n  showSubchannelMessagesOnly?: boolean,\n  customTypes?: Array<string>,\n  senderUserIds?: Array<string>,\n};\n\nexport type ChannelQueries = {\n  messageListParams?: MessageListParams;\n};\n\nexport enum ThreadReplySelectType {\n  PARENT = 'PARENT',\n  THREAD = 'THREAD',\n}\n\nexport type ChannelContextProps = {\n  children?: React.ReactElement;\n  channelUrl: string;\n  isReactionEnabled?: boolean;\n  isMessageGroupingEnabled?: boolean;\n  showSearchIcon?: boolean;\n  animatedMessage?: number;\n  highlightedMessage?: number;\n  startingPoint?: number;\n  onBeforeSendUserMessage?(text: string, quotedMessage?: UserMessage | FileMessage): UserMessageCreateParams;\n  onBeforeSendFileMessage?(file: File, quotedMessage?: UserMessage | FileMessage): FileMessageCreateParams;\n  onBeforeUpdateUserMessage?(text: string): UserMessageUpdateParams;\n  onChatHeaderActionClick?(event: React.MouseEvent<HTMLElement>): void;\n  onSearchClick?(): void;\n  onBackClick?(): void;\n  replyType?: ReplyType;\n  threadReplySelectType?: ThreadReplySelectType;\n  queries?: ChannelQueries;\n  renderUserProfile?: (props: RenderUserProfileProps) => React.ReactElement;\n  disableUserProfile?: boolean;\n  disableMarkAsRead?: boolean;\n  onReplyInThread?: (props: { message: UserMessage | FileMessage }) => void;\n  onQuoteMessageClick?: (props: { message: UserMessage | FileMessage }) => void;\n  onMessageAnimated?: () => void;\n  onMessageHighlighted?: () => void;\n};\n\ninterface MessageStoreInterface {\n  allMessages: CoreMessageType[];\n  loading: boolean;\n  initialized: boolean;\n  unreadSince: string;\n  isInvalid: boolean;\n  currentGroupChannel: GroupChannel;\n  hasMorePrev: boolean;\n  oldestMessageTimeStamp: number;\n  hasMoreNext: boolean;\n  latestMessageTimeStamp: number;\n  emojiContainer: any;\n  readStatus: any;\n}\n\ninterface SendMessageParams {\n  message: string;\n  quoteMessage?: UserMessage | FileMessage;\n  // mentionedUserIds?: Array<string>;\n  mentionedUsers?: Array<User>;\n  mentionTemplate?: string;\n}\n\ninterface UpdateMessageProps {\n  messageId: string | number;\n  message: string;\n  mentionedUsers?: Array<User>;\n  mentionTemplate?: string;\n}\n\ninterface ChannelProviderInterface extends ChannelContextProps, MessageStoreInterface {\n  scrollToMessage?(createdAt: number, messageId: number): void;\n  messageActionTypes: Record<string, string>;\n  messagesDispatcher: CustomUseReducerDispatcher;\n  quoteMessage: UserMessage | FileMessage;\n  setQuoteMessage: React.Dispatch<React.SetStateAction<UserMessage | FileMessage>>;\n  initialTimeStamp: number;\n  setInitialTimeStamp: React.Dispatch<React.SetStateAction<number>>;\n  animatedMessageId: number;\n  highLightedMessageId: number;\n  nicknamesMap: Map<string, string>;\n  emojiAllMap: any;\n  onScrollCallback: any;\n  onScrollDownCallback: any;\n  memoizedEmojiListItems: any;\n  scrollRef: React.MutableRefObject<HTMLDivElement>;\n  setAnimatedMessageId: React.Dispatch<React.SetStateAction<number>>;\n  setHighLightedMessageId: React.Dispatch<React.SetStateAction<number>>;\n  messageInputRef: React.MutableRefObject<HTMLInputElement>,\n  deleteMessage(message: CoreMessageType): Promise<CoreMessageType>,\n  updateMessage(props: UpdateMessageProps, callback?: (err: SendbirdError, message: UserMessage) => void): Promise<CoreMessageType>,\n  resendMessage(failedMessage: UserMessage | FileMessage): Promise<UserMessage | FileMessage>,\n  // TODO: Good to change interface to using params / This part need refactoring\n  sendMessage(props: SendMessageParams): Promise<UserMessage>,\n  sendFileMessage(file: File, quoteMessage: UserMessage | FileMessage): Promise<FileMessage>,\n  // sendMessage(messageParams: SendBird.UserMessageParams): Promise<SendBird.UserMessage>,\n  // sendFileMessage(messageParams: SendBird.FileMessageParams): Promise<SendBird.FileMessage>,\n  toggleReaction(message: UserMessage | FileMessage, emojiKey: string, isReacted: boolean): void,\n  renderUserMentionItem?: (props: { user: User }) => JSX.Element;\n}\n\nconst ChannelContext = React.createContext<ChannelProviderInterface | null>(undefined);\n\nconst ChannelProvider: React.FC<ChannelContextProps> = (props: ChannelContextProps) => {\n  const {\n    channelUrl,\n    children,\n    isReactionEnabled,\n    isMessageGroupingEnabled = true,\n    showSearchIcon,\n    animatedMessage,\n    highlightedMessage,\n    startingPoint,\n    onBeforeSendUserMessage,\n    onBeforeSendFileMessage,\n    onBeforeUpdateUserMessage,\n    onChatHeaderActionClick,\n    onSearchClick,\n    onBackClick,\n    replyType,\n    threadReplySelectType = ThreadReplySelectType.THREAD,\n    queries,\n    disableMarkAsRead = false,\n    onReplyInThread,\n    onQuoteMessageClick,\n    onMessageAnimated,\n    onMessageHighlighted,\n  } = props;\n\n  const globalStore = useSendbirdStateContext();\n  const { config } = globalStore;\n  const {\n    pubSub,\n    logger,\n    userId,\n    isOnline,\n    imageCompression,\n    isMentionEnabled,\n    onUserProfileMessage,\n  } = config;\n  const sdk = globalStore?.stores?.sdkStore?.sdk as SendbirdGroupChat;\n  const sdkInit = globalStore?.stores?.sdkStore?.initialized;\n\n  const [initialTimeStamp, setInitialTimeStamp] = useState(startingPoint);\n  useEffect(() => {\n    setInitialTimeStamp(startingPoint);\n  }, [startingPoint, channelUrl]);\n  const [animatedMessageId, setAnimatedMessageId] = useState(0);\n  const [highLightedMessageId, setHighLightedMessageId] = useState(highlightedMessage);\n  useEffect(() => {\n    setHighLightedMessageId(highlightedMessage);\n  }, [highlightedMessage]);\n  const userFilledMessageListQuery = queries?.messageListParams;\n  const [quoteMessage, setQuoteMessage] = useState<UserMessage | FileMessage>(null);\n\n  const [messagesStore, messagesDispatcher] = useReducer(\n    messagesReducer,\n    messagesInitialState,\n  ) as [MessageStoreInterface, CustomUseReducerDispatcher];\n  const scrollRef = useRef(null);\n\n  const {\n    allMessages,\n    loading,\n    initialized,\n    unreadSince,\n    isInvalid,\n    currentGroupChannel,\n    hasMorePrev,\n    oldestMessageTimeStamp,\n    hasMoreNext,\n    latestMessageTimeStamp,\n    emojiContainer,\n    readStatus,\n  } = messagesStore;\n\n  const isSuper = currentGroupChannel?.isSuper || false;\n  const isBroadcast = currentGroupChannel?.isBroadcast || false;\n  const { appInfo } = sdk;\n  const usingReaction = appInfo?.useReaction && !isBroadcast && !isSuper && (config?.isReactionEnabled || isReactionEnabled);\n\n  const emojiAllMap = useMemo(() => (\n    usingReaction\n      ? utils.getAllEmojisMapFromEmojiContainer(emojiContainer)\n      : new Map()\n  ), [emojiContainer]);\n  const emojiAllList = useMemo(() => (\n    usingReaction\n      ? utils.getAllEmojisFromEmojiContainer(emojiContainer)\n      : []\n  ), [emojiContainer]);\n  const nicknamesMap: Map<string, string> = useMemo(() => (\n    (usingReaction && currentGroupChannel)\n      ? utils.getNicknamesMapFromMembers(currentGroupChannel?.members)\n      : new Map()\n  ), [currentGroupChannel?.members]);\n\n  // Animate message\n  useEffect(() => {\n    if (animatedMessage) {\n      setAnimatedMessageId(animatedMessage);\n    }\n  }, [animatedMessage]);\n\n  // Scrollup is default scroll for channel\n  const onScrollCallback = useScrollCallback({\n    currentGroupChannel, oldestMessageTimeStamp, userFilledMessageListQuery, replyType,\n  }, {\n    hasMorePrev,\n    logger,\n    messagesDispatcher,\n    sdk,\n  });\n\n  const scrollToMessage = useScrollToMessage({\n    setInitialTimeStamp,\n    setAnimatedMessageId,\n    allMessages,\n  }, { logger });\n\n  // onScrollDownCallback is added for navigation to different timestamps on messageSearch\n  // hasMorePrev, onScrollCallback -> scroll up(default behavior)\n  // hasMoreNext, onScrollDownCallback -> scroll down\n  const onScrollDownCallback = useScrollDownCallback({\n    currentGroupChannel,\n    latestMessageTimeStamp,\n    userFilledMessageListQuery,\n    hasMoreNext,\n    replyType,\n  }, {\n    logger,\n    messagesDispatcher,\n    sdk,\n  });\n\n  const toggleReaction = useToggleReactionCallback({ currentGroupChannel }, { logger });\n\n  const memoizedEmojiListItems = useMemoizedEmojiListItems({\n    emojiContainer, toggleReaction,\n  }, {\n    isReactionEnabled: usingReaction,\n    logger,\n    userId,\n    emojiAllList,\n  });\n\n  // to create message-datasource\n  // this hook sets currentGroupChannel asynchronously\n  useGetChannel(\n    { channelUrl, sdkInit, disableMarkAsRead },\n    { messagesDispatcher, sdk, logger },\n  );\n\n  // to set quote message as null\n  useEffect(() => {\n    setQuoteMessage(null);\n  }, [channelUrl]);\n\n  // Hook to handle ChannelEvents and send values to useReducer using messagesDispatcher\n  useHandleChannelEvents(\n    {\n      currentGroupChannel,\n      sdkInit,\n      currentUserId: userId,\n      hasMoreNext,\n      disableMarkAsRead\n    },\n    {\n      messagesDispatcher,\n      sdk,\n      logger,\n      scrollRef,\n      setQuoteMessage,\n    },\n  );\n\n  // hook that fetches messages when channel changes\n  // to be clear here useGetChannel sets currentGroupChannel\n  // and useInitialMessagesFetch executes when currentGroupChannel changes\n  // p.s This one executes on initialTimeStamp change too\n  useInitialMessagesFetch({\n    currentGroupChannel,\n    userFilledMessageListQuery,\n    initialTimeStamp,\n    latestMessageTimeStamp,\n    replyType,\n  }, {\n    logger,\n    scrollRef,\n    messagesDispatcher,\n  });\n\n  // handles API calls from withSendbird\n  useEffect(() => {\n    const subscriber = utils.pubSubHandler({\n      channelUrl,\n      pubSub,\n      dispatcher: messagesDispatcher,\n      scrollRef,\n    });\n    return () => {\n      utils.pubSubHandleRemover(subscriber);\n    };\n  }, [channelUrl, sdkInit]);\n\n  // handling connection breaks\n  useHandleReconnect({ isOnline, replyType, disableMarkAsRead }, {\n    logger,\n    sdk,\n    scrollRef,\n    currentGroupChannel,\n    messagesDispatcher,\n    userFilledMessageListQuery,\n  });\n\n  // callbacks for Message CURD actions\n  const deleteMessage = useDeleteMessageCallback({ currentGroupChannel, messagesDispatcher },\n    { logger });\n  const updateMessage = useUpdateMessageCallback(\n    { currentGroupChannel, messagesDispatcher, onBeforeUpdateUserMessage, isMentionEnabled },\n    { logger, pubSub },\n  );\n  const resendMessage = useResendMessageCallback(\n    { currentGroupChannel, messagesDispatcher },\n    { logger },\n  );\n  const [messageInputRef, sendMessage] = useSendMessageCallback(\n    { currentGroupChannel, onBeforeSendUserMessage, isMentionEnabled },\n    {\n      logger,\n      pubSub,\n      scrollRef,\n      messagesDispatcher,\n    },\n  );\n  const [sendFileMessage] = useSendFileMessageCallback(\n    { currentGroupChannel, onBeforeSendFileMessage, imageCompression },\n    {\n      logger,\n      pubSub,\n      scrollRef,\n      messagesDispatcher,\n    },\n  );\n\n  return (\n    <ChannelContext.Provider value={{\n      // props\n      channelUrl,\n      isReactionEnabled: usingReaction,\n      isMessageGroupingEnabled,\n      showSearchIcon,\n      highlightedMessage,\n      startingPoint,\n      onBeforeSendUserMessage,\n      onBeforeSendFileMessage,\n      onBeforeUpdateUserMessage,\n      onChatHeaderActionClick,\n      onSearchClick,\n      onBackClick,\n      replyType,\n      threadReplySelectType,\n      queries,\n      disableMarkAsRead,\n      onReplyInThread,\n      onQuoteMessageClick,\n      onMessageAnimated,\n      onMessageHighlighted,\n\n      // messagesStore\n      allMessages,\n      loading,\n      initialized,\n      unreadSince,\n      isInvalid,\n      currentGroupChannel,\n      hasMorePrev,\n      hasMoreNext,\n      oldestMessageTimeStamp,\n      latestMessageTimeStamp,\n      emojiContainer,\n      readStatus,\n\n      // utils\n      scrollToMessage,\n      quoteMessage,\n      setQuoteMessage,\n      deleteMessage,\n      updateMessage,\n      resendMessage,\n      messageInputRef,\n      sendMessage,\n      sendFileMessage,\n      initialTimeStamp,\n      messageActionTypes,\n      messagesDispatcher,\n      setInitialTimeStamp,\n      setAnimatedMessageId,\n      setHighLightedMessageId,\n      animatedMessageId,\n      highLightedMessageId,\n      nicknamesMap,\n      emojiAllMap,\n      onScrollCallback,\n      onScrollDownCallback,\n      memoizedEmojiListItems,\n      scrollRef,\n      toggleReaction,\n    }}>\n      <UserProfileProvider\n        disableUserProfile={props?.disableUserProfile}\n        renderUserProfile={props?.renderUserProfile}\n        onUserProfileMessage={onUserProfileMessage}\n      >\n        {children}\n      </UserProfileProvider>\n    </ChannelContext.Provider>\n  );\n}\n\nexport type UseChannelType = () => ChannelProviderInterface;\nconst useChannelContext: UseChannelType = () => React.useContext(ChannelContext);\n\nexport {\n  ChannelProvider,\n  useChannelContext,\n};\n"],"names":["RESET_MESSAGES","FETCH_INITIAL_MESSAGES_START","FETCH_INITIAL_MESSAGES_SUCCESS","FETCH_INITIAL_MESSAGES_FAILURE","FETCH_PREV_MESSAGES_SUCCESS","FETCH_PREV_MESSAGES_FAILURE","FETCH_NEXT_MESSAGES_SUCCESS","FETCH_NEXT_MESSAGES_FAILURE","SEND_MESSAGEGE_START","SEND_MESSAGEGE_SUCESS","SEND_MESSAGEGE_FAILURE","RESEND_MESSAGEGE_START","ON_MESSAGE_RECEIVED","ON_MESSAGE_UPDATED","ON_MESSAGE_THREAD_INFO_UPDATED","ON_MESSAGE_DELETED","ON_MESSAGE_DELETED_BY_REQ_ID","SET_CURRENT_CHANNEL","SET_CHANNEL_INVALID","MARK_AS_READ","ON_REACTION_UPDATED","SET_EMOJI_CONTAINER","MESSAGE_LIST_PARAMS_CHANGED","UNDEFINED","SUCCEEDED","FAILED","PENDING","getSendingMessageStatus","scrollIntoLast","initialTry","scrollRef","MAX_TRIES","currentTry","scrollDOM","current","document","querySelector","scrollTop","scrollHeight","error","setTimeout","pubSubHandleRemover","subscriber","forEach","s","remove","pubSubHandler","channelUrl","pubSub","dispatcher","Map","subscribe","set","topics","msg","channel","message","url","type","channelActions","payload","fromSelector","messageId","isOperator","groupChannel","myRole","isDisabledBecauseFrozen","isFrozen","isDisabledBecauseMuted","myMutedState","getAllEmojisFromEmojiContainer","emojiContainer","emojiCategories","allEmojis","categoryIndex","length","emojis","emojiIndex","push","getAllEmojisMapFromEmojiContainer","allEmojisMap","key","getNicknamesMapFromMembers","members","nicknamesMap","memberIndex","userId","nickname","getMessageCreatedAt","format","createdAt","isSameGroup","comparingMessage","currentChannel","messageType","sender","sendingStatus","isReadMessage","compareMessagesForGrouping","prevMessage","currMessage","nextMessage","replyType","threadInfo","isAcceptable","passUnsuccessfullMessages","allMessages","newMessage","lastIndexOfSucceededMessage","map","isAdminMessage","lastIndexOf","messages","splice","pxToNumber","px","parsed","Number","parseFloat","isNaN","isAboutSame","a","b","Math","abs","initialized","loading","currentGroupChannel","hasMorePrev","oldestMessageTimeStamp","hasMoreNext","latestMessageTimeStamp","unreadSince","isInvalid","messageListParams","getOldestMessageTimeStamp","oldestMessage","getLatestMessageTimeStamp","latestMessage","reducer","state","action","actionTypes","_objectSpread","filter","m","PREV_RESULT_SIZE","duplicatedMessageIds","updatedOldMessages","duplicatedMessage","find","compareIds","updatedAt","filteredNewMessages","NEXT_RESULT_SIZE","filteredMessages","reqId","pendingIndex","findIndex","slice","failed","currentGroupChannelUrl","some","filterMessageListParams","senderMember","profileUrl","friendName","member","Date","parentMessageId","parentMessage","event","targetMessageId","applyReactionEvent","useHandleChannelEvents","_a","_b","sdkInit","currentUserId","disableMarkAsRead","sdk","logger","setQuoteMessage","messagesDispatcher","useEffect","channelHandlerId","uuidv4","channelHandler","onMessageReceived","scrollToEnd","offsetHeight","info","messageActions","markAsRead","warning","onUnreadMemberStatusUpdated","onUndeliveredMemberStatusUpdated","onMessageUpdated","onThreadInfoUpdated","threadInfoUpdateEvent","onMessageDeleted","onReactionUpdated","reactionEvent","onChannelChanged","onChannelFrozen","onChannelUnfrozen","onUserMuted","user","onUserUnmuted","onUserBanned","currentUser","onOperatorUpdated","users","onUserLeft","addGroupChannelHandler","GroupChannelHandler","removeGroupChannelHandler","useSetChannel","getChannel","then","messageActionTypes","catch","e","getAllEmoji","emojiContainer_","err","useInitialMessagesFetch","userFilledMessageListQuery","initialTimeStamp","getMessagesByTimestamp","prevResultSize","nextResultSize","isInclusive","includeReactions","includeThreadInfo","includeParentMessageInfo","ReplyType","ONLY_REPLY_TO_CHANNEL","Object","keys","getTime","finally","utils","useHandleReconnect","isOnline","wasOffline","isReactionEnabled","appInfo","useReaction","messageListParams_1","lastMessageTime","useScrollCallback","useCallback","cb","useScrollDownCallback","useDeleteMessageCallback","requestState","Promise","resolve","reject","deleteMessage","useUpdateMessageCallback","onBeforeUpdateUserMessage","isMentionEnabled","props","callback","mentionedUsers","mentionTemplate","createParamsDefault","params","mentionedMessageTemplate","createCustomPrams","updateUserMessage","publish","useResendMessageCallback","failedMessage","file","isResendable","resendUserMessage","resendFileMessage","console","useSendMessageCallback","onBeforeSendUserMessage","messageInputRef","useRef","sendMessage","quoteMessage","trim","isReplyToChannel","sendUserMessage","onPending","pendingMsg","onFailed","onSucceeded","useSendFileMessageCallback","onBeforeSendFileMessage","imageCompression","compressionRate","resizingWidth","resizingHeight","createCustomParams","compressibleFileType","compressibleRatio","compressibleDiamensions","canCompressImage","file_","image","createElement","src","URL","createObjectURL","onload","revokeObjectURL","canvas","imageWdith","naturalWidth","width","imageHeight","naturalHeight","height","targetWidth","targetHeight","context","getContext","drawImage","toBlob","newImageBlob","compressedFile","File","name","sendFileMessage","pendingMessage","localUrl","succeededMessage","useMemoizedEmojiListItems","toggleReaction","emojiAllList","useMemo","parentRef","parentContainRef","closeDropdown","spaceFromTrigger","React","EmojiListItems","emoji","reactedReaction","reactions","reaction","isReacted","userIds","indexOf","ReactionButton","ImageRenderer","Icon","IconTypes","QUESTION","useToggleReactionCallback","deleteReaction","res","addReaction","useScrollToMessage","setInitialTimeStamp","setAnimatedMessageId","isPresent","ThreadReplySelectType","ChannelContext","createContext","undefined","ChannelProvider","children","_e","isMessageGroupingEnabled","showSearchIcon","animatedMessage","highlightedMessage","startingPoint","onChatHeaderActionClick","onSearchClick","onBackClick","_f","threadReplySelectType","THREAD","queries","_g","onReplyInThread","onQuoteMessageClick","onMessageAnimated","onMessageHighlighted","globalStore","useSendbirdStateContext","config","onUserProfileMessage","stores","sdkStore","_d","_c","_h","useState","_j","animatedMessageId","_k","highLightedMessageId","setHighLightedMessageId","_l","_m","useReducer","messagesReducer","messagesInitialState","messagesStore","readStatus","isSuper","isBroadcast","usingReaction","emojiAllMap","onScrollCallback","scrollToMessage","onScrollDownCallback","memoizedEmojiListItems","useGetChannel","updateMessage","resendMessage","_o","UserProfileProvider","disableUserProfile","renderUserProfile","useChannelContext","useContext"],"mappings":"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"}