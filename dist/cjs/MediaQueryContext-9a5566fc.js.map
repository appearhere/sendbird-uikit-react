{"version":3,"file":"MediaQueryContext-9a5566fc.js","sources":["../../src/lib/MediaQueryContext.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport type { Logger } from './SendbirdState';\n\nconst DEFAULT_MOBILE = '0px';\nconst MOBILE_CLASSNAME = 'sendbird--mobile-mode';\n\nconst MediaQueryContext = React.createContext({\n  mediaQueryBreakPoint: DEFAULT_MOBILE,\n  isMobile: false,\n});\n\nexport interface MediaQueryProviderProps {\n  children: React.ReactElement;\n  mediaQueryBreakPoint?: string | boolean;\n  logger?: Logger;\n}\n\nconst addClassNameToBody = () => {\n  try {\n    const body = document.querySelector('body');\n    body.classList.add(MOBILE_CLASSNAME);\n  } catch {\n    // noop\n  }\n};\n\nconst removeClassNameFromBody = () => {\n  try {\n    const body = document.querySelector('body');\n    body.classList.remove(MOBILE_CLASSNAME);\n  } catch {\n    // noop\n  }\n};\n\nconst MediaQueryProvider = (props: MediaQueryProviderProps): React.ReactElement => {\n  const {\n    children,\n    logger,\n  } = props;\n  const mediaQueryBreakPoint = props?.mediaQueryBreakPoint || DEFAULT_MOBILE;\n  const [isMobile, setIsMobile] = useState(false);\n  useEffect(() => {\n    const updateSize = () => {\n      if (typeof mediaQueryBreakPoint === 'boolean') {\n        setIsMobile(mediaQueryBreakPoint);\n        if (mediaQueryBreakPoint) {\n          logger?.info?.(`MediaQueryProvider: isMobile: true`);\n          addClassNameToBody();\n        } else {\n          logger?.info?.(`MediaQueryProvider: isMobile: false`);\n          removeClassNameFromBody();\n        }\n      } else {\n        const mq = window.matchMedia(`(max-width: ${mediaQueryBreakPoint})`);\n        logger?.info?.(`MediaQueryProvider: Screensize updated to ${mediaQueryBreakPoint}`);\n        if (mq.matches) {\n          setIsMobile(true);\n          addClassNameToBody();\n          logger?.info?.(`MediaQueryProvider: isMobile: true`);\n        } else {\n          setIsMobile(false);\n          removeClassNameFromBody();\n          logger?.info?.(`MediaQueryProvider: isMobile: false`);\n        }\n      }\n    }\n    updateSize();\n    window.addEventListener('resize', updateSize);\n    logger?.info?.(`MediaQueryProvider: addEventListener`, updateSize);\n    return () => {\n      window.removeEventListener('resize', updateSize);\n      logger?.info?.(`MediaQueryProvider: removeEventListener`, updateSize);\n    }\n  }, [mediaQueryBreakPoint]);\n  return (\n    <MediaQueryContext.Provider value={{ mediaQueryBreakPoint, isMobile }}>\n      {children}\n    </MediaQueryContext.Provider>\n  );\n};\n\nexport type useMediaQueryContextType = () => ({\n  mediaQueryBreakPoint: string | boolean;\n  isMobile: boolean;\n});\n\nconst useMediaQueryContext: useMediaQueryContextType = () => React.useContext(MediaQueryContext);\n\nexport { MediaQueryProvider, useMediaQueryContext };\n"],"names":["DEFAULT_MOBILE","MOBILE_CLASSNAME","MediaQueryContext","React","createContext","mediaQueryBreakPoint","isMobile","addClassNameToBody","body","document","querySelector","classList","add","_a","removeClassNameFromBody","remove","MediaQueryProvider","props","children","logger","useState","setIsMobile","useEffect","updateSize","info","call","_b","mq","window","matchMedia","concat","_c","matches","_d","_e","addEventListener","removeEventListener","useMediaQueryContext","useContext"],"mappings":"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"}